/*! For license information please see app.js.LICENSE.txt */
!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=0)}({"+lRy":function(e,t){},0:function(e,t,i){i("JO1w"),i("+lRy"),e.exports=i("y1Nr")},"1I99":function(e,t,i){var n=i("hHoP");e.exports=function(e,t,i,r){(t="string"==typeof t?t.split(" "):t).forEach((function(t){n(e,(function(e){e.addEventListener(t,i,r)}))}))}},"2DJw":function(e,t){e.exports=function(){return window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)}},"4nP2":function(e,t,i){var n=i("hHoP"),r=i("Wihx");e.exports=function(e){"script"===e.tagName.toLowerCase()&&r(e),n(e.querySelectorAll("script"),(function(e){e.type&&"text/javascript"!==e.type.toLowerCase()||(e.parentNode&&e.parentNode.removeChild(e),r(e))}))}},"5s6v":function(e,t,i){var n=i("hHoP"),r=i("C+yW");e.exports=function(e,t,i,s,a,o){var l=[];i.forEach((function(i){var c=s.querySelectorAll(i),u=a.querySelectorAll(i);if(this.log&&this.log("Pjax switch",i,c,u),c.length!==u.length)throw"DOM doesnâ€™t look the same on new loaded page: â€™"+i+"â€™ - new "+c.length+", old "+u.length;n(c,(function(n,s){var a=u[s];this.log&&this.log("newEl",n,"oldEl",a);var c=e[i]?e[i].bind(this,a,n,o,t[i]):r.outerHTML.bind(this,a,n,o);l.push(c)}),this)}),this),this.state.numPendingSwitches=l.length,l.forEach((function(e){e()}))}},"7OUW":function(e,t,i){e.exports=function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};t[a][0].call(c.exports,(function(e){return r(t[a][1][e]||e)}),c,c.exports,e,t,i,n)}return i[a].exports}for(var s=!1,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){t.exports=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{}],2:[function(e,t,i){t.exports=function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{}],3:[function(e,t,i){t.exports=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{}],4:[function(e,t,i){var n=e("./bounce-out");t.exports=function(e){return e<.5?.5*(1-n(1-2*e)):.5*n(2*e-1)+.5}},{"./bounce-out":6}],5:[function(e,t,i){var n=e("./bounce-out");t.exports=function(e){return 1-n(1-e)}},{"./bounce-out":6}],6:[function(e,t,i){t.exports=function(e){var t=e*e;return e<4/11?7.5625*t:e<8/11?9.075*t-9.9*e+3.4:e<.9?4356/361*t-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72}},{}],7:[function(e,t,i){t.exports=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{}],8:[function(e,t,i){t.exports=function(e){return 1-Math.sqrt(1-e*e)}},{}],9:[function(e,t,i){t.exports=function(e){return Math.sqrt(1- --e*e)}},{}],10:[function(e,t,i){t.exports=function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}},{}],11:[function(e,t,i){t.exports=function(e){return e*e*e}},{}],12:[function(e,t,i){t.exports=function(e){var t=e-1;return t*t*t+1}},{}],13:[function(e,t,i){t.exports=function(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}},{}],14:[function(e,t,i){t.exports=function(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}},{}],15:[function(e,t,i){t.exports=function(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}},{}],16:[function(e,t,i){t.exports=function(e){return 0===e||1===e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1}},{}],17:[function(e,t,i){t.exports=function(e){return 0===e?e:Math.pow(2,10*(e-1))}},{}],18:[function(e,t,i){t.exports=function(e){return 1===e?e:1-Math.pow(2,-10*e)}},{}],19:[function(e,t,i){t.exports={backInOut:e("./back-in-out"),backIn:e("./back-in"),backOut:e("./back-out"),bounceInOut:e("./bounce-in-out"),bounceIn:e("./bounce-in"),bounceOut:e("./bounce-out"),circInOut:e("./circ-in-out"),circIn:e("./circ-in"),circOut:e("./circ-out"),cubicInOut:e("./cubic-in-out"),cubicIn:e("./cubic-in"),cubicOut:e("./cubic-out"),elasticInOut:e("./elastic-in-out"),elasticIn:e("./elastic-in"),elasticOut:e("./elastic-out"),expoInOut:e("./expo-in-out"),expoIn:e("./expo-in"),expoOut:e("./expo-out"),linear:e("./linear"),quadInOut:e("./quad-in-out"),quadIn:e("./quad-in"),quadOut:e("./quad-out"),quartInOut:e("./quart-in-out"),quartIn:e("./quart-in"),quartOut:e("./quart-out"),quintInOut:e("./quint-in-out"),quintIn:e("./quint-in"),quintOut:e("./quint-out"),sineInOut:e("./sine-in-out"),sineIn:e("./sine-in"),sineOut:e("./sine-out")}},{"./back-in":2,"./back-in-out":1,"./back-out":3,"./bounce-in":5,"./bounce-in-out":4,"./bounce-out":6,"./circ-in":8,"./circ-in-out":7,"./circ-out":9,"./cubic-in":11,"./cubic-in-out":10,"./cubic-out":12,"./elastic-in":14,"./elastic-in-out":13,"./elastic-out":15,"./expo-in":17,"./expo-in-out":16,"./expo-out":18,"./linear":20,"./quad-in":22,"./quad-in-out":21,"./quad-out":23,"./quart-in":25,"./quart-in-out":24,"./quart-out":26,"./quint-in":28,"./quint-in-out":27,"./quint-out":29,"./sine-in":31,"./sine-in-out":30,"./sine-out":32}],20:[function(e,t,i){t.exports=function(e){return e}},{}],21:[function(e,t,i){t.exports=function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{}],22:[function(e,t,i){t.exports=function(e){return e*e}},{}],23:[function(e,t,i){t.exports=function(e){return-e*(e-2)}},{}],24:[function(e,t,i){t.exports=function(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}},{}],25:[function(e,t,i){t.exports=function(e){return Math.pow(e,4)}},{}],26:[function(e,t,i){t.exports=function(e){return Math.pow(e-1,3)*(1-e)+1}},{}],27:[function(e,t,i){t.exports=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{}],28:[function(e,t,i){t.exports=function(e){return e*e*e*e*e}},{}],29:[function(e,t,i){t.exports=function(e){return--e*e*e*e*e+1}},{}],30:[function(e,t,i){t.exports=function(e){return-.5*(Math.cos(Math.PI*e)-1)}},{}],31:[function(e,t,i){t.exports=function(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}},{}],32:[function(e,t,i){t.exports=function(e){return Math.sin(e*Math.PI/2)}},{}],33:[function(e,t,i){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var i=parseFloat(e,10);return t[0]=i,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.create=void 0;var n=s(e("parse-unit")),r=s(e("eases"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,l,c=[],u="undefined"!=typeof window,h=function(){return(document.scrollingElement||document.documentElement).scrollTop},d=function(){return window.innerHeight||window.outerHeight},p=function(e){return!1===isNaN((0,n.default)(e)[0])},f=function(e){var t=(0,n.default)(e);return{value:t[0],unit:t[1]}},m=function(e){return null!==String(e).match(/^[a-z]+-[a-z]+$/)},g=function(e,t){return!0===e?t.elem:e instanceof HTMLElement==1?t.direct:t.global},v=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(),r=t.getBoundingClientRect(),s=e.match(/^[a-z]+/)[0],a=e.match(/[a-z]+$/)[0],o=0;return"top"===a&&(o-=0),"middle"===a&&(o-=n/2),"bottom"===a&&(o-=n),"top"===s&&(o+=r.top+i),"middle"===s&&(o+=r.top+i+r.height/2),"bottom"===s&&(o+=r.top+i+r.height),"".concat(o,"px")},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h(),i=e.getData(),n=i.to.value-i.from.value,r=t-i.from.value,s=r/(n/100),a=Math.min(Math.max(s,0),100),o=g(i.direct,{global:document.documentElement,elem:i.elem,direct:i.direct}),l=Object.keys(i.props).reduce((function(e,t){var n=i.props[t],r=n.from.unit||n.to.unit,s=n.from.value-n.to.value,o=n.timing(a/100),l=n.from.value-s*o,c=Math.round(1e4*l)/1e4;return e[t]=c+r,e}),{}),c=s>=0&&s<=100,u=s<0||s>100;return!0===c&&i.inside(e,s,l),!0===u&&i.outside(e,s,l),{elem:o,props:l}},x=function(e,t){Object.keys(t).forEach((function(i){return function(e,t){e.style.setProperty(t.key,t.value)}(e,{key:i,value:t[i]})}))};i.create=function(e){var t=null,i=!1,n={isActive:function(){return i},getData:function(){return t},calculate:function(){t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).inside&&(e.inside=function(){}),null==e.outside&&(e.outside=function(){}),null==e.direct&&(e.direct=!1),null==e.track&&(e.track=!0),null==e.props&&(e.props={}),null==e.from)throw new Error("Missing property `from`");if(null==e.to)throw new Error("Missing property `to`");if("function"!=typeof e.inside)throw new Error("Property `inside` must be undefined or a function");if("function"!=typeof e.outside)throw new Error("Property `outside` must be undefined or a function");if("boolean"!=typeof e.direct&&e.direct instanceof HTMLElement==0)throw new Error("Property `direct` must be undefined, a boolean or a DOM element/node");if(!0===e.direct&&null==e.elem)throw new Error("Property `elem` is required when `direct` is true");if("boolean"!=typeof e.track)throw new Error("Property `track` must be undefined or a boolean");if("object"!==a(e.props))throw new Error("Property `props` must be undefined or an object");if(null==e.elem){if(!1===p(e.from))throw new Error("Property `from` must be a absolute value when no `elem` has been provided");if(!1===p(e.to))throw new Error("Property `to` must be a absolute value when no `elem` has been provided")}else!0===m(e.from)&&(e.from=v(e.from,e.elem)),!0===m(e.to)&&(e.to=v(e.to,e.elem));return e.from=f(e.from),e.to=f(e.to),e.props=Object.keys(e.props).reduce((function(t,i){var n=Object.assign({},e.props[i]);if(!1===p(n.from))throw new Error("Property `from` of prop must be a absolute value");if(!1===p(n.to))throw new Error("Property `from` of prop must be a absolute value");if(n.from=f(n.from),n.to=f(n.to),null==n.timing&&(n.timing=r.default.linear),"string"!=typeof n.timing&&"function"!=typeof n.timing)throw new Error("Property `timing` of prop must be undefined, a string or a function");if("string"==typeof n.timing&&null==r.default[n.timing])throw new Error("Unknown timing for property `timing` of prop");return"string"==typeof n.timing&&(n.timing=r.default[n.timing]),t[i]=n,t}),{}),e}(e)},update:function(){var e=y(n),t=e.elem,i=e.props;return x(t,i),i},start:function(){i=!0},stop:function(){i=!1},destroy:function(){c[s]=void 0}},s=c.push(n)-1;return n.calculate(),n},!0===u?(function e(t,i){var n=function(){requestAnimationFrame((function(){return e(t,i)}))},r=function(e){return e.filter((function(e){return null!=e&&e.isActive()}))}(c);if(0===r.length)return n();var s=h();if(i===s)return n();i=s,r.map((function(e){return y(e,s)})).forEach((function(e){var t=e.elem,i=e.props;return x(t,i)})),n()}(),window.addEventListener("resize",(o=function(){(function(e){return e.filter((function(e){return null!=e&&e.getData().track}))})(c).forEach((function(e){e.calculate(),e.update()}))},l=null,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(l),l=setTimeout((function(){return o.apply(void 0,t)}),50)}))):console.warn("basicScroll is not executing because you are using it in an environment without a `window` object")},{eases:19,"parse-unit":33}]},{},[34])(34)},"8Rbj":function(e,t,i){var n=i("IzBT");e.exports=function(e,t,i){var r,s=(t=t||{}).requestOptions||{},a=(s.requestMethod||"GET").toUpperCase(),o=s.requestParams||null,l=s.formData||null,c=null,u=new XMLHttpRequest,h=t.timeout||0;if(u.onreadystatechange=function(){4===u.readyState&&(200===u.status?i(u.responseText,u,e,t):0!==u.status&&i(null,u,e,t))},u.onerror=function(n){console.log(n),i(null,u,e,t)},u.ontimeout=function(){i(null,u,e,t)},o&&o.length)switch(r=o.map((function(e){return e.name+"="+e.value})).join("&"),a){case"GET":e=e.split("?")[0],e+="?"+r;break;case"POST":c=r}else l&&(c=l);return t.cacheBust&&(e=n(e,"t",Date.now())),u.open(a,e,!0),u.timeout=h,u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("X-PJAX","true"),u.setRequestHeader("X-PJAX-Selectors",JSON.stringify(t.selectors)),c&&"POST"===a&&!l&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(c),u}},"9/o9":function(e,t,i){window,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n,r="fslightbox-",s="".concat(r,"styles"),a="".concat(r,"cursor-grabbing"),o="".concat(r,"full-dimension"),l="".concat(r,"flex-centered"),c="".concat(r,"open"),u="".concat(r,"transform-transition"),h="".concat(r,"absoluted"),d="".concat(r,"slide-btn"),p="".concat(d,"-container"),f="".concat(r,"fade-in"),m="".concat(r,"fade-out"),g=f+"-strong",v=m+"-strong",y="".concat(r,"opacity-"),x="".concat(y,"1"),b="".concat(r,"source");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){var t,i=e.props,n=0,r={};this.getSourceTypeFromLocalStorageByUrl=function(e){return t[e]?t[e]:s(e)},this.handleReceivedSourceTypeForUrl=function(e,i){!1===r[i]&&(n--,"invalid"!==e?r[i]=e:delete r[i],0===n&&(function(e,t){for(var i in t)e[i]=t[i]}(t,r),localStorage.setItem("fslightbox-types",JSON.stringify(t))))};var s=function(e){n++,r[e]=!1};i.disableLocalStorage?(this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){}):(t=JSON.parse(localStorage.getItem("fslightbox-types")))||(t={},this.getSourceTypeFromLocalStorageByUrl=s)}function M(e,t,i,n){var r=e.data,s=e.elements.sources,a=i/n,o=0;this.adjustSize=function(){if((o=r.maxSourceWidth/a)<r.maxSourceHeight)return i<r.maxSourceWidth&&(o=n),l();o=n>r.maxSourceHeight?r.maxSourceHeight:n,l()};var l=function(){s[t].style.width=o*a+"px",s[t].style.height=o+"px"}}function S(e,t){var i=this,n=e.collections.sourceSizers,r=e.elements,s=r.sourceAnimationWrappers,a=r.sourceMainWrappers,o=r.sources,l=e.resolve;function c(e,i){n[t]=l(M,[t,e,i]),n[t].adjustSize()}this.runActions=function(e,n){o[t].classList.add(x),s[t].classList.add(g),a[t].removeChild(a[t].firstChild),c(e,n),i.runActions=c}}function E(e,t){var i,n=this,r=e.elements.sources,s=e.props,a=(0,e.resolve)(S,[t]);this.handleImageLoad=function(e){var t=e.target,i=t.naturalWidth,n=t.naturalHeight;a.runActions(i,n)},this.handleVideoLoad=function(e){var t=e.target,n=t.videoWidth,r=t.videoHeight;i=!0,a.runActions(n,r)},this.handleNotMetaDatedVideoLoad=function(){i||n.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var e=1920,t=1080;s.maxYoutubeDimensions&&(e=s.maxYoutubeDimensions.width,t=s.maxYoutubeDimensions.height),a.runActions(e,t)},this.handleCustomLoad=function(){setTimeout((function(){var e=r[t];a.runActions(e.offsetWidth,e.offsetHeight)}))}}function T(e,t,i){var n=e.elements.sources,r=e.props.customClasses,s=r[t]?r[t]:"";n[t].className=i+" "+s}function A(e,t){var i=e.elements.sources,n=e.props.customAttributes;for(var r in n[t])i[t].setAttribute(r,n[t][r])}function C(e,t){var i=e.collections.sourceLoadHandlers,n=e.elements,r=n.sources,s=n.sourceAnimationWrappers,a=e.props.sources;r[t]=document.createElement("img"),T(e,t,b),r[t].src=a[t],r[t].onload=i[t].handleImageLoad,A(e,t),s[t].appendChild(r[t])}function L(e,t){var i=e.collections.sourceLoadHandlers,n=e.elements,r=n.sources,s=n.sourceAnimationWrappers,a=e.props,o=a.sources,l=a.videosPosters;r[t]=document.createElement("video"),T(e,t,b),r[t].src=o[t],r[t].onloadedmetadata=function(e){i[t].handleVideoLoad(e)},r[t].controls=!0,A(e,t),l[t]&&(r[t].poster=l[t]);var c=document.createElement("source");c.src=o[t],r[t].appendChild(c),setTimeout(i[t].handleNotMetaDatedVideoLoad,3e3),s[t].appendChild(r[t])}function P(e,t){var i=e.collections.sourceLoadHandlers,n=e.elements,s=n.sources,a=n.sourceAnimationWrappers,o=e.props.sources;s[t]=document.createElement("iframe"),T(e,t,"".concat(b," ").concat(r,"youtube-iframe")),s[t].src="https://www.youtube.com/embed/".concat(o[t].match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?enablejsapi=1"),s[t].allowFullscreen=!0,A(e,t),a[t].appendChild(s[t]),i[t].handleYoutubeLoad()}function R(e,t){var i=e.collections.sourceLoadHandlers,n=e.elements,r=n.sources,s=n.sourceAnimationWrappers,a=e.props.sources;r[t]=a[t],T(e,t,"".concat(r[t].className," ").concat(b)),s[t].appendChild(r[t]),i[t].handleCustomLoad()}function k(e,t){var i=e.elements,n=i.sources,s=i.sourceAnimationWrappers,a=i.sourceMainWrappers;e.props.sources,n[t]=document.createElement("div"),n[t].className="".concat(r,"invalid-file-wrapper ").concat(l),n[t].innerHTML="Invalid source",s[t].classList.add(g),s[t].appendChild(n[t]),a[t].removeChild(a[t].firstChild)}function I(e){var t=e.collections,i=t.sourceLoadHandlers,n=t.sourcesRenderFunctions,r=e.core.sourceDisplayFacade,s=e.resolve;this.runActionsForSourceTypeAndIndex=function(t,a){var o;switch("invalid"!==t&&(i[a]=s(E,[a])),t){case"image":o=C;break;case"video":o=L;break;case"youtube":o=P;break;case"custom":o=R;break;default:o=k}n[a]=function(){return o(e,a)},r.displaySourcesWhichShouldBeDisplayed()}}function O(){var e,t,i,n=function(e){var t=document.createElement("a");return t.href=e,"www.youtube.com"===t.hostname},r=function(e){return e.slice(0,e.indexOf("/"))};function s(){if(4!==i.readyState){if(2===i.readyState){var e;switch(r(i.getResponseHeader("content-type"))){case"image":e="image";break;case"video":e="video";break;default:e="invalid"}i.onreadystatechange=null,i.abort(),t(e)}}else t("invalid")}this.setUrlToCheck=function(t){e=t},this.getSourceType=function(r){if(n(e))return r("youtube");t=r,(i=new XMLHttpRequest).onreadystatechange=s,i.open("GET",e,!0),i.send()}}function D(e,t,i){var n=e.props,r=n.types,s=n.type,a=n.sources,o=e.resolve;this.getTypeSetByClientForIndex=function(e){var t;return r&&r[e]?t=r[e]:s&&(t=s),t},this.retrieveTypeWithXhrForIndex=function(e){var n=o(O);n.setUrlToCheck(a[e]),n.getSourceType((function(n){t.handleReceivedSourceTypeForUrl(n,a[e]),i.runActionsForSourceTypeAndIndex(n,e)}))}}function z(e,t){var i=e.componentsServices.hideSourceLoaderIfNotYetCollection,n=e.elements,r=n.sourceWrappersContainer,s=n.sourceMainWrappers;s[t]=document.createElement("div"),s[t].className="".concat(h," ").concat(o," ").concat(l),s[t].innerHTML='<div class="fslightbox-loader"><div></div><div></div><div></div><div></div></div>';var a=s[t].firstChild;i[t]=function(){s[t].contains(a)&&s[t].removeChild(a)},r.appendChild(s[t]),function(e,t){var i=e.elements,n=i.sourceMainWrappers,r=i.sourceAnimationWrappers;r[t]=document.createElement("div"),n[t].appendChild(r[t])}(e,t)}function N(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",t),s.setAttributeNS(null,"height",t),s.setAttributeNS(null,"viewBox",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttributeNS(null,"class","".concat(r,"svg-path")),a.setAttributeNS(null,"d",n),s.appendChild(a),e.appendChild(s),s}function B(e,t){var i=document.createElement("div");return i.className="".concat(r,"toolbar-button ").concat(l),i.title=t,e.appendChild(i),i}function F(e){var t=e.props.sources,i=e.elements.container,n=document.createElement("div");n.className="".concat(r,"nav"),i.appendChild(n),function(e,t){var i=document.createElement("div");i.className="".concat(r,"toolbar"),t.appendChild(i),function(e,t){var i=e.componentsServices,n=e.core.fullscreenToggler,r=e.data,s="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",a=B(t);a.title="Enter fullscreen";var o=N(a,"20px","0 0 18 18",s);i.enterFullscreen=function(){r.isFullscreenOpen=!0,a.title="Exit fullscreen",o.setAttributeNS(null,"width","24px"),o.setAttributeNS(null,"height","24px"),o.setAttributeNS(null,"viewBox","0 0 950 1024"),o.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},i.exitFullscreen=function(){r.isFullscreenOpen=!1,a.title="Enter fullscreen",o.setAttributeNS(null,"width","20px"),o.setAttributeNS(null,"height","20px"),o.setAttributeNS(null,"viewBox","0 0 18 18"),o.firstChild.setAttributeNS(null,"d",s)},a.onclick=function(){r.isFullscreenOpen?n.exitFullscreen():n.enterFullscreen()}}(e,i),function(e,t){var i=B(t,"Close");i.onclick=e.core.lightboxCloser.closeLightbox,N(i,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}(e,i)}(e,n),t.length>1&&function(e,t){var i=e.componentsServices,n=e.props.sources,s=(e.stageIndexes,document.createElement("div"));s.className="".concat(r,"slide-number-container");var a=document.createElement("div");a.className=l;var o=document.createElement("span");i.setSlideNumber=function(e){return o.innerHTML=e};var c=document.createElement("span");c.className="".concat(r,"slash");var u=document.createElement("div");u.innerHTML=n.length,s.appendChild(a),a.appendChild(o),a.appendChild(c),a.appendChild(u),t.appendChild(s),setTimeout((function(){a.offsetWidth>55&&(s.style.justifyContent="flex-start")}))}(e,n)}function H(e,t){var i=this,n=e.elements.sourceMainWrappers,r=e.props,s=0;this.byValue=function(e){return s=e,i},this.negative=function(){a(-o())},this.zero=function(){a(0)},this.positive=function(){a(o())};var a=function(e){n[t].style.transform="translateX(".concat(e+s,"px)"),s=0},o=function(){return(1+r.slideDistance)*innerWidth}}function U(e,t,i,n){var r=e.elements.container,s=i.charAt(0).toUpperCase()+i.slice(1),a=document.createElement("div");a.className="".concat(p," ").concat(p,"-").concat(i),a.title="".concat(s," slide"),a.onclick=t,function(e,t){var i=document.createElement("div");i.className="".concat(d," ").concat(l),N(i,"20px","0 0 20 20",t),e.appendChild(i)}(a,n),r.appendChild(a)}function V(e,t){var i=e.classList;i.contains(t)&&i.remove(t)}function W(e){var t=this,i=e.core,n=i.eventsDispatcher,r=i.fullscreenToggler,s=i.globalEventsController,a=i.scrollbarRecompensor,o=e.data,l=e.elements,u=e.props,h=e.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){t.isLightboxFadingOut=!0,l.container.classList.add(v),s.removeListeners(),u.exitFullscreenOnClose&&o.isFullscreenOpen&&r.exitFullscreen(),setTimeout((function(){t.isLightboxFadingOut=!1,h.isPointering=!1,l.container.classList.remove(v),document.documentElement.classList.remove(c),a.removeRecompense(),document.body.removeChild(l.container),n.dispatch("onClose")}),270)}}function G(e){var t=e.core,i=t.lightboxCloser,n=t.fullscreenToggler,r=t.slideChangeFacade;this.listener=function(e){switch(e.key){case"Escape":i.closeLightbox();break;case"ArrowLeft":r.changeToPrevious();break;case"ArrowRight":r.changeToNext();break;case"F11":e.preventDefault(),n.enterFullscreen()}}}function j(e){var t=e.collections.sourceMainWrappersTransformers,i=e.elements,n=e.sourcePointerProps,r=e.stageIndexes;function s(e,i){t[e].byValue(n.swipedX)[i]()}this.runActionsForEvent=function(e){var t,o,l;i.container.contains(i.slideSwipingHoverer)||i.container.appendChild(i.slideSwipingHoverer),t=i.container,o=a,(l=t.classList).contains(o)||l.add(o),n.swipedX=e.screenX-n.downScreenX,s(r.current,"zero"),void 0!==r.previous&&n.swipedX>0?s(r.previous,"negative"):void 0!==r.next&&n.swipedX<0&&s(r.next,"positive")}}function q(e){var t=e.props.sources,i=e.resolve,n=e.sourcePointerProps,r=i(j);1===t.length?this.listener=function(){n.swipedX=1}:this.listener=function(e){n.isPointering&&r.runActionsForEvent(e)}}function X(e){var t=e.collections.sourceMainWrappersTransformers,i=e.core.slideIndexChanger,n=e.elements.sourceMainWrappers,r=e.stageIndexes;this.runPositiveSwipedXActions=function(){void 0===r.previous||(s("positive"),i.changeTo(r.previous)),s("zero")},this.runNegativeSwipedXActions=function(){void 0===r.next||(s("negative"),i.changeTo(r.next)),s("zero")};var s=function(e){n[r.current].classList.add(u),t[r.current][e]()}}function Y(e,t){e.contains(t)&&e.removeChild(t)}function $(e){var t=e.core.lightboxCloser,i=e.elements,n=e.resolve,r=e.sourcePointerProps,s=n(X);this.runNoSwipeActions=function(){Y(i.container,i.slideSwipingHoverer),r.isSourceDownEventTarget||t.closeLightbox(),r.isPointering=!1},this.runActions=function(){r.swipedX>0?s.runPositiveSwipedXActions():s.runNegativeSwipedXActions(),Y(i.container,i.slideSwipingHoverer),i.container.classList.remove(a),r.isPointering=!1}}function J(e){var t=e.resolve,i=e.sourcePointerProps,n=t($);this.listener=function(){i.isPointering&&(i.swipedX?n.runActions():n.runNoSwipeActions())}}function Z(e){var t,i,n;i=(t=e).core.classFacade,n=t.elements,i.removeFromEachElementClassIfContains=function(e,t){for(var i=0;i<n[e].length;i++)V(n[e][i],t)},function(e){var t=e.core.eventsDispatcher,i=e.props;t.dispatch=function(e){i[e]&&i[e]()}}(e),function(e){var t=e.componentsServices,i=e.core.fullscreenToggler;i.enterFullscreen=function(){t.enterFullscreen();var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},i.exitFullscreen=function(){t.exitFullscreen(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}(e),function(e){var t=e.core,i=t.globalEventsController,n=t.windowResizeActioner,r=e.resolve,s=r(G),a=r(q),o=r(J);i.attachListeners=function(){document.addEventListener("pointermove",a.listener),document.addEventListener("pointerup",o.listener),addEventListener("resize",n.runActions),document.addEventListener("keydown",s.listener)},i.removeListeners=function(){document.removeEventListener("pointermove",a.listener),document.removeEventListener("pointerup",o.listener),removeEventListener("resize",n.runActions),document.removeEventListener("keydown",s.listener)}}(e),function(e){var t=e.core.lightboxCloser,i=(0,e.resolve)(W);t.closeLightbox=function(){i.isLightboxFadingOut||i.runActions()}}(e),K(e),function(e){var t=e.data,i=e.core.scrollbarRecompensor;i.addRecompense=function(){"complete"===document.readyState?n():addEventListener("load",(function(){n(),i.addRecompense=n}))};var n=function(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=t.scrollbarWidth+"px")};i.removeRecompense=function(){document.body.style.removeProperty("margin-right")}}(e),function(e){var t=e.core,i=t.slideChangeFacade,n=t.slideIndexChanger,r=t.stageManager;e.props.sources.length>1?(i.changeToPrevious=function(){n.jumpTo(r.getPreviousSlideIndex())},i.changeToNext=function(){n.jumpTo(r.getNextSlideIndex())}):(i.changeToPrevious=function(){},i.changeToNext=function(){})}(e),function(e){var t,i,n=e.collections.sourceMainWrappersTransformers,r=e.componentsServices,s=e.core,a=s.classFacade,o=s.slideIndexChanger,l=s.sourceDisplayFacade,c=s.stageManager,h=e.elements.sourceAnimationWrappers,d=e.stageIndexes,p=(t=function(){a.removeFromEachElementClassIfContains("sourceAnimationWrappers",m)},i=[],function(){i.push(!0),setTimeout((function(){i.pop(),i.length||t()}),300)});o.changeTo=function(e){d.current=e,c.updateStageIndexes(),r.setSlideNumber(e+1),l.displaySourcesWhichShouldBeDisplayed()},o.jumpTo=function(e){var t=d.current;o.changeTo(e),a.removeFromEachElementClassIfContains("sourceMainWrappers",u),V(h[t],g),V(h[t],f),h[t].classList.add(m),V(h[e],g),V(h[e],m),h[e].classList.add(f),p(),n[e].zero(),setTimeout((function(){t!==d.current&&n[t].negative()}),270)}}(e),function(e){var t=e.core,i=t.classFacade,n=t.sourcesPointerDown,r=e.elements.sources,s=e.sourcePointerProps,a=e.stageIndexes;n.listener=function(e){"VIDEO"!==e.target.tagName&&e.preventDefault(),s.isPointering=!0,s.downScreenX=e.screenX,s.swipedX=0;var t=r[a.current];t&&t.contains(e.target)?s.isSourceDownEventTarget=!0:s.isSourceDownEventTarget=!1,i.removeFromEachElementClassIfContains("sourceMainWrappers",u)}}(e),function(e){var t=e.collections.sourcesRenderFunctions,i=e.core.sourceDisplayFacade,n=e.props,r=e.stageIndexes;function s(e){t[e]&&(t[e](),delete t[e])}i.displaySourcesWhichShouldBeDisplayed=function(){if(n.loadOnlyCurrentSource)s(r.current);else for(var e in r)s(r[e])}}(e),function(e){var t=e.stageIndexes,i=e.core.stageManager,n=e.props.sources.length-1;i.getPreviousSlideIndex=function(){return 0===t.current?n:t.current-1},i.getNextSlideIndex=function(){return t.current===n?0:t.current+1},i.updateStageIndexes=0===n?function(){}:1===n?function(){0===t.current?(t.next=1,delete t.previous):(t.previous=0,delete t.next)}:function(){t.previous=i.getPreviousSlideIndex(),t.next=i.getNextSlideIndex()},i.isSourceInStage=n<=2?function(){return!0}:function(e){var i=t.current;if(0===i&&e===n||i===n&&0===e)return!0;var r=i-e;return-1===r||0===r||1===r}}(e),function(e){var t=e.collections,i=t.sourceMainWrappersTransformers,n=t.sourceSizers,r=e.core.windowResizeActioner,s=e.data,a=e.elements.sourceMainWrappers,o=e.props,l=e.stageIndexes;r.runActions=function(){innerWidth<992?s.maxSourceWidth=innerWidth:s.maxSourceWidth=.9*innerWidth,s.maxSourceHeight=.9*innerHeight;for(var e=0;e<o.sources.length;e++)V(a[e],u),e!==l.current&&i[e].negative(),n[e]&&n[e].adjustSize()}}(e)}function Q(e){var t=e.core.eventsDispatcher,i=e.data,n=e.elements,s=e.props.sources;i.isInitialized=!0,i.scrollbarWidth=function(e){var t=e.props.disableLocalStorage;if(!t){var i=localStorage.getItem("fslightbox-scrollbar-width");if(i)return i}var n=function(){var e=document.createElement("div"),t=e.style;return t.visibility="hidden",t.width="100px",t.msOverflowStyle="scrollbar",t.overflow="scroll",e}(),r=function(){var e=document.createElement("div");return e.style.width="100%",e}();document.body.appendChild(n);var s=n.offsetWidth;n.appendChild(r);var a=r.offsetWidth;document.body.removeChild(n);var o=s-a;return t||localStorage.setItem("fslightbox-scrollbar-width",o.toString()),o}(e),function(e){for(var t=e.collections.sourceMainWrappersTransformers,i=e.props.sources,n=e.resolve,r=0;r<i.length;r++)t[r]=n(H,[r])}(e),Z(e),n.container=document.createElement("div"),n.container.className="".concat(r,"container ").concat(o," ").concat(g),function(e){var t=e.elements;t.slideSwipingHoverer=document.createElement("div"),t.slideSwipingHoverer.className="".concat(r,"slide-swiping-hoverer ").concat(o," ").concat(h)}(e),F(e),function(e){var t=e.core.sourcesPointerDown,i=e.elements,n=e.props.sources,r=document.createElement("div");r.className="".concat(h," ").concat(o),i.container.appendChild(r),r.addEventListener("pointerdown",t.listener),i.sourceWrappersContainer=r;for(var s=0;s<n.length;s++)z(e,s)}(e),s.length>1&&function(e){var t=e.core.slideChangeFacade;U(e,t.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),U(e,t.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")}(e),function(e){for(var t=e.props.sources,i=e.resolve,n=i(_),r=i(I),s=i(D,[n,r]),a=0;a<t.length;a++)if("string"==typeof t[a]){var o=s.getTypeSetByClientForIndex(a);if(o)r.runActionsForSourceTypeAndIndex(o,a);else{var l=n.getSourceTypeFromLocalStorageByUrl(t[a]);l?r.runActionsForSourceTypeAndIndex(l,a):s.retrieveTypeWithXhrForIndex(a)}}else r.runActionsForSourceTypeAndIndex("custom",a)}(e),t.dispatch("onInit")}function K(e){var t=e.collections.sourceMainWrappersTransformers,i=e.componentsServices,n=e.core,r=n.eventsDispatcher,s=n.lightboxOpener,a=n.globalEventsController,o=n.scrollbarRecompensor,l=n.sourceDisplayFacade,u=n.stageManager,h=n.windowResizeActioner,d=e.data,p=e.elements,f=e.stageIndexes;s.open=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;f.current=n,d.isInitialized?r.dispatch("onShow"):Q(e),u.updateStageIndexes(),l.displaySourcesWhichShouldBeDisplayed(),i.setSlideNumber(n+1),document.body.appendChild(p.container),document.documentElement.classList.add(c),o.addRecompense(),a.attachListeners(),h.runActions(),t[f.current].zero(),r.dispatch("onOpen")}}function ee(e,t,i){return(ee=te()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&ie(r,i.prototype),r}).apply(null,arguments)}function te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function se(){for(var e=document.getElementsByTagName("a"),t=function(t){if(!e[t].hasAttribute("data-fslightbox"))return"continue";var i,n=e[t].getAttribute("data-fslightbox"),r=e[t].getAttribute("href");fsLightboxInstances[n]||(fsLightboxInstances[n]=new FsLightbox),i="#"===r.charAt(0)?document.getElementById(r.substring(1)):r,fsLightboxInstances[n].props.sources.push(i),fsLightboxInstances[n].elements.a.push(e[t]);var s=fsLightboxInstances[n].props.sources.length-1;e[t].onclick=function(e){e.preventDefault(),fsLightboxInstances[n].open(s)},h("types","data-type"),h("videosPosters","data-video-poster"),h("customClasses","data-class"),h("customClasses","data-custom-class");for(var a=["href","data-fslightbox","data-type","data-video-poster","data-class","data-custom-class"],o=e[t].attributes,l=fsLightboxInstances[n].props.customAttributes,c=0;c<o.length;c++)if(-1===a.indexOf(o[c].name)&&"data-"===o[c].name.substr(0,5)){l[s]||(l[s]={});var u=o[c].name.substr(5);l[s][u]=o[c].value}function h(i,r){e[t].hasAttribute(r)&&(fsLightboxInstances[n].props[i][s]=e[t].getAttribute(r))}},i=0;i<e.length;i++)t(i);var n=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[n[n.length-1]]}"object"===("undefined"==typeof document?"undefined":w(document))&&((n=document.createElement("style")).className=s,n.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:none;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightbox-loader{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightbox-loader div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightbox-loader 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightbox-loader div:nth-child(1){animation-delay:-.45s}.fslightbox-loader div:nth-child(2){animation-delay:-.3s}.fslightbox-loader div:nth-child(3){animation-delay:-.15s}@keyframes fslightbox-loader{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(n)),window.FsLightbox=function(){var e=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isInitialized:!1,isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,sourceWrappersContainer:null,sources:[],sourceMainWrappers:[],sourceAnimationWrappers:[]},this.componentsServices={enterFullscreen:null,exitFullscreen:null,hideSourceLoaderIfNotYetCollection:[],setSlideNumber:function(){}},this.resolve=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i.unshift(e),ee(t,ne(i))},this.collections={sourceMainWrappersTransformers:[],sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={classFacade:{},eventsDispatcher:{},fullscreenToggler:{},globalEventsController:{},lightboxCloser:{},lightboxOpener:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},K(this),this.open=function(t){return e.core.lightboxOpener.open(t)},this.close=function(){return e.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},se(),window.refreshFsLightbox=function(){for(var e in fsLightboxInstances){var t=fsLightboxInstances[e].props;fsLightboxInstances[e]=new FsLightbox,fsLightboxInstances[e].props=t,fsLightboxInstances[e].props.sources=[],fsLightboxInstances[e].elements.a=[]}se()}}])},"C+yW":function(e,t,i){var n=i("1I99");e.exports={outerHTML:function(e,t){e.outerHTML=t.outerHTML,this.onSwitch()},innerHTML:function(e,t){e.innerHTML=t.innerHTML,""===t.className?e.removeAttribute("class"):e.className=t.className,this.onSwitch()},switchElementsAlt:function(e,t){if(e.innerHTML=t.innerHTML,t.hasAttributes())for(var i=t.attributes,n=0;n<i.length;n++)e.attributes.setNamedItem(i[n].cloneNode());this.onSwitch()},replaceNode:function(e,t){e.parentNode.replaceChild(t,e),this.onSwitch()},sideBySide:function(e,t,i,r){var s=Array.prototype.forEach,a=[],o=[],l=document.createDocumentFragment(),c="animationend webkitAnimationEnd MSAnimationEnd oanimationend",u=0,h=function(e){e.target===e.currentTarget&&--u<=0&&a&&(a.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),o.forEach((function(e){e.className=e.className.replace(e.getAttribute("data-pjax-classes"),""),e.removeAttribute("data-pjax-classes")})),o=null,a=null,this.onSwitch())}.bind(this);r=r||{},s.call(e.childNodes,(function(e){a.push(e),e.classList&&!e.classList.contains("js-Pjax-remove")&&(e.hasAttribute("data-pjax-classes")&&(e.className=e.className.replace(e.getAttribute("data-pjax-classes"),""),e.removeAttribute("data-pjax-classes")),e.classList.add("js-Pjax-remove"),r.callbacks&&r.callbacks.removeElement&&r.callbacks.removeElement(e),r.classNames&&(e.className+=" "+r.classNames.remove+" "+(i.backward?r.classNames.backward:r.classNames.forward)),u++,n(e,c,h,!0))})),s.call(t.childNodes,(function(e){if(e.classList){var t="";r.classNames&&(t=" js-Pjax-add "+r.classNames.add+" "+(i.backward?r.classNames.forward:r.classNames.backward)),r.callbacks&&r.callbacks.addElement&&r.callbacks.addElement(e),e.className+=t,e.setAttribute("data-pjax-classes",t),o.push(e),l.appendChild(e),u++,n(e,c,h,!0)}})),e.className=t.className,e.appendChild(l)}}},CTWV:function(e,t){Number.prototype.map=function(e,t,i,n){return(this-e)*(n-i)/(t-e)+i}},CUlp:function(e,t,i){var n,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(n=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],r=0;r<i.length;r++){var s=i[r];n&&n[s]&&(this.off(e,s),delete n[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?n.call(t,i,t,e):n)||(e.exports=r)},GRSy:function(e,t){e.exports=function(){this.options.debug&&console&&("function"==typeof console.log?console.log.apply(console,arguments):console.log&&console.log(arguments))}},Gx3p:function(e,t,i){e.exports=function(){"use strict";var e=document,t=e.createTextNode.bind(e);function i(e,t,i){e.style.setProperty(t,i)}function n(e,t){return e.appendChild(t)}function r(t,i,r,s){var a=e.createElement("span");return i&&(a.className=i),r&&(!s&&a.setAttribute("data-"+i,r),a.textContent=r),t&&n(t,a)||a}function s(e,t){return e.getAttribute("data-"+t)}function a(t,i){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(i||e).querySelectorAll(t)):[]}function o(e){for(var t=[];e--;)t[e]=[];return t}function l(e,t){e&&e.some(t)}function c(e){return function(t){return e[t]}}var u={};function h(e,t,i,n){return{by:e,depends:t,key:i,split:n}}function d(e){return function e(t,i,n){var r=n.indexOf(t);if(-1==r)n.unshift(t),l(u[t].depends,(function(i){e(i,t,n)}));else{var s=n.indexOf(i);n.splice(r,1),n.splice(s,0,t)}return n}(e,0,[]).map(c(u))}function p(e){u[e.by]=e}function f(e,i,s,o,c){e.normalize();var u=[],h=document.createDocumentFragment();o&&u.push(e.previousSibling);var d=[];return a(e.childNodes).some((function(e){if(!e.tagName||e.hasChildNodes()){if(e.childNodes&&e.childNodes.length)return d.push(e),void u.push.apply(u,f(e,i,s,o,c));var n=e.wholeText||"",a=n.trim();a.length&&(" "===n[0]&&d.push(t(" ")),l(a.split(s),(function(e,t){t&&c&&d.push(r(h,"whitespace"," ",c));var n=r(h,i,e);u.push(n),d.push(n)}))," "===n[n.length-1]&&d.push(t(" ")))}else d.push(e)})),l(d,(function(e){n(h,e)})),e.innerHTML="",n(e,h),u}var m=h("words",0,"word",(function(e){return f(e,"word",/\s+/,0,1)})),g=h("chars",["words"],"char",(function(e,t,i){var n=[];return l(i.words,(function(e,i){n.push.apply(n,f(e,"char","",t.whitespace&&i))})),n}));function v(e){var t=(e=e||{}).key;return a(e.target||"[data-splitting]").map((function(n){var r=n["ðŸŒ"];if(!e.force&&r)return r;r=n["ðŸŒ"]={el:n};var a=d(e.by||s(n,"splitting")||"chars"),o=function(e,t){for(var i in t)e[i]=t[i];return e}({},e);return l(a,(function(e){if(e.split){var s=e.by,a=(t?"-"+t:"")+e.key,c=e.split(n,o,r);a&&function(e,t,n){var r="--"+t,s=r+"-index";l(n,(function(e,t){Array.isArray(e)?l(e,(function(e){i(e,s,t)})):i(e,s,t)})),i(e,r+"-total",n.length)}(n,a,c),r[s]=c,n.classList.add(s)}})),n.classList.add("splitting"),r}))}function y(e,t,i){var n=a(t.matching||e.children,e),r={};return l(n,(function(e){var t=Math.round(e[i]);(r[t]||(r[t]=[])).push(e)})),Object.keys(r).map(Number).sort(x).map(c(r))}function x(e,t){return e-t}v.html=function(e){var t=(e=e||{}).target=r();return t.innerHTML=e.content,v(e),t.outerHTML},v.add=p;var b=h("lines",["words"],"line",(function(e,t,i){return y(e,{matching:i.words},"offsetTop")})),w=h("items",0,"item",(function(e,t){return a(t.matching||e.children,e)})),_=h("rows",0,"row",(function(e,t){return y(e,t,"offsetTop")})),M=h("cols",0,"col",(function(e,t){return y(e,t,"offsetLeft")})),S=h("grid",["rows","cols"]),E=h("layout",0,0,(function(e,t){var o=t.rows=+(t.rows||s(e,"rows")||1),l=t.columns=+(t.columns||s(e,"columns")||1);if(t.image=t.image||s(e,"image")||e.currentSrc||e.src,t.image){var c=a("img",e)[0];t.image=c&&(c.currentSrc||c.src)}t.image&&i(e,"background-image","url("+t.image+")");for(var u=o*l,h=[],d=r(0,"cell-grid");u--;){var p=r(d,"cell");r(p,"cell-inner"),h.push(p)}return n(e,d),h})),T=h("cellRows",["layout"],"row",(function(e,t,i){var n=t.rows,r=o(n);return l(i.layout,(function(e,t,i){r[Math.floor(t/(i.length/n))].push(e)})),r})),A=h("cellColumns",["layout"],"col",(function(e,t,i){var n=t.columns,r=o(n);return l(i.layout,(function(e,t){r[t%n].push(e)})),r})),C=h("cells",["cellRows","cellColumns"],"cell",(function(e,t,i){return i.layout}));return p(m),p(g),p(b),p(w),p(_),p(M),p(S),p(E),p(T),p(A),p(C),v}()},IzBT:function(e,t){e.exports=function(e,t,i){var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):e+r+t+"="+i}},JO1w:function(e,t,i){"use strict";i.r(t);i("nRv4");function n(e){return"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof Array?e:e instanceof HTMLCollection||e instanceof NodeList?Array.from(e):e instanceof HTMLElement?[e]:void console.error("O que Ã© isso? ",e)}function r(e,t,i){const{autoStop:r=!0,autoStart:s=!0,once:a=!1}=i||{},o={areas:n(e),clickInside:!1,cb:t,autoStop:r,once:a,in:e=>{o.clickInside=!0},out:e=>{o.clickInside||(o.cb(e),o.autoStop&&o.stop(),o.once&&o.destroy()),o.clickInside=!1},start(){setTimeout(()=>{this.areas.forEach(e=>e.addEventListener("click",this.in)),document.addEventListener("click",this.out)},0)},stop(){this.areas.forEach(e=>e.removeEventListener("click",this.in)),document.removeEventListener("click",this.out)},destroy(){this.stop(),this.areas=null,this.cb=null}};return s&&o.start(),o}function s(e){return!!a[e]}!function(){const e=document.body.classList,t=Array.from(document.querySelectorAll(".menu--wrapper, #btn-menu, [data-modal],.modal")),i={get isOpen(){return e.contains("menu-active")},open(){e.add("menu-active"),n.start()},close(){e.remove("menu-active"),e.add("menu-leave"),setTimeout(()=>{e.remove("menu-leave")},600)}},n=r(t,i.close,{autoStart:!1});document.getElementById("btn-menu").addEventListener("click",()=>{i.isOpen?i.close():i.open()});document.querySelectorAll("[data-menu-close]").forEach(e=>{e.addEventListener("click",()=>i.close())})}();const a={ease:"ease",linear:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"};let o=[],l="";const c=function(){const e=window.innerWidth;e<768&&(l="phone"),e>=768&&e<=1200&&(l="tablet"),e>1200&&(l="desktop")};c(),window.addEventListener("resize",c);const u=new IntersectionObserver(e=>{e.forEach(e=>{const t=o.filter(t=>t.trigger===e.target),i=e.isIntersecting,n=e.boundingClientRect.top<0;t.forEach(e=>{if(!e.el.isConnected||i&&!e.isConnected)e.isConnected=e.el.isConnected;else{if(i&&!e.animated||i&&e.loop[l]){const i=e.el.dataset.delay||0;function t(){e.animated=!0,e.el.classList.add("aos-animate"),e[l]&&(e.el.style.animation=e[l],e.el.classList.add(e[l].match(/^\S+/)[0]))}i>0?setTimeout(()=>{t()},i):t()}if(!i&&e.loop[l]&&!n){if(e[l]){e.el.style.animation="";const t=e[l].match(/^\S+/);t&&e.el.classList.remove(t[0])}e.el.classList.remove("aos-animate")}}})})}),h=new MutationObserver(()=>{d()}),d=function(){o=[],u.disconnect(),h.disconnect();document.querySelectorAll("[data-aos]").forEach(e=>{!function(e){const t={el:e,isConnected:e.isConnected,trigger:e,loop:{desktop:!1,tablet:!1,phone:!1},animated:!1,desktop:null,tablet:null,phone:null},i=function(e){const t=/.+?(?=:)/,i=/(?!.+?:)[^:\s]\S+|-|\d+/g,n=[],r=e.match(/([^,\s].[^,]*)/g);return r?(r.forEach(e=>{const r=e.match(t),s=e.match(i);n.push({key:r?r[0]:null,values:s})}),n):null}(e.dataset.aos);i&&i.forEach(i=>{if("trigger"===i.key){let n=e.closest(i.values[0]);return n||(n=document.querySelector(i.values[0])),void(t.trigger=n)}if("loop"===i.values[0])return void(i.key?(i.key.includes("d")&&(t.loop.desktop=!0),i.key.includes("t")&&(t.loop.tablet=!0),i.key.includes("p")&&(t.loop.phone=!0)):(t.loop.desktop=!0,t.loop.tablet=!0,t.loop.phone=!0));const n=function(e){let t="",i=".8s",n="ease-in-out",r="",o="";for(let l=0;l<e.length;l++){const c=e[l],u=Number.parseFloat(c);0!=l?1!=l?2!=l?3!=l?4==l&&(isNaN(c)?"infinite"===c&&(o=c):o=c):isNaN(u)||r?!isNaN(u)&&r?o=c:"-"==c?r="0s":s(c)?n=a[c]:"infinite"===c&&(r="0s",o=c):r=c:isNaN(u)?"-"==c?r="0s":s(c)?n=a[c]:"infinite"===c&&(r="0s",o=c):r=c:isNaN(u)?s(c)?n=a[c]:"infinite"===c&&(r="0s",o=c):i=c:t=c}let l=`${t} ${i} ${n}`;return r&&(l+=" "+r),o&&(l+=" "+o),l+=" both",l}(i.values);if(!i.key)return t.desktop=n,t.tablet=n,void(t.phone=n);i.key.includes("d")&&(t.desktop=n),i.key.includes("t")&&(t.tablet=n),i.key.includes("p")&&(t.phone=n)});u.observe(t.trigger),h.observe(t.el,{attributeFilter:["data-aos"]}),o.push(t)}(e)})};var p=i("VC9s"),f=i.n(p);let m="",g="";var v=new class{constructor(){this.currentPageId=document.querySelector(".wrapper").id}get currentPageId(){return m}set currentPageId(e){m=e.substring(3),document.body.dataset.pg=e,this.nextPageId=""}get nextPageId(){return g}set nextPageId(e){g=e.substring(3)}get token(){return document.querySelector('meta[name="csrf-token"]').content}};f.a.prototype.getElements=function(){let e=Array.from(document.querySelectorAll("a:not(.no-pjax)"));return e=e.filter(e=>e.href.includes(location.hostname)),Array.from(document.querySelectorAll("[data-href]:not(btn-modal-open)")).forEach(e=>e.onclick=()=>{y.loadUrl(e.dataset.href)}),e.forEach(e=>{e.addEventListener("click",(function(){!function(){document.querySelectorAll("modal-group.active","modal-item.active").forEach(e=>{e.removeActive(),document.dispatchEvent(new CustomEvent("modal:close")),document.removeEventListener("keydown",this),delete document.body.dataset.modalState,delete document.body.dataset.modal,delete document.body.dataset.modalItem})}(),document.body.dataset.pgPrev=document.body.dataset.pg,e.dataset.pgActive&&(document.body.dataset.pgNext=e.dataset.pgActive)}))}),e};const y=new f.a({elements:"a[href]",cacheBust:!1,debug:!1,selectors:["title","#scripts",".wrapper"],maxCacheLength:20,timeout:0,scrollTo:0,switches:{".wrapper":function(e,t,i){v.nextPageId=t.id;let n=window.innerWidth<1025?600:300;setTimeout(()=>{e.outerHTML=t.outerHTML,v.currentPageId=t.id,this.onSwitch()},n)}}});const x={isPhone:!1,isTablet:!1,isMobile:!1,isDesktop:!1,isPhonePlus:!1,size:"",width:0,height:0,tresholdPhone:768,tresholdTablet:1025},b=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),w=function(){let e=window.innerWidth,t=window.innerHeight;x.isPhone=e<x.tresholdPhone,x.isTablet=e>=x.tresholdPhone&&e<=x.tresholdTablet,x.isMobile=e<=x.tresholdTablet||1==b,x.isDesktop=e>=x.tresholdTablet,x.phonePlus=e>=x.tresholdPhone,x.isPhone&&(x.size="phone"),x.isTablet&&(x.size="tablet"),x.isDesktop&&(x.size="desktop"),x.width=e,x.height=t};window.addEventListener("resize",w),w();var _=x;i("QDl9");class M{constructor({pageName:e,main:t,init:i,destroy:n}){function r(){return!0}this.pageName=e,this.init=i||r,this.main=t,this.destroy=n||r,this.transitionDelayDesktop=600,this.transitionDelayMobile=300}}function S(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function E(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(i){void 0===e[i]?e[i]=t[i]:S(t[i])&&S(e[i])&&Object.keys(t[i]).length>0&&E(e[i],t[i])}))}var T={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function A(){var e="undefined"!=typeof document?document:{};return E(e,T),e}var C={document:T,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function L(){var e="undefined"!=typeof window?window:{};return E(e,C),e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function I(e,t,i){return(I=k()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&R(r,i.prototype),r}).apply(null,arguments)}function O(e){var t="function"==typeof Map?new Map:void 0;return(O=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,P(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),R(n,e)})(e)}var D=function(e){var t,i;function n(t){var i;return function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i=e.call.apply(e,[this].concat(t))||this)),i}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n}(O(Array));function z(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,z(e)):t.push(e)})),t}function N(e,t){return Array.prototype.filter.call(e,t)}function B(e,t){var i=L(),n=A(),r=[];if(!t&&e instanceof D)return e;if(!e)return new D(r);if("string"==typeof e){var s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var a="div";0===s.indexOf("<li")&&(a="ul"),0===s.indexOf("<tr")&&(a="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(a="tr"),0===s.indexOf("<tbody")&&(a="table"),0===s.indexOf("<option")&&(a="select");var o=n.createElement(a);o.innerHTML=s;for(var l=0;l<o.childNodes.length;l+=1)r.push(o.childNodes[l])}else r=function(e,t){if("string"!=typeof e)return[e];for(var i=[],n=t.querySelectorAll(e),r=0;r<n.length;r+=1)i.push(n[r]);return i}(e.trim(),t||n)}else if(e.nodeType||e===i||e===n)r.push(e);else if(Array.isArray(e)){if(e instanceof D)return e;r=e}return new D(function(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}(r))}B.fn=D.prototype;var F="resize scroll".split(" ");function H(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];if(void 0===i[0]){for(var r=0;r<this.length;r+=1)F.indexOf(e)<0&&(e in this[r]?this[r][e]():B(this[r]).trigger(e));return this}return this.on.apply(this,[e].concat(i))}}H("click"),H("blur"),H("focus"),H("focusin"),H("focusout"),H("keyup"),H("keydown"),H("keypress"),H("submit"),H("change"),H("mousedown"),H("mousemove"),H("mouseup"),H("mouseenter"),H("mouseleave"),H("mouseout"),H("mouseover"),H("touchstart"),H("touchend"),H("touchmove"),H("resize"),H("scroll");var U={addClass:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=z(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,n)})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=z(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,n)})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=z(t.map((function(e){return e.split(" ")})));return N(this,(function(e){return n.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=z(t.map((function(e){return e.split(" ")})));this.forEach((function(e){n.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i+=1)if(2===arguments.length)this[i].setAttribute(e,t);else for(var n in e)this[i][n]=e[n],this[i].setAttribute(n,e[n]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0],r=t[1],s=t[2],a=t[3];function o(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),B(t).is(r))s.apply(t,i);else for(var n=B(t).parents(),a=0;a<n.length;a+=1)B(n[a]).is(r)&&s.apply(n[a],i)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),s.apply(this,t)}"function"==typeof t[1]&&(n=t[0],s=t[1],a=t[2],r=void 0),a||(a=!1);for(var c,u=n.split(" "),h=0;h<this.length;h+=1){var d=this[h];if(r)for(c=0;c<u.length;c+=1){var p=u[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[p]||(d.dom7LiveListeners[p]=[]),d.dom7LiveListeners[p].push({listener:s,proxyListener:o}),d.addEventListener(p,o,a)}else for(c=0;c<u.length;c+=1){var f=u[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:s,proxyListener:l}),d.addEventListener(f,l,a)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0],r=t[1],s=t[2],a=t[3];"function"==typeof t[1]&&(n=t[0],s=t[1],a=t[2],r=void 0),a||(a=!1);for(var o=n.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],u=0;u<this.length;u+=1){var h=this[u],d=void 0;if(!r&&h.dom7Listeners?d=h.dom7Listeners[c]:r&&h.dom7LiveListeners&&(d=h.dom7LiveListeners[c]),d&&d.length)for(var p=d.length-1;p>=0;p-=1){var f=d[p];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(h.removeEventListener(c,f.proxyListener,a),d.splice(p,1)):s||(h.removeEventListener(c,f.proxyListener,a),d.splice(p,1))}}return this},trigger:function(){for(var e=L(),t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(var r=i[0].split(" "),s=i[1],a=0;a<r.length;a+=1)for(var o=r[a],l=0;l<this.length;l+=1){var c=this[l];if(e.CustomEvent){var u=new e.CustomEvent(o,{detail:s,bubbles:!0,cancelable:!0});c.dom7EventData=i.filter((function(e,t){return t>0})),c.dispatchEvent(u),c.dom7EventData=[],delete c.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function i(n){n.target===this&&(e.call(this,n),t.off("transitionend",i))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=L();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=L(),t=A(),i=this[0],n=i.getBoundingClientRect(),r=t.body,s=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,o=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+o-s,left:n.left+l-a}}return null},css:function(e,t){var i,n=L();if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i+=1)for(var r in e)this[i].style[r]=e[r];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,i){e.apply(t,[t,i])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,i,n=L(),r=A(),s=this[0];if(!s||void 0===e)return!1;if("string"==typeof e){if(s.matches)return s.matches(e);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(s.msMatchesSelector)return s.msMatchesSelector(e);for(t=B(e),i=0;i<t.length;i+=1)if(t[i]===s)return!0;return!1}if(e===r)return s===r;if(e===n)return s===n;if(e.nodeType||e instanceof D){for(t=e.nodeType?[e]:e,i=0;i<t.length;i+=1)if(t[i]===s)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return B([]);if(e<0){var i=t+e;return B(i<0?[]:[this[i]])}return B([this[e]])},append:function(){for(var e,t=A(),i=0;i<arguments.length;i+=1){e=i<0||arguments.length<=i?void 0:arguments[i];for(var n=0;n<this.length;n+=1)if("string"==typeof e){var r=t.createElement("div");for(r.innerHTML=e;r.firstChild;)this[n].appendChild(r.firstChild)}else if(e instanceof D)for(var s=0;s<e.length;s+=1)this[n].appendChild(e[s]);else this[n].appendChild(e)}return this},prepend:function(e){var t,i,n=A();for(t=0;t<this.length;t+=1)if("string"==typeof e){var r=n.createElement("div");for(r.innerHTML=e,i=r.childNodes.length-1;i>=0;i-=1)this[t].insertBefore(r.childNodes[i],this[t].childNodes[0])}else if(e instanceof D)for(i=0;i<e.length;i+=1)this[t].insertBefore(e[i],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&B(this[0].nextElementSibling).is(e)?B([this[0].nextElementSibling]):B([]):this[0].nextElementSibling?B([this[0].nextElementSibling]):B([]):B([])},nextAll:function(e){var t=[],i=this[0];if(!i)return B([]);for(;i.nextElementSibling;){var n=i.nextElementSibling;e?B(n).is(e)&&t.push(n):t.push(n),i=n}return B(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&B(t.previousElementSibling).is(e)?B([t.previousElementSibling]):B([]):t.previousElementSibling?B([t.previousElementSibling]):B([])}return B([])},prevAll:function(e){var t=[],i=this[0];if(!i)return B([]);for(;i.previousElementSibling;){var n=i.previousElementSibling;e?B(n).is(e)&&t.push(n):t.push(n),i=n}return B(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?B(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return B(t)},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].parentNode;n;)e?B(n).is(e)&&t.push(n):t.push(n),n=n.parentNode;return B(t)},closest:function(e){var t=this;return void 0===e?B([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].querySelectorAll(e),r=0;r<n.length;r+=1)t.push(n[r]);return B(t)},children:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].children,r=0;r<n.length;r+=1)e&&!B(n[r]).is(e)||t.push(n[r]);return B(t)},filter:function(e){return B(N(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(U).forEach((function(e){B.fn[e]=U[e]}));var V,W,G,j=B;function q(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function X(){return Date.now()}function Y(e,t){void 0===t&&(t="x");var i,n,r,s=L(),a=function(e){var t,i=L();return i.getComputedStyle&&(t=i.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return s.WebKitCSSMatrix?((n=a.transform||a.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new s.WebKitCSSMatrix("none"===n?"":n)):i=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(n=s.WebKitCSSMatrix?r.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=s.WebKitCSSMatrix?r.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0}function $(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function J(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],i=1;i<arguments.length;i+=1){var n=i<0||arguments.length<=i?void 0:arguments[i];if(null!=n)for(var r=Object.keys(Object(n)).filter((function(e){return t.indexOf(e)<0})),s=0,a=r.length;s<a;s+=1){var o=r[s],l=Object.getOwnPropertyDescriptor(n,o);void 0!==l&&l.enumerable&&($(e[o])&&$(n[o])?n[o].__swiper__?e[o]=n[o]:J(e[o],n[o]):!$(e[o])&&$(n[o])?(e[o]={},n[o].__swiper__?e[o]=n[o]:J(e[o],n[o])):e[o]=n[o])}}return e}function Z(e,t){Object.keys(t).forEach((function(i){$(t[i])&&Object.keys(t[i]).forEach((function(n){"function"==typeof t[i][n]&&(t[i][n]=t[i][n].bind(e))})),e[i]=t[i]}))}function Q(){return V||(V=function(){var e=L(),t=A();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,i)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),V}function K(e){return void 0===e&&(e={}),W||(W=function(e){var t=(void 0===e?{}:e).userAgent,i=Q(),n=L(),r=n.navigator.platform,s=t||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,l=n.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/),u=s.match(/(iPad).*OS\s([\d_]+)/),h=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r,f="MacIntel"===r;return!u&&f&&i.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(o+"x"+l)>=0&&((u=s.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(u||d||h)&&(a.os="ios",a.ios=!0),a}(e)),W}function ee(){return G||(G=function(){var e,t=L();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),G}var te={name:"resize",create:function(){var e=this;J(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var i=e.width,n=e.height,r=i,s=n;t.forEach((function(t){var i=t.contentBoxSize,n=t.contentRect,a=t.target;a&&a!==e.el||(r=n?n.width:(i[0]||i).inlineSize,s=n?n.height:(i[0]||i).blockSize)})),r===i&&s===n||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=L();e.params.resizeObserver&&void 0!==L().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=L();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var ne={attach:function(e,t){void 0===t&&(t={});var i=L(),n=this,r=new(i.MutationObserver||i.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){n.emit("observerUpdate",e[0])};i.requestAnimationFrame?i.requestAnimationFrame(t):i.setTimeout(t,0)}else n.emit("observerUpdate",e[0])}));r.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),n.observer.observers.push(r)},init:function(){if(this.support.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},re={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){Z(this,{observer:ie({},ne,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}};function se(e){var t=A(),i=L(),n=this.touchEventsData,r=this.params,s=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var a=e;a.originalEvent&&(a=a.originalEvent);var o=j(a.target);if("wrapper"!==r.touchEventsTarget||o.closest(this.wrapperEl).length)if(n.isTouchEvent="touchstart"===a.type,n.isTouchEvent||!("which"in a)||3!==a.which)if(!(!n.isTouchEvent&&"button"in a&&a.button>0))if(!n.isTouched||!n.isMoved)if(!!r.noSwipingClass&&""!==r.noSwipingClass&&a.target&&a.target.shadowRoot&&e.path&&e.path[0]&&(o=j(e.path[0])),r.noSwiping&&o.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||o.closest(r.swipeHandler)[0]){s.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,s.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;var l=s.currentX,c=s.currentY,u=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,h=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(u&&(l<=h||l>=i.innerWidth-h)){if("prevent"!==u)return;e.preventDefault()}if(J(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=l,s.startY=c,n.touchStartTime=X(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==a.type){var d=!0;o.is(n.formElements)&&(d=!1),t.activeElement&&j(t.activeElement).is(n.formElements)&&t.activeElement!==o[0]&&t.activeElement.blur();var p=d&&this.allowTouchMove&&r.touchStartPreventDefault;!r.touchStartForcePreventDefault&&!p||o[0].isContentEditable||a.preventDefault()}this.emit("touchStart",a)}}}function ae(e){var t=A(),i=this.touchEventsData,n=this.params,r=this.touches,s=this.rtlTranslate,a=e;if(a.originalEvent&&(a=a.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===a.type){var o="touchmove"===a.type&&a.targetTouches&&(a.targetTouches[0]||a.changedTouches[0]),l="touchmove"===a.type?o.pageX:a.pageX,c="touchmove"===a.type?o.pageY:a.pageY;if(a.preventedByNestedSwiper)return r.startX=l,void(r.startY=c);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(J(r,{startX:l,startY:c,currentX:l,currentY:c}),i.touchStartTime=X()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(this.isVertical()){if(c<r.startY&&this.translate<=this.maxTranslate()||c>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(l<r.startX&&this.translate<=this.maxTranslate()||l>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&a.target===t.activeElement&&j(a.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",a),!(a.targetTouches&&a.targetTouches.length>1)){r.currentX=l,r.currentY=c;var u=r.currentX-r.startX,h=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(h,2))<this.params.threshold)){var d;if(void 0===i.isScrolling)this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:u*u+h*h>=25&&(d=180*Math.atan2(Math.abs(h),Math.abs(u))/Math.PI,i.isScrolling=this.isHorizontal()?d>n.touchAngle:90-d>n.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",a),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,!n.cssMode&&a.cancelable&&a.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&a.stopPropagation(),i.isMoved||(n.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",a)),this.emit("sliderMove",a),i.isMoved=!0;var p=this.isHorizontal()?u:h;r.diff=p,p*=n.touchRatio,s&&(p=-p),this.swipeDirection=p>0?"prev":"next",i.currentTranslate=p+i.startTranslate;var f=!0,m=n.resistanceRatio;if(n.touchReleaseOnEdges&&(m=0),p>0&&i.currentTranslate>this.minTranslate()?(f=!1,n.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+p,m))):p<0&&i.currentTranslate<this.maxTranslate()&&(f=!1,n.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-p,m))),f&&(a.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),this.allowSlidePrev||this.allowSlideNext||(i.currentTranslate=i.startTranslate),n.threshold>0){if(!(Math.abs(p)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:X()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",a)}function oe(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches,s=t.rtlTranslate,a=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,c=e;if(c.originalEvent&&(c=c.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",c),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,h=X(),d=h-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap click",c),d<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",c)),i.lastClickTime=X(),q((function(){t.destroyed||(t.allowClick=!0)})),!i.isTouched||!i.isMoved||!t.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,u=n.followFinger?s?t.translate:-t.translate:-i.currentTranslate,!n.cssMode)if(n.freeMode){if(u<-t.minTranslate())return void t.slideTo(t.activeIndex);if(u>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(i.velocities.length>1){var p=i.velocities.pop(),f=i.velocities.pop(),m=p.position-f.position,g=p.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(g>150||X()-p.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;var v=1e3*n.freeModeMomentumRatio,y=t.velocity*v,x=t.translate+y;s&&(x=-x);var b,w,_=!1,M=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;if(x<t.maxTranslate())n.freeModeMomentumBounce?(x+t.maxTranslate()<-M&&(x=t.maxTranslate()-M),b=t.maxTranslate(),_=!0,i.allowMomentumBounce=!0):x=t.maxTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(x>t.minTranslate())n.freeModeMomentumBounce?(x-t.minTranslate()>M&&(x=t.minTranslate()+M),b=t.minTranslate(),_=!0,i.allowMomentumBounce=!0):x=t.minTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(n.freeModeSticky){for(var S,E=0;E<l.length;E+=1)if(l[E]>-x){S=E;break}x=-(x=Math.abs(l[S]-x)<Math.abs(l[S-1]-x)||"next"===t.swipeDirection?l[S]:l[S-1])}if(w&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=s?Math.abs((-x-t.translate)/t.velocity):Math.abs((x-t.translate)/t.velocity),n.freeModeSticky){var T=Math.abs((s?-x:x)-t.translate),A=t.slidesSizesGrid[t.activeIndex];v=T<A?n.speed:T<2*A?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&_?(t.updateProgress(b),t.setTransition(v),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),setTimeout((function(){t.setTranslate(b),a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(x),t.setTransition(v),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(x)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(n.freeModeSticky)return void t.slideToClosest();n.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!n.freeModeMomentum||d>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var C=0,L=t.slidesSizesGrid[0],P=0;P<o.length;P+=P<n.slidesPerGroupSkip?1:n.slidesPerGroup){var R=P<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==o[P+R]?u>=o[P]&&u<o[P+R]&&(C=P,L=o[P+R]-o[P]):u>=o[P]&&(C=P,L=o[o.length-1]-o[o.length-2])}var k=(u-o[C])/L,I=C<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(d>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(k>=n.longSwipesRatio?t.slideTo(C+I):t.slideTo(C)),"prev"===t.swipeDirection&&(k>1-n.longSwipesRatio?t.slideTo(C+I):t.slideTo(C))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(c.target===t.navigation.nextEl||c.target===t.navigation.prevEl)?c.target===t.navigation.nextEl?t.slideTo(C+I):t.slideTo(C):("next"===t.swipeDirection&&t.slideTo(C+I),"prev"===t.swipeDirection&&t.slideTo(C))}}}function le(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,n=this.allowSlidePrev,r=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=n,this.allowSlideNext=i,this.params.watchOverflow&&r!==this.snapGrid&&this.checkOverflow()}}function ce(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function ue(){var e=this.wrapperEl,t=this.rtlTranslate;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=t?e.scrollWidth-e.offsetWidth-e.scrollLeft:-e.scrollLeft:this.translate=-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var i=this.maxTranslate()-this.minTranslate();(0===i?0:(this.translate-this.minTranslate())/i)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}var he=!1;function de(){}var pe={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function fe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var n=t.modules[i];n.params&&J(e,n.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(i){var n=t.modules[i],r=e[i]||{};n.on&&t.on&&Object.keys(n.on).forEach((function(e){t.on(e,n.on[e])})),n.create&&n.create.bind(t)(r)}))}},eventsEmitter:{on:function(e,t,i){var n=this;if("function"!=typeof t)return n;var r=i?"unshift":"push";return e.split(" ").forEach((function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)})),n},once:function(e,t,i){var n=this;if("function"!=typeof t)return n;function r(){n.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t.apply(n,s)}return r.__emitterProxy=t,n.on(e,r,i)},onAny:function(e,t){if("function"!=typeof e)return this;var i=t?"unshift":"push";return this.eventsAnyListeners.indexOf(e)<0&&this.eventsAnyListeners[i](e),this},offAny:function(e){if(!this.eventsAnyListeners)return this;var t=this.eventsAnyListeners.indexOf(e);return t>=0&&this.eventsAnyListeners.splice(t,1),this},off:function(e,t){var i=this;return i.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].forEach((function(n,r){(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&i.eventsListeners[e].splice(r,1)}))})),i):i},emit:function(){var e,t,i,n=this;if(!n.eventsListeners)return n;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];"string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i);var o=Array.isArray(e)?e:e.split(" ");return o.forEach((function(e){n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach((function(n){n.apply(i,[e].concat(t))})),n.eventsListeners&&n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(e){e.apply(i,t)}))})),n}},update:{updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width&&null!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height&&null!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),t=t-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),J(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this,t=function(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]},i=function(e,i){return parseFloat(e.getPropertyValue(t(i))||0)},n=e.params,r=e.$wrapperEl,s=e.size,a=e.rtlTranslate,o=e.wrongRTL,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=r.children("."+e.params.slideClass),h=l?e.virtual.slides.length:u.length,d=[],p=[],f=[],m=n.slidesOffsetBefore;"function"==typeof m&&(m=n.slidesOffsetBefore.call(e));var g=n.slidesOffsetAfter;"function"==typeof g&&(g=n.slidesOffsetAfter.call(e));var v=e.snapGrid.length,y=e.slidesGrid.length,x=n.spaceBetween,b=-m,w=0,_=0;if(void 0!==s){var M,S;"string"==typeof x&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*s),e.virtualSize=-x,a?u.css({marginLeft:"",marginTop:""}):u.css({marginRight:"",marginBottom:""}),n.slidesPerColumn>1&&(M=Math.floor(h/n.slidesPerColumn)===h/e.params.slidesPerColumn?h:Math.ceil(h/n.slidesPerColumn)*n.slidesPerColumn,"auto"!==n.slidesPerView&&"row"===n.slidesPerColumnFill&&(M=Math.max(M,n.slidesPerView*n.slidesPerColumn)));for(var E,T,A,C=n.slidesPerColumn,L=M/C,P=Math.floor(h/n.slidesPerColumn),R=0;R<h;R+=1){S=0;var k=u.eq(R);if(n.slidesPerColumn>1){var I=void 0,O=void 0,D=void 0;if("row"===n.slidesPerColumnFill&&n.slidesPerGroup>1){var z=Math.floor(R/(n.slidesPerGroup*n.slidesPerColumn)),N=R-n.slidesPerColumn*n.slidesPerGroup*z,B=0===z?n.slidesPerGroup:Math.min(Math.ceil((h-z*C*n.slidesPerGroup)/C),n.slidesPerGroup);I=(O=N-(D=Math.floor(N/B))*B+z*n.slidesPerGroup)+D*M/C,k.css({"-webkit-box-ordinal-group":I,"-moz-box-ordinal-group":I,"-ms-flex-order":I,"-webkit-order":I,order:I})}else"column"===n.slidesPerColumnFill?(D=R-(O=Math.floor(R/C))*C,(O>P||O===P&&D===C-1)&&(D+=1)>=C&&(D=0,O+=1)):O=R-(D=Math.floor(R/L))*L;k.css(t("margin-top"),0!==D&&n.spaceBetween&&n.spaceBetween+"px")}if("none"!==k.css("display")){if("auto"===n.slidesPerView){var F=getComputedStyle(k[0]),H=k[0].style.transform,U=k[0].style.webkitTransform;if(H&&(k[0].style.transform="none"),U&&(k[0].style.webkitTransform="none"),n.roundLengths)S=e.isHorizontal()?k.outerWidth(!0):k.outerHeight(!0);else{var V=i(F,"width"),W=i(F,"padding-left"),G=i(F,"padding-right"),j=i(F,"margin-left"),q=i(F,"margin-right"),X=F.getPropertyValue("box-sizing");if(X&&"border-box"===X)S=V+j+q;else{var Y=k[0],$=Y.clientWidth;S=V+W+G+j+q+(Y.offsetWidth-$)}}H&&(k[0].style.transform=H),U&&(k[0].style.webkitTransform=U),n.roundLengths&&(S=Math.floor(S))}else S=(s-(n.slidesPerView-1)*x)/n.slidesPerView,n.roundLengths&&(S=Math.floor(S)),u[R]&&(u[R].style[t("width")]=S+"px");u[R]&&(u[R].swiperSlideSize=S),f.push(S),n.centeredSlides?(b=b+S/2+w/2+x,0===w&&0!==R&&(b=b-s/2-x),0===R&&(b=b-s/2-x),Math.abs(b)<.001&&(b=0),n.roundLengths&&(b=Math.floor(b)),_%n.slidesPerGroup==0&&d.push(b),p.push(b)):(n.roundLengths&&(b=Math.floor(b)),(_-Math.min(e.params.slidesPerGroupSkip,_))%e.params.slidesPerGroup==0&&d.push(b),p.push(b),b=b+S+x),e.virtualSize+=S+x,w=S,_+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,a&&o&&("slide"===n.effect||"coverflow"===n.effect)&&r.css({width:e.virtualSize+n.spaceBetween+"px"}),n.setWrapperSize)r.css(((T={})[t("width")]=e.virtualSize+n.spaceBetween+"px",T));if(n.slidesPerColumn>1)if(e.virtualSize=(S+n.spaceBetween)*M,e.virtualSize=Math.ceil(e.virtualSize/n.slidesPerColumn)-n.spaceBetween,r.css(((A={})[t("width")]=e.virtualSize+n.spaceBetween+"px",A)),n.centeredSlides){E=[];for(var Z=0;Z<d.length;Z+=1){var Q=d[Z];n.roundLengths&&(Q=Math.floor(Q)),d[Z]<e.virtualSize+d[0]&&E.push(Q)}d=E}if(!n.centeredSlides){E=[];for(var K=0;K<d.length;K+=1){var ee=d[K];n.roundLengths&&(ee=Math.floor(ee)),d[K]<=e.virtualSize-s&&E.push(ee)}d=E,Math.floor(e.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-s)}if(0===d.length&&(d=[0]),0!==n.spaceBetween){var te,ie=e.isHorizontal()&&a?"marginLeft":t("marginRight");u.filter((function(e,t){return!n.cssMode||t!==u.length-1})).css(((te={})[ie]=x+"px",te))}if(n.centeredSlides&&n.centeredSlidesBounds){var ne=0;f.forEach((function(e){ne+=e+(n.spaceBetween?n.spaceBetween:0)}));var re=(ne-=n.spaceBetween)-s;d=d.map((function(e){return e<0?-m:e>re?re+g:e}))}if(n.centerInsufficientSlides){var se=0;if(f.forEach((function(e){se+=e+(n.spaceBetween?n.spaceBetween:0)})),(se-=n.spaceBetween)<s){var ae=(s-se)/2;d.forEach((function(e,t){d[t]=e-ae})),p.forEach((function(e,t){p[t]=e+ae}))}}J(e,{slides:u,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),h!==c&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),(n.watchSlidesProgress||n.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=[],n=0;if("number"==typeof e?this.setTransition(e):!0===e&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)if(this.params.centeredSlides)this.visibleSlides.each((function(e){i.push(e)}));else for(t=0;t<Math.ceil(this.params.slidesPerView);t+=1){var r=this.activeIndex+t;if(r>this.slides.length)break;i.push(this.slides.eq(r)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var s=i[t].offsetHeight;n=s>n?s:n}n&&this.$wrapperEl.css("height",n+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,i=this.slides,n=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-e;n&&(r=e),i.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var s=0;s<i.length;s+=1){var a=i[s],o=(r+(t.centeredSlides?this.minTranslate():0)-a.swiperSlideOffset)/(a.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility||t.centeredSlides&&t.autoHeight){var l=-(r-a.swiperSlideOffset),c=l+this.slidesSizesGrid[s];(l>=0&&l<this.size-1||c>1&&c<=this.size||l<=0&&c>=this.size)&&(this.visibleSlides.push(a),this.visibleSlidesIndexes.push(s),i.eq(s).addClass(t.slideVisibleClass))}a.progress=n?-o:o}this.visibleSlides=j(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var i=this.params,n=this.maxTranslate()-this.minTranslate(),r=this.progress,s=this.isBeginning,a=this.isEnd,o=s,l=a;0===n?(r=0,s=!0,a=!0):(s=(r=(e-this.minTranslate())/n)<=0,a=r>=1),J(this,{progress:r,isBeginning:s,isEnd:a}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&this.updateSlidesProgress(e),s&&!o&&this.emit("reachBeginning toEdge"),a&&!l&&this.emit("reachEnd toEdge"),(o&&!s||l&&!a)&&this.emit("fromEdge"),this.emit("progress",r)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,n=this.$wrapperEl,r=this.activeIndex,s=this.realIndex,a=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=a?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):t.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass)),this.emitSlidesClasses()},updateActiveIndex:function(e){var t,i=this.rtlTranslate?this.translate:-this.translate,n=this.slidesGrid,r=this.snapGrid,s=this.params,a=this.activeIndex,o=this.realIndex,l=this.snapIndex,c=e;if(void 0===c){for(var u=0;u<n.length;u+=1)void 0!==n[u+1]?i>=n[u]&&i<n[u+1]-(n[u+1]-n[u])/2?c=u:i>=n[u]&&i<n[u+1]&&(c=u+1):i>=n[u]&&(c=u);s.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(r.indexOf(i)>=0)t=r.indexOf(i);else{var h=Math.min(s.slidesPerGroupSkip,c);t=h+Math.floor((c-h)/s.slidesPerGroup)}if(t>=r.length&&(t=r.length-1),c!==a){var d=parseInt(this.slides.eq(c).attr("data-swiper-slide-index")||c,10);J(this,{snapIndex:t,realIndex:d,previousIndex:a,activeIndex:c}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),o!==d&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else t!==l&&(this.snapIndex=t,this.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,i=this.params,n=j(e.target).closest("."+i.slideClass)[0],r=!1;if(n)for(var s=0;s<this.slides.length;s+=1)if(this.slides[s]===n){r=!0,t=s;break}if(!n||!r)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=n,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(j(n).attr("data-swiper-slide-index"),10):this.clickedIndex=t,i.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,n=this.translate,r=this.$wrapperEl;if(t.virtualTranslate)return i?-n:n;if(t.cssMode)return n;var s=Y(r[0],e);return i&&(s=-s),s||0},setTranslate:function(e,t){var i=this.rtlTranslate,n=this.params,r=this.$wrapperEl,s=this.wrapperEl,a=this.progress,o=0,l=0;this.isHorizontal()?o=i?-e:e:l=e,n.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),n.cssMode?s[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-o:-l:n.virtualTranslate||r.transform("translate3d("+o+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?o:l;var c=this.maxTranslate()-this.minTranslate();(0===c?0:(e-this.minTranslate())/c)!==a&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===n&&(n=!0);var s=this,a=s.params,o=s.wrapperEl;if(s.animating&&a.preventInteractionOnTransition)return!1;var l,c=s.minTranslate(),u=s.maxTranslate();if(l=n&&e>c?c:n&&e<u?u:e,s.updateProgress(l),a.cssMode){var h,d=s.isHorizontal();if(0===t)o[d?"scrollLeft":"scrollTop"]=-l;else if(o.scrollTo)o.scrollTo(((h={})[d?"left":"top"]=-l,h.behavior="smooth",h));else o[d?"scrollLeft":"scrollTop"]=-l;return!0}return 0===t?(s.setTransition(0),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(l),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,i&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.params,r=this.previousIndex;if(!n.cssMode){n.autoHeight&&this.updateAutoHeight();var s=t;if(s||(s=i>r?"next":i<r?"prev":"reset"),this.emit("transitionStart"),e&&i!==r){if("reset"===s)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===s?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.previousIndex,r=this.params;if(this.animating=!1,!r.cssMode){this.setTransition(0);var s=t;if(s||(s=i>n?"next":i<n?"prev":"reset"),this.emit("transitionEnd"),e&&i!==n){if("reset"===s)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===s?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,i,n){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var r=parseInt(e,10);if(!isFinite(r))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=r}var s=this,a=e;a<0&&(a=0);var o=s.params,l=s.snapGrid,c=s.slidesGrid,u=s.previousIndex,h=s.activeIndex,d=s.rtlTranslate,p=s.wrapperEl;if(s.animating&&o.preventInteractionOnTransition)return!1;var f=Math.min(s.params.slidesPerGroupSkip,a),m=f+Math.floor((a-f)/s.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(h||o.initialSlide||0)===(u||0)&&i&&s.emit("beforeSlideChangeStart");var g,v=-l[m];if(s.updateProgress(v),o.normalizeSlideIndex)for(var y=0;y<c.length;y+=1){var x=-Math.floor(100*v),b=Math.floor(100*c[y]),w=Math.floor(100*c[y+1]);void 0!==c[y+1]?x>=b&&x<w-(w-b)/2?a=y:x>=b&&x<w&&(a=y+1):x>=b&&(a=y)}if(s.initialized&&a!==h){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(h||0)!==a)return!1}if(g=a>h?"next":a<h?"prev":"reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(v),"reset"!==g&&(s.transitionStart(i,g),s.transitionEnd(i,g)),!1;if(o.cssMode){var _,M=s.isHorizontal(),S=-v;if(d&&(S=p.scrollWidth-p.offsetWidth-S),0===t)p[M?"scrollLeft":"scrollTop"]=S;else if(p.scrollTo)p.scrollTo(((_={})[M?"left":"top"]=S,_.behavior="smooth",_));else p[M?"scrollLeft":"scrollTop"]=S;return!0}return 0===t?(s.setTransition(0),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,n),s.transitionStart(i,g),s.transitionEnd(i,g)):(s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,n),s.transitionStart(i,g),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(i,g))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=e;return this.params.loop&&(r+=this.loopedSlides),this.slideTo(r,t,i,n)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this.params,r=this.animating,s=this.activeIndex<n.slidesPerGroupSkip?1:n.slidesPerGroup;if(n.loop){if(r&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+s,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this.params,r=this.animating,s=this.snapGrid,a=this.slidesGrid,o=this.rtlTranslate;if(n.loop){if(r&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,u=l(o?this.translate:-this.translate),h=s.map((function(e){return l(e)})),d=(s[h.indexOf(u)],s[h.indexOf(u)-1]);return void 0===d&&n.cssMode&&s.forEach((function(e){!d&&u>=e&&(d=e)})),void 0!==d&&(c=a.indexOf(d))<0&&(c=this.activeIndex-1),this.slideTo(c,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===n&&(n=.5);var r=this.activeIndex,s=Math.min(this.params.slidesPerGroupSkip,r),a=s+Math.floor((r-s)/this.params.slidesPerGroup),o=this.rtlTranslate?this.translate:-this.translate;if(o>=this.snapGrid[a]){var l=this.snapGrid[a];o-l>(this.snapGrid[a+1]-l)*n&&(r+=this.params.slidesPerGroup)}else{var c=this.snapGrid[a-1];o-c<=(this.snapGrid[a]-c)*n&&(r-=this.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,this.slidesGrid.length-1),this.slideTo(r,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,n=t.$wrapperEl,r="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,s=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(j(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?s<t.loopedSlides-r/2||s>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),s=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),q((function(){t.slideTo(s)}))):t.slideTo(s):s>t.slides.length-r?(t.loopFix(),s=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),q((function(){t.slideTo(s)}))):t.slideTo(s)}else t.slideTo(s)}},loop:{loopCreate:function(){var e=this,t=A(),i=e.params,n=e.$wrapperEl;n.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=n.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var s=i.slidesPerGroup-r.length%i.slidesPerGroup;if(s!==i.slidesPerGroup){for(var a=0;a<s;a+=1){var o=j(t.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);n.append(o)}r=n.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),e.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),e.loopedSlides+=i.loopAdditionalSlides,e.loopedSlides>r.length&&(e.loopedSlides=r.length);var l=[],c=[];r.each((function(t,i){var n=j(t);i<e.loopedSlides&&c.push(t),i<r.length&&i>=r.length-e.loopedSlides&&l.push(t),n.attr("data-swiper-slide-index",i)}));for(var u=0;u<c.length;u+=1)n.append(j(c[u].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var h=l.length-1;h>=0;h-=1)n.prepend(j(l[h].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var e,t=this.activeIndex,i=this.slides,n=this.loopedSlides,r=this.allowSlidePrev,s=this.allowSlideNext,a=this.snapGrid,o=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-a[t]-this.getTranslate();if(t<n)e=i.length-3*n+t,e+=n,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l);else if(t>=i.length-n){e=-i.length+t+n,e+=n,this.slideTo(e,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l)}this.allowSlidePrev=r,this.allowSlideNext=s,this.emit("loopFix")},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){if(!(this.support.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.append(e[n]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&this.support.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,n=this.activeIndex;t.loop&&this.loopDestroy();var r=n+1;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)e[s]&&i.prepend(e[s]);r=n+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&this.support.observer||this.update(),this.slideTo(r,0,!1)},addSlide:function(e,t){var i=this.$wrapperEl,n=this.params,r=this.activeIndex;n.loop&&(r-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+n.slideClass));var s=this.slides.length;if(e<=0)this.prependSlide(t);else if(e>=s)this.appendSlide(t);else{for(var a=r>e?r+1:r,o=[],l=s-1;l>=e;l-=1){var c=this.slides.eq(l);c.remove(),o.unshift(c)}if("object"==typeof t&&"length"in t){for(var u=0;u<t.length;u+=1)t[u]&&i.append(t[u]);a=r>e?r+t.length:r}else i.append(t);for(var h=0;h<o.length;h+=1)i.append(o[h]);n.loop&&this.loopCreate(),n.observer&&this.support.observer||this.update(),n.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)}},removeSlide:function(e){var t=this.params,i=this.$wrapperEl,n=this.activeIndex;t.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+t.slideClass));var r,s=n;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)r=e[a],this.slides[r]&&this.slides.eq(r).remove(),r<s&&(s-=1);s=Math.max(s,0)}else r=e,this.slides[r]&&this.slides.eq(r).remove(),r<s&&(s-=1),s=Math.max(s,0);t.loop&&this.loopCreate(),t.observer&&this.support.observer||this.update(),t.loop?this.slideTo(s+this.loopedSlides,0,!1):this.slideTo(s,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=A(),t=this.params,i=this.touchEvents,n=this.el,r=this.wrapperEl,s=this.device,a=this.support;this.onTouchStart=se.bind(this),this.onTouchMove=ae.bind(this),this.onTouchEnd=oe.bind(this),t.cssMode&&(this.onScroll=ue.bind(this)),this.onClick=ce.bind(this);var o=!!t.nested;if(!a.touch&&a.pointerEvents)n.addEventListener(i.start,this.onTouchStart,!1),e.addEventListener(i.move,this.onTouchMove,o),e.addEventListener(i.end,this.onTouchEnd,!1);else{if(a.touch){var l=!("touchstart"!==i.start||!a.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};n.addEventListener(i.start,this.onTouchStart,l),n.addEventListener(i.move,this.onTouchMove,a.passiveListener?{passive:!1,capture:o}:o),n.addEventListener(i.end,this.onTouchEnd,l),i.cancel&&n.addEventListener(i.cancel,this.onTouchEnd,l),he||(e.addEventListener("touchstart",de),he=!0)}(t.simulateTouch&&!s.ios&&!s.android||t.simulateTouch&&!a.touch&&s.ios)&&(n.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,o),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&n.addEventListener("click",this.onClick,!0),t.cssMode&&r.addEventListener("scroll",this.onScroll),t.updateOnWindowResize?this.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",le,!0):this.on("observerUpdate",le,!0)},detachEvents:function(){var e=A(),t=this.params,i=this.touchEvents,n=this.el,r=this.wrapperEl,s=this.device,a=this.support,o=!!t.nested;if(!a.touch&&a.pointerEvents)n.removeEventListener(i.start,this.onTouchStart,!1),e.removeEventListener(i.move,this.onTouchMove,o),e.removeEventListener(i.end,this.onTouchEnd,!1);else{if(a.touch){var l=!("onTouchStart"!==i.start||!a.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};n.removeEventListener(i.start,this.onTouchStart,l),n.removeEventListener(i.move,this.onTouchMove,o),n.removeEventListener(i.end,this.onTouchEnd,l),i.cancel&&n.removeEventListener(i.cancel,this.onTouchEnd,l)}(t.simulateTouch&&!s.ios&&!s.android||t.simulateTouch&&!a.touch&&s.ios)&&(n.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,o),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&n.removeEventListener("click",this.onClick,!0),t.cssMode&&r.removeEventListener("scroll",this.onScroll),this.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",le)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,i=this.loopedSlides,n=void 0===i?0:i,r=this.params,s=this.$el,a=r.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var o=this.getBreakpoint(a,this.params.breakpointsBase,this.el);if(o&&this.currentBreakpoint!==o){var l=o in a?a[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=l||this.originalParams,u=r.slidesPerColumn>1,h=c.slidesPerColumn>1;u&&!h?(s.removeClass(r.containerModifierClass+"multirow "+r.containerModifierClass+"multirow-column"),this.emitContainerClasses()):!u&&h&&(s.addClass(r.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&s.addClass(r.containerModifierClass+"multirow-column"),this.emitContainerClasses());var d=c.direction&&c.direction!==r.direction,p=r.loop&&(c.slidesPerView!==r.slidesPerView||d);d&&t&&this.changeDirection(),J(this.params,c),J(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=o,this.emit("_beforeBreakpoint",c),p&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-n+this.loopedSlides,0,!1)),this.emit("breakpoint",c)}}},getBreakpoint:function(e,t,i){if(void 0===t&&(t="window"),e&&("container"!==t||i)){var n=!1,r=L(),s="window"===t?r.innerWidth:i.clientWidth,a="window"===t?r.innerHeight:i.clientHeight,o=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var l=0;l<o.length;l+=1){var c=o[l],u=c.point;c.value<=s&&(n=u)}return n||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,i=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation&&this.navigation.update())}},classes:{addClasses:function(){var e,t,i,n=this.classNames,r=this.params,s=this.rtl,a=this.$el,o=this.device,l=this.support,c=(e=["initialized",r.direction,{"pointer-events":l.pointerEvents&&!l.touch},{"free-mode":r.freeMode},{autoheight:r.autoHeight},{rtl:s},{multirow:r.slidesPerColumn>1},{"multirow-column":r.slidesPerColumn>1&&"column"===r.slidesPerColumnFill},{android:o.android},{ios:o.ios},{"css-mode":r.cssMode}],t=r.containerModifierClass,i=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(n){e[n]&&i.push(t+n)})):"string"==typeof e&&i.push(t+e)})),i);n.push.apply(n,c),a.addClass([].concat(n).join(" ")),this.emitContainerClasses()},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(e,t,i,n,r,s){var a,o=L();function l(){s&&s()}j(e).parent("picture")[0]||e.complete&&r?l():t?((a=new o.Image).onload=l,a.onerror=l,n&&(a.sizes=n),i&&(a.srcset=i),t&&(a.src=t)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var n=e.imagesToLoad[i];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},ge={},ve=function(){function e(){for(var t,i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?i=r[0]:(t=r[0],i=r[1]),i||(i={}),i=J({},i),t&&!i.el&&(i.el=t),i.el&&j(i.el).length>1){var a=[];return j(i.el).each((function(t){var n=J({},i,{el:t});a.push(new e(n))})),a}var o=this;o.__swiper__=!0,o.support=Q(),o.device=K({userAgent:i.userAgent}),o.browser=ee(),o.eventsListeners={},o.eventsAnyListeners=[],void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach((function(e){var t=o.modules[e];if(t.params){var n=Object.keys(t.params)[0],r=t.params[n];if("object"!=typeof r||null===r)return;if(!(n in i)||!("enabled"in r))return;!0===i[n]&&(i[n]={enabled:!0}),"object"!=typeof i[n]||"enabled"in i[n]||(i[n].enabled=!0),i[n]||(i[n]={enabled:!1})}}));var l,c,u=J({},pe);return o.useParams(u),o.params=J({},u,ge,i),o.originalParams=J({},o.params),o.passedParams=J({},i),o.params&&o.params.on&&Object.keys(o.params.on).forEach((function(e){o.on(e,o.params.on[e])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=j,J(o,{el:t,classNames:[],slides:j(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(l=["touchstart","touchmove","touchend","touchcancel"],c=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(c=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},o.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:X(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}var t,i,n,r=e.prototype;return r.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},r.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(i){var n=e.getSlideClasses(i);t.push({slideEl:i,classNames:n}),e.emit("_slideClass",i,n)})),e.emit("_slideClasses",t)}},r.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,n=this.size,r=this.activeIndex,s=1;if(e.centeredSlides){for(var a,o=t[r].swiperSlideSize,l=r+1;l<t.length;l+=1)t[l]&&!a&&(s+=1,(o+=t[l].swiperSlideSize)>n&&(a=!0));for(var c=r-1;c>=0;c-=1)t[c]&&!a&&(s+=1,(o+=t[c].swiperSlideSize)>n&&(a=!0))}else for(var u=r+1;u<t.length;u+=1)i[u]-i[r]<n&&(s+=1);return s},r.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(n(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||n(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function n(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},r.changeDirection=function(e,t){void 0===t&&(t=!0);var i=this.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+e),this.emitContainerClasses(),this.params.direction=e,this.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),this.emit("changeDirection"),t&&this.update()),this},r.mount=function(e){if(this.mounted)return!0;var t,i=j(e||this.params.el);return!!(e=i[0])&&(e.swiper=this,e&&e.shadowRoot&&e.shadowRoot.querySelector?(t=j(e.shadowRoot.querySelector("."+this.params.wrapperClass))).children=function(e){return i.children(e)}:t=i.children("."+this.params.wrapperClass),J(this,{$el:i,el:e,$wrapperEl:t,wrapperEl:t[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===i.css("direction"),rtlTranslate:"horizontal"===this.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===i.css("direction")),wrongRTL:"-webkit-box"===t.css("display")}),!0)},r.init=function(e){return this.initialized||!1===this.mount(e)||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"),this.emit("afterInit")),this},r.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,n=i.params,r=i.$el,s=i.$wrapperEl,a=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttr("style"),s.removeAttr("style"),a&&a.length&&a.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(e){i.off(e)})),!1!==e&&(i.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(i)),i.destroyed=!0),null},e.extendDefaults=function(e){J(ge,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var i=t.name||Object.keys(e.prototype.modules).length+"_"+X();e.prototype.modules[i]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,n=[{key:"extendedDefaults",get:function(){return ge}},{key:"defaults",get:function(){return pe}}],(i=null)&&fe(t.prototype,i),n&&fe(t,n),e}();Object.keys(me).forEach((function(e){Object.keys(me[e]).forEach((function(t){ve.prototype[t]=me[e][t]}))})),ve.use([te,re]);var ye=ve;function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var be={update:function(e){var t=this,i=t.params,n=i.slidesPerView,r=i.slidesPerGroup,s=i.centeredSlides,a=t.params.virtual,o=a.addSlidesBefore,l=a.addSlidesAfter,c=t.virtual,u=c.from,h=c.to,d=c.slides,p=c.slidesGrid,f=c.renderSlide,m=c.offset;t.updateActiveIndex();var g,v,y,x=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",s?(v=Math.floor(n/2)+r+l,y=Math.floor(n/2)+r+o):(v=n+(r-1)+l,y=r+o);var b=Math.max((x||0)-y,0),w=Math.min((x||0)+v,d.length-1),_=(t.slidesGrid[b]||0)-(t.slidesGrid[0]||0);function M(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(J(t.virtual,{from:b,to:w,offset:_,slidesGrid:t.slidesGrid}),u===b&&h===w&&!e)return t.slidesGrid!==p&&_!==m&&t.slides.css(g,_+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:_,from:b,to:w,slides:function(){for(var e=[],t=b;t<=w;t+=1)e.push(d[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&M());var S=[],E=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var T=u;T<=h;T+=1)(T<b||T>w)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+T+'"]').remove();for(var A=0;A<d.length;A+=1)A>=b&&A<=w&&(void 0===h||e?E.push(A):(A>h&&E.push(A),A<u&&S.push(A)));E.forEach((function(e){t.$wrapperEl.append(f(d[e],e))})),S.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(d[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,_+"px"),M()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var n=i.renderSlide?j(i.renderSlide.call(this,e,t)):j('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return n.attr("data-swiper-slide-index")||n.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=n),n},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this.activeIndex,i=t+1,n=1;if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)e[r]&&this.virtual.slides.unshift(e[r]);i=t+e.length,n=e.length}else this.virtual.slides.unshift(e);if(this.params.virtual.cache){var s=this.virtual.cache,a={};Object.keys(s).forEach((function(e){var t=s[e],i=t.attr("data-swiper-slide-index");i&&t.attr("data-swiper-slide-index",parseInt(i,10)+1),a[parseInt(e,10)+n]=t})),this.virtual.cache=a}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(e){if(null!=e){var t=this.activeIndex;if(Array.isArray(e))for(var i=e.length-1;i>=0;i-=1)this.virtual.slides.splice(e[i],1),this.params.virtual.cache&&delete this.virtual.cache[e[i]],e[i]<t&&(t-=1),t=Math.max(t,0);else this.virtual.slides.splice(e,1),this.params.virtual.cache&&delete this.virtual.cache[e],e<t&&(t-=1),t=Math.max(t,0);this.virtual.update(!0),this.slideTo(t,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},we={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){Z(this,{virtual:xe({},be,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};J(e.params,t),J(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}};function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Me={handle:function(e){var t=L(),i=A(),n=this.rtlTranslate,r=e;r.originalEvent&&(r=r.originalEvent);var s=r.keyCode||r.charCode,a=this.params.keyboard.pageUpDown,o=a&&33===s,l=a&&34===s,c=37===s,u=39===s,h=38===s,d=40===s;if(!this.allowSlideNext&&(this.isHorizontal()&&u||this.isVertical()&&d||l))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&c||this.isVertical()&&h||o))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(o||l||c||u||h||d)){var p=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var f=this.$el,m=f[0].clientWidth,g=f[0].clientHeight,v=t.innerWidth,y=t.innerHeight,x=this.$el.offset();n&&(x.left-=this.$el[0].scrollLeft);for(var b=[[x.left,x.top],[x.left+m,x.top],[x.left,x.top+g],[x.left+m,x.top+g]],w=0;w<b.length;w+=1){var _=b[w];if(_[0]>=0&&_[0]<=v&&_[1]>=0&&_[1]<=y){if(0===_[0]&&0===_[1])continue;p=!0}}if(!p)return}this.isHorizontal()?((o||l||c||u)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((l||u)&&!n||(o||c)&&n)&&this.slideNext(),((o||c)&&!n||(l||u)&&n)&&this.slidePrev()):((o||l||h||d)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(l||d)&&this.slideNext(),(o||h)&&this.slidePrev()),this.emit("keyPress",s)}},enable:function(){var e=A();this.keyboard.enabled||(j(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){var e=A();this.keyboard.enabled&&(j(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},Se={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){Z(this,{keyboard:_e({enabled:!1},Me)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}};var Ee={lastScrollTime:X(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return L().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=A(),t="onwheel"in e;if(!t){var i=e.createElement("div");i.setAttribute("onwheel","return;"),t="function"==typeof i.onwheel}return!t&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(t=e.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel"},normalize:function(e){var t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),e.shiftKey&&!n&&(n=r,r=0),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,i=this,n=i.params.mousewheel;i.params.cssMode&&t.preventDefault();var r=i.$el;if("container"!==i.params.mousewheel.eventsTarget&&(r=j(i.params.mousewheel.eventsTarget)),!i.mouseEntered&&!r[0].contains(t.target)&&!n.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,a=i.rtlTranslate?-1:1,o=Ee.normalize(t);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return!0;s=-o.pixelX*a}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return!0;s=-o.pixelY}else s=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*a:-o.pixelY;if(0===s)return!0;n.invert&&(s=-s);var l=i.getTranslate()+s*n.sensitivity;if(l>=i.minTranslate()&&(l=i.minTranslate()),l<=i.maxTranslate()&&(l=i.maxTranslate()),(!!i.params.loop||!(l===i.minTranslate()||l===i.maxTranslate()))&&i.params.nested&&t.stopPropagation(),i.params.freeMode){var c={time:X(),delta:Math.abs(s),direction:Math.sign(s)},u=i.mousewheel.lastEventBeforeSnap,h=u&&c.time<u.time+500&&c.delta<=u.delta&&c.direction===u.direction;if(!h){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();var d=i.getTranslate()+s*n.sensitivity,p=i.isBeginning,f=i.isEnd;if(d>=i.minTranslate()&&(d=i.minTranslate()),d<=i.maxTranslate()&&(d=i.maxTranslate()),i.setTransition(0),i.setTranslate(d),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!p&&i.isBeginning||!f&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;var m=i.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var g=m.length?m[m.length-1]:void 0,v=m[0];if(m.push(c),g&&(c.delta>g.delta||c.direction!==g.direction))m.splice(0);else if(m.length>=15&&c.time-v.time<500&&v.delta-c.delta>=1&&c.delta<=6){var y=s>0?.8:.2;i.mousewheel.lastEventBeforeSnap=c,m.splice(0),i.mousewheel.timeout=q((function(){i.slideToClosest(i.params.speed,!0,void 0,y)}),0)}i.mousewheel.timeout||(i.mousewheel.timeout=q((function(){i.mousewheel.lastEventBeforeSnap=c,m.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)}),500))}if(h||i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),d===i.minTranslate()||d===i.maxTranslate())return!0}}else{var x={time:X(),delta:Math.abs(s),direction:Math.sign(s),raw:e},b=i.mousewheel.recentWheelEvents;b.length>=2&&b.shift();var w=b.length?b[b.length-1]:void 0;if(b.push(x),w?(x.direction!==w.direction||x.delta>w.delta||x.time>w.time+150)&&i.mousewheel.animateSlider(x):i.mousewheel.animateSlider(x),i.mousewheel.releaseScroll(x))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},animateSlider:function(e){var t=L();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta)&&(!(this.params.mousewheel.thresholdTime&&X()-this.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(e.delta>=6&&X()-this.mousewheel.lastScrollTime<60||(e.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",e.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",e.raw)),this.mousewheel.lastScrollTime=(new t.Date).getTime(),!1)))},releaseScroll:function(e){var t=this.params.mousewheel;if(e.direction<0){if(this.isEnd&&!this.params.loop&&t.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&t.releaseOnEdges)return!0;return!1},enable:function(){var e=Ee.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=j(this.params.mousewheel.eventsTarget)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=Ee.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e)return!1;if(!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=j(this.params.mousewheel.eventsTarget)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}};function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ae={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this.params.navigation,t=this.navigation.toggleEl;if(!this.params.loop){var i=this.navigation,n=i.$nextEl,r=i.$prevEl;r&&r.length>0&&(this.isBeginning?t(r,!0):t(r,!1),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),n&&n.length>0&&(this.isEnd?t(n,!0):t(n,!1),n[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=j(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&e.length>1&&1===this.$el.find(i.nextEl).length&&(e=this.$el.find(i.nextEl))),i.prevEl&&(t=j(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&t.length>1&&1===this.$el.find(i.prevEl).length&&(t=this.$el.find(i.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),J(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}};function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Le={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,n=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,s=this.params.loop?Math.ceil((n-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>n-1-2*this.loopedSlides&&(i-=n-2*this.loopedSlides),i>s-1&&(i-=s),i<0&&"bullets"!==this.params.paginationType&&(i=s+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var a,o,l,c=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=c.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),a=i-this.pagination.dynamicBulletIndex,l=((o=a+(Math.min(c.length,t.dynamicMainBullets)-1))+a)/2),c.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),r.length>1)c.each((function(e){var n=j(e),r=n.index();r===i&&n.addClass(t.bulletActiveClass),t.dynamicBullets&&(r>=a&&r<=o&&n.addClass(t.bulletActiveClass+"-main"),r===a&&n.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),r===o&&n.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))}));else{var u=c.eq(i),h=u.index();if(u.addClass(t.bulletActiveClass),t.dynamicBullets){for(var d=c.eq(a),p=c.eq(o),f=a;f<=o;f+=1)c.eq(f).addClass(t.bulletActiveClass+"-main");if(this.params.loop)if(h>=c.length-t.dynamicMainBullets){for(var m=t.dynamicMainBullets;m>=0;m-=1)c.eq(c.length-m).addClass(t.bulletActiveClass+"-main");c.eq(c.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else d.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),p.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next");else d.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),p.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var g=Math.min(c.length,t.dynamicMainBullets+4),v=(this.pagination.bulletSize*g-this.pagination.bulletSize)/2-l*this.pagination.bulletSize,y=e?"right":"left";c.css(this.isHorizontal()?y:"top",v+"px")}}if("fraction"===t.type&&(r.find("."+t.currentClass).text(t.formatFractionCurrent(i+1)),r.find("."+t.totalClass).text(t.formatFractionTotal(s))),"progressbar"===t.type){var x;x=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var b=(i+1)/s,w=1,_=1;"horizontal"===x?w=b:_=b,r.find("."+t.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+w+") scaleY("+_+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(r.html(t.renderCustom(this,i+1,s)),this.emit("paginationRender",r[0])):this.emit("paginationUpdate",r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,n="";if("bullets"===e.type){var r=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;this.params.freeMode&&!this.params.loop&&r>t&&(r=t);for(var s=0;s<r;s+=1)e.renderBullet?n+=e.renderBullet.call(this,s,e.bulletClass):n+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(n),this.pagination.bullets=i.find("."+e.bulletClass.replace(/ /g,"."))}"fraction"===e.type&&(n=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(n)),"progressbar"===e.type&&(n=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(n)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=j(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass.replace(/ /g,"."),(function(t){t.preventDefault();var i=j(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)})),J(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass.replace(/ /g,"."))}}};function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Re={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,n=e.dragSize,r=e.trackSize,s=e.$dragEl,a=e.$el,o=this.params.scrollbar,l=n,c=(r-n)*i;t?(c=-c)>0?(l=n-c,c=0):-c+n>r&&(l=r+c):c<0?(l=n+c,c=0):c+n>r&&(l=r-c),this.isHorizontal()?(s.transform("translate3d("+c+"px, 0, 0)"),s[0].style.width=l+"px"):(s.transform("translate3d(0px, "+c+"px, 0)"),s[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),a[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){a[0].style.opacity=0,a.transition(400)}),1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=e.$dragEl,i=e.$el;t[0].style.width="",t[0].style.height="";var n,r=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,s=this.size/this.virtualSize,a=s*(r/this.size);n="auto"===this.params.scrollbar.dragSize?r*s:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?t[0].style.width=n+"px":t[0].style.height=n+"px",i[0].style.display=s>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),J(e,{trackSize:r,divider:s,moveDivider:a,dragSize:n}),e.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,i=this.scrollbar,n=this.rtlTranslate,r=i.$el,s=i.dragSize,a=i.trackSize,o=i.dragStartPos;t=(i.getPointerPosition(e)-r.offset()[this.isHorizontal()?"left":"top"]-(null!==o?o:s/2))/(a-s),t=Math.max(Math.min(t,1),0),n&&(t=1-t);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*t;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el,s=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=e.target===s[0]||e.target===s?i.getPointerPosition(e)-e.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),n.transition(100),s.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),r.transition(0),t.hide&&r.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,n=t.$el,r=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),n.transition(0),r.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),n.transition("")),t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=q((function(){r.css("opacity",0),r.transition(400)}),1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var e=A(),t=this.scrollbar,i=this.touchEventsTouch,n=this.touchEventsDesktop,r=this.params,s=this.support,a=t.$el[0],o=!(!s.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},l=!(!s.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};a&&(s.touch?(a.addEventListener(i.start,this.scrollbar.onDragStart,o),a.addEventListener(i.move,this.scrollbar.onDragMove,o),a.addEventListener(i.end,this.scrollbar.onDragEnd,l)):(a.addEventListener(n.start,this.scrollbar.onDragStart,o),e.addEventListener(n.move,this.scrollbar.onDragMove,o),e.addEventListener(n.end,this.scrollbar.onDragEnd,l)))}},disableDraggable:function(){if(this.params.scrollbar.el){var e=A(),t=this.scrollbar,i=this.touchEventsTouch,n=this.touchEventsDesktop,r=this.params,s=this.support,a=t.$el[0],o=!(!s.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},l=!(!s.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};a&&(s.touch?(a.removeEventListener(i.start,this.scrollbar.onDragStart,o),a.removeEventListener(i.move,this.scrollbar.onDragMove,o),a.removeEventListener(i.end,this.scrollbar.onDragEnd,l)):(a.removeEventListener(n.start,this.scrollbar.onDragStart,o),e.removeEventListener(n.move,this.scrollbar.onDragMove,o),e.removeEventListener(n.end,this.scrollbar.onDragEnd,l)))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,n=j(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&n.length>1&&1===t.find(i.el).length&&(n=t.find(i.el));var r=n.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=j('<div class="'+this.params.scrollbar.dragClass+'"></div>'),n.append(r)),J(e,{$el:n,el:n[0],$dragEl:r,dragEl:r[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}};function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ie={setTransform:function(e,t){var i=this.rtl,n=j(e),r=i?-1:1,s=n.attr("data-swiper-parallax")||"0",a=n.attr("data-swiper-parallax-x"),o=n.attr("data-swiper-parallax-y"),l=n.attr("data-swiper-parallax-scale"),c=n.attr("data-swiper-parallax-opacity");if(a||o?(a=a||"0",o=o||"0"):this.isHorizontal()?(a=s,o="0"):(o=s,a="0"),a=a.indexOf("%")>=0?parseInt(a,10)*t*r+"%":a*t*r+"px",o=o.indexOf("%")>=0?parseInt(o,10)*t+"%":o*t+"px",null!=c){var u=c-(c-1)*(1-Math.abs(t));n[0].style.opacity=u}if(null==l)n.transform("translate3d("+a+", "+o+", 0px)");else{var h=l-(l-1)*(1-Math.abs(t));n.transform("translate3d("+a+", "+o+", 0px) scale("+h+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,n=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,n)})),i.each((function(t,i){var s=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(i/2)-n*(r.length-1)),s=Math.min(Math.max(s,-1),1),j(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,s)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var i=j(t),n=parseInt(i.attr("data-swiper-parallax-duration"),10)||e;0===e&&(n=0),i.transition(n)}))}};function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var De={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-i,2))},onGestureStart:function(e){var t=this.support,i=this.params.zoom,n=this.zoom,r=n.gesture;if(n.fakeGestureTouched=!1,n.fakeGestureMoved=!1,!t.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;n.fakeGestureTouched=!0,r.scaleStart=De.getDistanceBetweenTouches(e)}r.$slideEl&&r.$slideEl.length||(r.$slideEl=j(e.target).closest("."+this.params.slideClass),0===r.$slideEl.length&&(r.$slideEl=this.slides.eq(this.activeIndex)),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+i.containerClass),r.maxRatio=r.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==r.$imageWrapEl.length)?(r.$imageEl&&r.$imageEl.transition(0),this.zoom.isScaling=!0):r.$imageEl=void 0},onGestureChange:function(e){var t=this.support,i=this.params.zoom,n=this.zoom,r=n.gesture;if(!t.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;n.fakeGestureMoved=!0,r.scaleMove=De.getDistanceBetweenTouches(e)}r.$imageEl&&0!==r.$imageEl.length?(t.gestures?n.scale=e.scale*n.currentScale:n.scale=r.scaleMove/r.scaleStart*n.currentScale,n.scale>r.maxRatio&&(n.scale=r.maxRatio-1+Math.pow(n.scale-r.maxRatio+1,.5)),n.scale<i.minRatio&&(n.scale=i.minRatio+1-Math.pow(i.minRatio-n.scale+1,.5)),r.$imageEl.transform("translate3d(0,0,0) scale("+n.scale+")")):"gesturechange"===e.type&&n.onGestureStart(e)},onGestureEnd:function(e){var t=this.device,i=this.support,n=this.params.zoom,r=this.zoom,s=r.gesture;if(!i.gestures){if(!r.fakeGestureTouched||!r.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!t.android)return;r.fakeGestureTouched=!1,r.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(r.scale=Math.max(Math.min(r.scale,s.maxRatio),n.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+r.scale+")"),r.currentScale=r.scale,r.isScaling=!1,1===r.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,i=this.zoom,n=i.gesture,r=i.image;n.$imageEl&&0!==n.$imageEl.length&&(r.isTouched||(t.android&&e.cancelable&&e.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,n=t.image,r=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,n.isTouched&&i.$slideEl)){n.isMoved||(n.width=i.$imageEl[0].offsetWidth,n.height=i.$imageEl[0].offsetHeight,n.startX=Y(i.$imageWrapEl[0],"x")||0,n.startY=Y(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(n.startX=-n.startX,n.startY=-n.startY));var s=n.width*t.scale,a=n.height*t.scale;if(!(s<i.slideWidth&&a<i.slideHeight)){if(n.minX=Math.min(i.slideWidth/2-s/2,0),n.maxX=-n.minX,n.minY=Math.min(i.slideHeight/2-a/2,0),n.maxY=-n.minY,n.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!n.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(n.minX)===Math.floor(n.startX)&&n.touchesCurrent.x<n.touchesStart.x||Math.floor(n.maxX)===Math.floor(n.startX)&&n.touchesCurrent.x>n.touchesStart.x))return void(n.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(n.minY)===Math.floor(n.startY)&&n.touchesCurrent.y<n.touchesStart.y||Math.floor(n.maxY)===Math.floor(n.startY)&&n.touchesCurrent.y>n.touchesStart.y))return void(n.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),n.isMoved=!0,n.currentX=n.touchesCurrent.x-n.touchesStart.x+n.startX,n.currentY=n.touchesCurrent.y-n.touchesStart.y+n.startY,n.currentX<n.minX&&(n.currentX=n.minX+1-Math.pow(n.minX-n.currentX+1,.8)),n.currentX>n.maxX&&(n.currentX=n.maxX-1+Math.pow(n.currentX-n.maxX+1,.8)),n.currentY<n.minY&&(n.currentY=n.minY+1-Math.pow(n.minY-n.currentY+1,.8)),n.currentY>n.maxY&&(n.currentY=n.maxY-1+Math.pow(n.currentY-n.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=n.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=n.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(n.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(n.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(n.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(n.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=n.touchesCurrent.x,r.prevPositionY=n.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,n=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var r=300,s=300,a=n.x*r,o=i.currentX+a,l=n.y*s,c=i.currentY+l;0!==n.x&&(r=Math.abs((o-i.currentX)/n.x)),0!==n.y&&(s=Math.abs((c-i.currentY)/n.y));var u=Math.max(r,s);i.currentX=o,i.currentY=c;var h=i.width*e.scale,d=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-h/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-d/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(u).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl&&t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl&&t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,n,r,s,a,o,l,c,u,h,d,p,f,m,g,v=L(),y=this.zoom,x=this.params.zoom,b=y.gesture,w=y.image;(b.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?b.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):b.$slideEl=this.slides.eq(this.activeIndex),b.$imageEl=b.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),b.$imageWrapEl=b.$imageEl.parent("."+x.containerClass)),b.$imageEl&&0!==b.$imageEl.length)&&(b.$slideEl.addClass(""+x.zoomedSlideClass),void 0===w.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,i="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=w.touchesStart.x,i=w.touchesStart.y),y.scale=b.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,y.currentScale=b.$imageWrapEl.attr("data-swiper-zoom")||x.maxRatio,e?(m=b.$slideEl[0].offsetWidth,g=b.$slideEl[0].offsetHeight,n=b.$slideEl.offset().left+v.scrollX+m/2-t,r=b.$slideEl.offset().top+v.scrollY+g/2-i,o=b.$imageEl[0].offsetWidth,l=b.$imageEl[0].offsetHeight,c=o*y.scale,u=l*y.scale,p=-(h=Math.min(m/2-c/2,0)),f=-(d=Math.min(g/2-u/2,0)),(s=n*y.scale)<h&&(s=h),s>p&&(s=p),(a=r*y.scale)<d&&(a=d),a>f&&(a=f)):(s=0,a=0),b.$imageWrapEl.transition(300).transform("translate3d("+s+"px, "+a+"px,0)"),b.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+y.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?i.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):i.$slideEl=this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},toggleGestures:function(e){var t=this.zoom,i=t.slideSelector,n=t.passiveListener;this.$wrapperEl[e]("gesturestart",i,t.onGestureStart,n),this.$wrapperEl[e]("gesturechange",i,t.onGestureChange,n),this.$wrapperEl[e]("gestureend",i,t.onGestureEnd,n)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this.support,t=this.zoom;if(!t.enabled){t.enabled=!0;var i=!("touchstart"!==this.touchEvents.start||!e.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},n=!e.passiveListener||{passive:!1,capture:!0},r="."+this.params.slideClass;this.zoom.passiveListener=i,this.zoom.slideSelector=r,e.gestures?(this.$wrapperEl.on(this.touchEvents.start,this.zoom.enableGestures,i),this.$wrapperEl.on(this.touchEvents.end,this.zoom.disableGestures,i)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,r,t.onGestureStart,i),this.$wrapperEl.on(this.touchEvents.move,r,t.onGestureChange,n),this.$wrapperEl.on(this.touchEvents.end,r,t.onGestureEnd,i),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,r,t.onGestureEnd,i)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,t.onTouchMove,n)}},disable:function(){var e=this.zoom;if(e.enabled){var t=this.support;this.zoom.enabled=!1;var i=!("touchstart"!==this.touchEvents.start||!t.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},n=!t.passiveListener||{passive:!1,capture:!0},r="."+this.params.slideClass;t.gestures?(this.$wrapperEl.off(this.touchEvents.start,this.zoom.enableGestures,i),this.$wrapperEl.off(this.touchEvents.end,this.zoom.disableGestures,i)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,r,e.onGestureStart,i),this.$wrapperEl.off(this.touchEvents.move,r,e.onGestureChange,n),this.$wrapperEl.off(this.touchEvents.end,r,e.onGestureEnd,i),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,r,e.onGestureEnd,i)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,e.onTouchMove,n)}}};function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ne={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,n=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),s=r.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!r.hasClass(n.elementClass)||r.hasClass(n.loadedClass)||r.hasClass(n.loadingClass)||s.push(r[0]),0!==s.length&&s.each((function(e){var s=j(e);s.addClass(n.loadingClass);var a=s.attr("data-background"),o=s.attr("data-src"),l=s.attr("data-srcset"),c=s.attr("data-sizes"),u=s.parent("picture");i.loadImage(s[0],o||a,l,c,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(a?(s.css("background-image",'url("'+a+'")'),s.removeAttr("data-background")):(l&&(s.attr("srcset",l),s.removeAttr("data-srcset")),c&&(s.attr("sizes",c),s.removeAttr("data-sizes")),u.length&&u.children("source").each((function(e){var t=j(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),o&&(s.attr("src",o),s.removeAttr("data-src"))),s.addClass(n.loadedClass).removeClass(n.loadingClass),r.find("."+n.preloaderClass).remove(),i.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var h=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(h.index(),!1)}else{var d=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(d.index(),!1)}}i.emit("lazyImageReady",r[0],s[0]),i.params.autoHeight&&i.updateAutoHeight()}})),i.emit("lazyImageLoad",r[0],s[0])}))}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,n=e.slides,r=e.activeIndex,s=e.virtual&&i.virtual.enabled,a=i.lazy,o=i.slidesPerView;function l(e){if(s){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(n[e])return!0;return!1}function c(e){return s?j(e).attr("data-swiper-slide-index"):j(e).index()}if("auto"===o&&(o=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each((function(t){var i=s?j(t).attr("data-swiper-slide-index"):j(t).index();e.lazy.loadInSlide(i)}));else if(o>1)for(var u=r;u<r+o;u+=1)l(u)&&e.lazy.loadInSlide(u);else e.lazy.loadInSlide(r);if(a.loadPrevNext)if(o>1||a.loadPrevNextAmount&&a.loadPrevNextAmount>1){for(var h=a.loadPrevNextAmount,d=o,p=Math.min(r+d+Math.max(h,d),n.length),f=Math.max(r-Math.max(d,h),0),m=r+o;m<p;m+=1)l(m)&&e.lazy.loadInSlide(m);for(var g=f;g<r;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var v=t.children("."+i.slideNextClass);v.length>0&&e.lazy.loadInSlide(c(v));var y=t.children("."+i.slidePrevClass);y.length>0&&e.lazy.loadInSlide(c(y))}},checkInViewOnLoad:function(){var e=L();if(this&&!this.destroyed){var t=this.params.lazy.scrollingElement?j(this.params.lazy.scrollingElement):j(e),i=t[0]===e,n=i?e.innerWidth:t[0].offsetWidth,r=i?e.innerHeight:t[0].offsetHeight,s=this.$el.offset(),a=!1;this.rtlTranslate&&(s.left-=this.$el[0].scrollLeft);for(var o=[[s.left,s.top],[s.left+this.width,s.top],[s.left,s.top+this.height],[s.left+this.width,s.top+this.height]],l=0;l<o.length;l+=1){var c=o[l];if(c[0]>=0&&c[0]<=n&&c[1]>=0&&c[1]<=r){if(0===c[0]&&0===c[1])continue;a=!0}}a?(this.lazy.load(),t.off("scroll",this.lazy.checkInViewOnLoad)):this.lazy.scrollHandlerAttached||(this.lazy.scrollHandlerAttached=!0,t.on("scroll",this.lazy.checkInViewOnLoad))}}};function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Fe={LinearSpline:function(e,t){var i,n,r,s,a,o=function(e,t){for(n=-1,i=e.length;i-n>1;)e[r=i+n>>1]<=t?n=r:i=r;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(a=o(this.x,e),s=a-1,(e-this.x[s])*(this.y[a]-this.y[s])/(this.x[a]-this.x[s])+this.y[s]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new Fe.LinearSpline(this.slidesGrid,e.slidesGrid):new Fe.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,n,r=this,s=r.controller.control,a=r.constructor;function o(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),n=-r.controller.spline.interpolate(-t)),n&&"container"!==r.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),n=(t-r.minTranslate())*i+e.minTranslate()),r.params.controller.inverse&&(n=e.maxTranslate()-n),e.updateProgress(n),e.setTranslate(n,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(var l=0;l<s.length;l+=1)s[l]!==t&&s[l]instanceof a&&o(s[l]);else s instanceof a&&t!==s&&o(s)},setTransition:function(e,t){var i,n=this,r=n.constructor,s=n.controller.control;function a(t){t.setTransition(e,n),0!==e&&(t.transitionStart(),t.params.autoHeight&&q((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){s&&(t.params.loop&&"slide"===n.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(s))for(i=0;i<s.length;i+=1)s[i]!==t&&s[i]instanceof r&&a(s[i]);else s instanceof r&&t!==s&&a(s)}};function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ue={getRandomNumber:function(e){void 0===e&&(e=16);return"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this.params.a11y,i=j(e.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(t.lastSlideMessage):this.a11y.notify(t.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(t.firstSlideMessage):this.a11y.notify(t.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass.replace(/ /g,"."))&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop&&this.navigation){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(this.isBeginning?(this.a11y.disableEl(i),this.a11y.makeElNotFocusable(i)):(this.a11y.enableEl(i),this.a11y.makeElFocusable(i))),t&&t.length>0&&(this.isEnd?(this.a11y.disableEl(t),this.a11y.makeElNotFocusable(t)):(this.a11y.enableEl(t),this.a11y.makeElFocusable(t)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(i){var n=j(i);e.a11y.makeElFocusable(n),e.params.pagination.renderBullet||(e.a11y.addElRole(n,"button"),e.a11y.addElLabel(n,t.paginationBulletMessage.replace(/\{\{index\}\}/,n.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var i=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(i,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(i,t.containerMessage);var n,r,s,a=e.$wrapperEl,o=a.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16);e.a11y.addElId(a,o),n=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite",e.a11y.addElLive(a,n),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(j(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(j(e.slides),"group"),e.slides.each((function(i){var n=j(i),r=t.slideLabelMessage.replace(/\{\{index\}\}/,n.index()+1).replace(/\{\{slidesLength\}\}/,e.slides.length);e.a11y.addElLabel(n,r)})),e.navigation&&e.navigation.$nextEl&&(r=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(s=e.navigation.$prevEl),r&&r.length&&(e.a11y.makeElFocusable(r),"BUTTON"!==r[0].tagName&&(e.a11y.addElRole(r,"button"),r.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(r,t.nextSlideMessage),e.a11y.addElControls(r,o)),s&&s.length&&(e.a11y.makeElFocusable(s),"BUTTON"!==s[0].tagName&&(e.a11y.addElRole(s,"button"),s.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(s,t.prevSlideMessage),e.a11y.addElControls(s,o)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass.replace(/ /g,"."),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(e=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(t=this.navigation.$prevEl),e&&e.off("keydown",this.a11y.onEnterOrSpaceKey),t&&t.off("keydown",this.a11y.onEnterOrSpaceKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass.replace(/ /g,"."),this.a11y.onEnterOrSpaceKey)}};function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var We={init:function(){var e=L();if(this.params.history){if(!e.history||!e.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var t=this.history;t.initialized=!0,t.paths=We.getPathValues(this.params.url),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||e.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){var e=L();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=We.getPathValues(this.params.url),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(e){var t=L(),i=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),n=i.length;return{key:i[n-2],value:i[n-1]}},setHistory:function(e,t){var i=L();if(this.history.initialized&&this.params.history.enabled){var n;n=this.params.url?new URL(this.params.url):i.location;var r=this.slides.eq(t),s=We.slugify(r.attr("data-history"));n.pathname.includes(e)||(s=e+"/"+s);var a=i.history.state;a&&a.value===s||(this.params.history.replaceState?i.history.replaceState({value:s},null,s):i.history.pushState({value:s},null,s))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var n=0,r=this.slides.length;n<r;n+=1){var s=this.slides.eq(n);if(We.slugify(s.attr("data-history"))===t&&!s.hasClass(this.params.slideDuplicateClass)){var a=s.index();this.slideTo(a,e,i)}}else this.slideTo(0,e,i)}};function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var je={onHashCange:function(){var e=A();this.emit("hashChange");var t=e.location.hash.replace("#","");if(t!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){var e=L(),t=A();if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&e.history&&e.history.replaceState)e.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||!1),this.emit("hashSet");else{var i=this.slides.eq(this.activeIndex),n=i.attr("data-hash")||i.attr("data-history");t.location.hash=n||"",this.emit("hashSet")}},init:function(){var e=A(),t=L();if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=e.location.hash.replace("#","");if(i)for(var n=0,r=this.slides.length;n<r;n+=1){var s=this.slides.eq(n);if((s.attr("data-hash")||s.attr("data-history"))===i&&!s.hasClass(this.params.slideDuplicateClass)){var a=s.index();this.slideTo(a,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&j(t).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){var e=L();this.params.hashNavigation.watchState&&j(e).off("hashchange",this.hashNavigation.onHashCange)}};function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Xe={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=q((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==e&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))},onVisibilityChange:function(){var e=A();"hidden"===e.visibilityState&&this.autoplay.running&&this.autoplay.pause(),"visible"===e.visibilityState&&this.autoplay.paused&&(this.autoplay.run(),this.autoplay.paused=!1)},onTransitionEnd:function(e){this&&!this.destroyed&&this.$wrapperEl&&e.target===this.$wrapperEl[0]&&(this.$wrapperEl[0].removeEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].removeEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd),this.autoplay.paused=!1,this.autoplay.running?this.autoplay.run():this.autoplay.stop())}};function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var $e={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),n=-i[0].swiperSlideOffset;this.params.virtualTranslate||(n-=this.translate);var r=0;this.isHorizontal()||(r=n,n=0);var s=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:s}).transform("translate3d("+n+"px, "+r+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,n=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)n.trigger(e[i])}}))}}};function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ze={setTranslate:function(){var e,t=this.$el,i=this.$wrapperEl,n=this.slides,r=this.width,s=this.height,a=this.rtlTranslate,o=this.size,l=this.browser,c=this.params.cubeEffect,u=this.isHorizontal(),h=this.virtual&&this.params.virtual.enabled,d=0;c.shadow&&(u?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=j('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=t.find(".swiper-cube-shadow")).length&&(e=j('<div class="swiper-cube-shadow"></div>'),t.append(e)));for(var p=0;p<n.length;p+=1){var f=n.eq(p),m=p;h&&(m=parseInt(f.attr("data-swiper-slide-index"),10));var g=90*m,v=Math.floor(g/360);a&&(g=-g,v=Math.floor(-g/360));var y=Math.max(Math.min(f[0].progress,1),-1),x=0,b=0,w=0;m%4==0?(x=4*-v*o,w=0):(m-1)%4==0?(x=0,w=4*-v*o):(m-2)%4==0?(x=o+4*v*o,w=o):(m-3)%4==0&&(x=-o,w=3*o+4*o*v),a&&(x=-x),u||(b=x,x=0);var _="rotateX("+(u?0:-g)+"deg) rotateY("+(u?g:0)+"deg) translate3d("+x+"px, "+b+"px, "+w+"px)";if(y<=1&&y>-1&&(d=90*m+90*y,a&&(d=90*-m-90*y)),f.transform(_),c.slideShadows){var M=u?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),S=u?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===M.length&&(M=j('<div class="swiper-slide-shadow-'+(u?"left":"top")+'"></div>'),f.append(M)),0===S.length&&(S=j('<div class="swiper-slide-shadow-'+(u?"right":"bottom")+'"></div>'),f.append(S)),M.length&&(M[0].style.opacity=Math.max(-y,0)),S.length&&(S[0].style.opacity=Math.max(y,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+o/2+"px","-moz-transform-origin":"50% 50% -"+o/2+"px","-ms-transform-origin":"50% 50% -"+o/2+"px","transform-origin":"50% 50% -"+o/2+"px"}),c.shadow)if(u)e.transform("translate3d(0px, "+(r/2+c.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var E=Math.abs(d)-90*Math.floor(Math.abs(d)/90),T=1.5-(Math.sin(2*E*Math.PI/360)/2+Math.cos(2*E*Math.PI/360)/2),A=c.shadowScale,C=c.shadowScale/T,L=c.shadowOffset;e.transform("scale3d("+A+", 1, "+C+") translate3d(0px, "+(s/2+L)+"px, "+-s/2/C+"px) rotateX(-90deg)")}var P=l.isSafari||l.isWebView?-o/2:0;i.transform("translate3d(0px,0,"+P+"px) rotateX("+(this.isHorizontal()?0:d)+"deg) rotateY("+(this.isHorizontal()?-d:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}};function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var Ke={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var n=e.eq(i),r=n[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));var s=-180*r,a=0,o=-n[0].swiperSlideOffset,l=0;if(this.isHorizontal()?t&&(s=-s):(l=o,o=0,a=-s,s=0),n[0].style.zIndex=-Math.abs(Math.round(r))+e.length,this.params.flipEffect.slideShadows){var c=this.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),u=this.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===c.length&&(c=j('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),n.append(c)),0===u.length&&(u=j('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),n.append(u)),c.length&&(c[0].style.opacity=Math.max(-r,0)),u.length&&(u[0].style.opacity=Math.max(r,0))}n.transform("translate3d("+o+"px, "+l+"px, 0px) rotateX("+a+"deg) rotateY("+s+"deg)")}},setTransition:function(e){var t=this,i=t.slides,n=t.activeIndex,r=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var s=!1;i.eq(n).transitionEnd((function(){if(!s&&t&&!t.destroyed){s=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)r.trigger(e[i])}}))}}};function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var tt={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,n=this.slidesSizesGrid,r=this.params.coverflowEffect,s=this.isHorizontal(),a=this.translate,o=s?e/2-a:t/2-a,l=s?r.rotate:-r.rotate,c=r.depth,u=0,h=i.length;u<h;u+=1){var d=i.eq(u),p=n[u],f=(o-d[0].swiperSlideOffset-p/2)/p*r.modifier,m=s?l*f:0,g=s?0:l*f,v=-c*Math.abs(f),y=r.stretch;"string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(r.stretch)/100*p);var x=s?0:y*f,b=s?y*f:0,w=1-(1-r.scale)*Math.abs(f);Math.abs(b)<.001&&(b=0),Math.abs(x)<.001&&(x=0),Math.abs(v)<.001&&(v=0),Math.abs(m)<.001&&(m=0),Math.abs(g)<.001&&(g=0),Math.abs(w)<.001&&(w=0);var _="translate3d("+b+"px,"+x+"px,"+v+"px)  rotateX("+g+"deg) rotateY("+m+"deg) scale("+w+")";if(d.transform(_),d[0].style.zIndex=1-Math.abs(Math.round(f)),r.slideShadows){var M=s?d.find(".swiper-slide-shadow-left"):d.find(".swiper-slide-shadow-top"),S=s?d.find(".swiper-slide-shadow-right"):d.find(".swiper-slide-shadow-bottom");0===M.length&&(M=j('<div class="swiper-slide-shadow-'+(s?"left":"top")+'"></div>'),d.append(M)),0===S.length&&(S=j('<div class="swiper-slide-shadow-'+(s?"right":"bottom")+'"></div>'),d.append(S)),M.length&&(M[0].style.opacity=f>0?f:0),S.length&&(S[0].style.opacity=-f>0?-f:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}};function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var nt={init:function(){var e=this.params.thumbs;if(this.thumbs.initialized)return!1;this.thumbs.initialized=!0;var t=this.constructor;return e.swiper instanceof t?(this.thumbs.swiper=e.swiper,J(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),J(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):$(e.swiper)&&(this.thumbs.swiper=new t(J({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this.thumbs.swiper;if(e){var t=e.clickedIndex,i=e.clickedSlide;if(!(i&&j(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==t)){var n;if(n=e.params.loop?parseInt(j(e.clickedSlide).attr("data-swiper-slide-index"),10):t,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var s=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+n+'"]').eq(0).index(),a=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+n+'"]').eq(0).index();n=void 0===s?a:void 0===a?s:a-r<r-s?a:s}this.slideTo(n)}}},update:function(e){var t=this.thumbs.swiper;if(t){var i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView,n=this.params.thumbs.autoScrollOffset,r=n&&!t.params.loop;if(this.realIndex!==t.realIndex||r){var s,a,o=t.activeIndex;if(t.params.loop){t.slides.eq(o).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,o=t.activeIndex);var l=t.slides.eq(o).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),c=t.slides.eq(o).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();s=void 0===l?c:void 0===c?l:c-o==o-l?o:c-o<o-l?c:l,a=this.activeIndex>this.previousIndex?"next":"prev"}else a=(s=this.realIndex)>this.previousIndex?"next":"prev";r&&(s+="next"===a?n:-1*n),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(s)<0&&(t.params.centeredSlides?s=s>o?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:s>o&&(s=s-i+1),t.slideTo(s,e?0:void 0))}var u=1,h=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(u=this.params.slidesPerView),this.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),t.slides.removeClass(h),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(var d=0;d<u;d+=1)t.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+d)+'"]').addClass(h);else for(var p=0;p<u;p+=1)t.slides.eq(this.realIndex+p).addClass(h)}}},rt=[we,Se,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){Z(this,{mousewheel:{enabled:!1,lastScrollTime:X(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:Ee.enable,disable:Ee.disable,handle:Ee.handle,handleMouseEnter:Ee.handleMouseEnter,handleMouseLeave:Ee.handleMouseLeave,animateSlider:Ee.animateSlider,releaseScroll:Ee.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){Z(this,{navigation:Te({},Ae)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},click:function(e,t){var i=e.navigation,n=i.$nextEl,r=i.$prevEl,s=t.target;if(e.params.navigation.hideOnClick&&!j(s).is(r)&&!j(s).is(n)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===s||e.pagination.el.contains(s)))return;var a;n?a=n.hasClass(e.params.navigation.hiddenClass):r&&(a=r.hasClass(e.params.navigation.hiddenClass)),!0===a?e.emit("navigationShow"):e.emit("navigationHide"),n&&n.toggleClass(e.params.navigation.hiddenClass),r&&r.toggleClass(e.params.navigation.hiddenClass)}}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){Z(this,{pagination:Ce({dynamicBulletIndex:0},Le)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},click:function(e,t){var i=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!j(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){Z(this,{scrollbar:Pe({isTouched:!1,timeout:null,dragTimeout:null},Re)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},destroy:function(e){e.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){Z(this,{parallax:ke({},Ie)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;Z(e,{zoom:Oe({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},De)});var t=1;Object.defineProperty(e.zoom,"scale",{get:function(){return t},set:function(i){if(t!==i){var n=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,r=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",i,n,r)}t=i}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){Z(this,{lazy:ze({initialImageLoaded:!1},Ne)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){e.params.lazy.enabled&&e.params.cssMode&&e.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){Z(this,{controller:Be({control:this.params.controller.control},Fe)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,i){e.controller.control&&e.controller.setTranslate(t,i)},setTransition:function(e,t,i){e.controller.control&&e.controller.setTransition(t,i)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null}},create:function(){Z(this,{a11y:He({},Ue,{liveRegion:j('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){Z(this,{history:Ve({},We)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},transitionEnd:function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){Z(this,{hashNavigation:Ge({initialized:!1},je)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},transitionEnd:function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){Z(this,{autoplay:qe({},Xe,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),A().addEventListener("visibilitychange",e.autoplay.onVisibilityChange))},beforeTransitionStart:function(e,t,i){e.autoplay.running&&(i||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.running&&e.autoplay.stop(),A().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){Z(this,{fadeEffect:Ye({},$e)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};J(e.params,t),J(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){Z(this,{cubeEffect:Je({},Ze)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};J(e.params,t),J(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){Z(this,{flipEffect:Qe({},Ke)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};J(e.params,t),J(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){Z(this,{coverflowEffect:et({},tt)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){Z(this,{thumbs:it({swiper:null,initialized:!1},nt)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var i=e.thumbs.swiper;i&&i.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}}];function st(e,t,i=!1){let{removeActiveOptions:r={},addActiveOptions:s={},clickOutsideRemoveActive:a=!1,clickOutsideEl:o=document,clickOutsideCallback:l=null,clickToggle:c=!1,allowMultipleActive:u=!1}=t||{};o!=document&&(o=n(o)[0]);let h=n(e),d=!1;a&&o.addEventListener("click",()=>{0==d&&(h.forEach(e=>e.removeActive(r)),"function"==typeof l&&l()),d=!1}),h.forEach(e=>{e.querySelector(".accordion-header").addEventListener("click",()=>{d=!0;const t=e.classList.contains("active");u||h.forEach(e=>e.removeActive(r)),c&&t?e.removeActive(r):e.addActive(s)})})}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}ye.use(rt);var lt,ct,ut,ht,dt,pt,ft,mt,gt,vt,yt,xt,bt,wt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_t={duration:.5,overwrite:!1,delay:0},Mt=1e8,St=2*Math.PI,Et=St/4,Tt=0,At=Math.sqrt,Ct=Math.cos,Lt=Math.sin,Pt=function(e){return"string"==typeof e},Rt=function(e){return"function"==typeof e},kt=function(e){return"number"==typeof e},It=function(e){return void 0===e},Ot=function(e){return"object"==typeof e},Dt=function(e){return!1!==e},zt=function(){return"undefined"!=typeof window},Nt=function(e){return Rt(e)||Pt(e)},Bt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Ft=Array.isArray,Ht=/(?:-?\.?\d|\.)+/gi,Ut=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Vt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Wt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Gt=/[+-]=-?[.\d]+/,jt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,qt=/[\d.+\-=]+(?:e[-+]\d*)*/i,Xt={},Yt={},$t=function(e){return(Yt=wi(e,Xt))&&rr},Jt=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Zt=function(e,t){return!t&&console.warn(e)},Qt=function(e,t){return e&&(Xt[e]=t)&&Yt&&(Yt[e]=t)||Xt},Kt=function(){return 0},ei={},ti=[],ii={},ni={},ri={},si=30,ai=[],oi="",li=function(e){var t,i,n=e[0];if(Ot(n)||Rt(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(i=ai.length;i--&&!ai[i].targetTest(n););t=ai[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Ln(e[i],t)))||e.splice(i,1);return e},ci=function(e){return e._gsap||li(Yi(e))[0]._gsap},ui=function(e,t,i){return(i=e[t])&&Rt(i)?e[t]():It(i)&&e.getAttribute&&e.getAttribute(t)||i},hi=function(e,t){return(e=e.split(",")).forEach(t)||e},di=function(e){return Math.round(1e5*e)/1e5||0},pi=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},fi=function(e,t,i){var n,r=kt(e[1]),s=(r?2:1)+(t<2?0:1),a=e[s];if(r&&(a.duration=e[1]),a.parent=i,t){for(n=a;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=Dt(i.vars.inherit)&&i.parent;a.immediateRender=Dt(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return a},mi=function(){var e,t,i=ti.length,n=ti.slice(0);for(ii={},ti.length=0,e=0;e<i;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},gi=function(e,t,i,n){ti.length&&mi(),e.render(t,i,n),ti.length&&mi()},vi=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(jt).length<2?t:Pt(e)?e.trim():e},yi=function(e){return e},xi=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},bi=function(e,t){for(var i in t)i in e||"duration"===i||"ease"===i||(e[i]=t[i])},wi=function(e,t){for(var i in t)e[i]=t[i];return e},_i=function e(t,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=Ot(i[n])?e(t[n]||(t[n]={}),i[n]):i[n]);return t},Mi=function(e,t){var i,n={};for(i in e)i in t||(n[i]=e[i]);return n},Si=function(e){var t=e.parent||ct,i=e.keyframes?bi:xi;if(Dt(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Ei=function(e,t,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=t._prev,s=t._next;r?r._next=s:e[i]===t&&(e[i]=s),s?s._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null},Ti=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ai=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Ci=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Li=function(e){return e._repeat?Pi(e._tTime,e=e.duration()+e._rDelay)*e:0},Pi=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Ri=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ki=function(e){return e._end=di(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},Ii=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=di(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ki(e),i._dirty||Ai(i,e)),e},Oi=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=Ri(e.rawTime(),t),(!t._dur||Wi(0,t.totalDuration(),i)-t._tTime>1e-8)&&t.render(i,!0)),Ai(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},Di=function(e,t,i,n){return t.parent&&Ti(t),t._start=di(i+t._delay),t._end=di(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),function(e,t,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var s,a=e[n];if(r)for(s=t[r];a&&a[r]>s;)a=a._prev;a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=a,t.parent=t._dp=e}(e,t,"_first","_last",e._sort?"_start":0),e._recent=t,n||Oi(e,t),e},zi=function(e,t){return(Xt.ScrollTrigger||Jt("scrollTrigger",t))&&Xt.ScrollTrigger.create(t,e)},Ni=function(e,t,i,n){return zn(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&ft!==gn.frame?(ti.push(e),e._lazy=[t,n],1):void 0:1},Bi=function(e,t,i,n){var r=e._repeat,s=di(t)||0,a=e._tTime/e._tDur;return a&&!n&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:di(s*(r+1)+e._rDelay*r):s,a&&!n?Ii(e,e._tTime=e._tDur*a):e.parent&&ki(e),i||Ai(e.parent,e),e},Fi=function(e){return e instanceof Rn?Ai(e):Bi(e,e._dur)},Hi={_start:0,endTime:Kt},Ui=function e(t,i){var n,r,s=t.labels,a=t._recent||Hi,o=t.duration()>=Mt?a.endTime(!1):t._dur;return Pt(i)&&(isNaN(i)||i in s)?"<"===(n=i.charAt(0))||">"===n?("<"===n?a._start:a.endTime(a._repeat>=0))+(parseFloat(i.substr(1))||0):(n=i.indexOf("="))<0?(i in s||(s[i]=o),s[i]):(r=+(i.charAt(n-1)+i.substr(n+1)),n>1?e(t,i.substr(0,n-1))+r:o+r):null==i?o:+i},Vi=function(e,t){return e||0===e?t(e):t},Wi=function(e,t,i){return i<e?e:i>t?t:i},Gi=function(e){if("string"!=typeof e)return"";var t=qt.exec(e);return t?e.substr(t.index+t[0].length):""},ji=[].slice,qi=function(e,t){return e&&Ot(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ot(e[0]))&&!e.nodeType&&e!==ut},Xi=function(e,t,i){return void 0===i&&(i=[]),e.forEach((function(e){var n;return Pt(e)&&!t||qi(e,1)?(n=i).push.apply(n,Yi(e)):i.push(e)}))||i},Yi=function(e,t){return!Pt(e)||t||!ht&&vn()?Ft(e)?Xi(e,t):qi(e)?ji.call(e,0):e?[e]:[]:ji.call(dt.querySelectorAll(e),0)},$i=function(e){return e.sort((function(){return.5-Math.random()}))},Ji=function(e){if(Rt(e))return e;var t=Ot(e)?e:{each:e},i=Sn(t.ease),n=t.from||0,r=parseFloat(t.base)||0,s={},a=n>0&&n<1,o=isNaN(n)||a,l=t.axis,c=n,u=n;return Pt(n)?c=u={center:.5,edges:.5,end:1}[n]||0:!a&&o&&(c=n[0],u=n[1]),function(e,a,h){var d,p,f,m,g,v,y,x,b,w=(h||t).length,_=s[w];if(!_){if(!(b="auto"===t.grid?0:(t.grid||[1,Mt])[1])){for(y=-Mt;y<(y=h[b++].getBoundingClientRect().left)&&b<w;);b--}for(_=s[w]=[],d=o?Math.min(b,w)*c-.5:n%b,p=o?w*u/b-.5:n/b|0,y=0,x=Mt,v=0;v<w;v++)f=v%b-d,m=p-(v/b|0),_[v]=g=l?Math.abs("y"===l?m:f):At(f*f+m*m),g>y&&(y=g),g<x&&(x=g);"random"===n&&$i(_),_.max=y-x,_.min=x,_.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===n?-1:1),_.b=w<0?r-w:r,_.u=Gi(t.amount||t.each)||0,i=i&&w<0?_n(i):i}return w=(_[e]-_.min)/_.max||0,di(_.b+(i?i(w):w)*_.v)+_.u}},Zi=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(i){var n=Math.round(parseFloat(i)/e)*e*t;return(n-n%1)/t+(kt(i)?0:Gi(i))}},Qi=function(e,t){var i,n,r=Ft(e);return!r&&Ot(e)&&(i=r=e.radius||Mt,e.values?(e=Yi(e.values),(n=!kt(e[0]))&&(i*=i)):e=Zi(e.increment)),Vi(t,r?Rt(e)?function(t){return n=e(t),Math.abs(n-t)<=i?n:t}:function(t){for(var r,s,a=parseFloat(n?t.x:t),o=parseFloat(n?t.y:0),l=Mt,c=0,u=e.length;u--;)(r=n?(r=e[u].x-a)*r+(s=e[u].y-o)*s:Math.abs(e[u]-a))<l&&(l=r,c=u);return c=!i||l<=i?e[c]:t,n||c===t||kt(t)?c:c+Gi(t)}:Zi(e))},Ki=function(e,t,i,n){return Vi(Ft(e)?!t:!0===i?!!(i=0):!n,(function(){return Ft(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*n)/n}))},en=function(e,t,i){return Vi(i,(function(i){return e[~~t(i)]}))},tn=function(e){for(var t,i,n,r,s=0,a="";~(t=e.indexOf("random(",s));)n=e.indexOf(")",t),r="["===e.charAt(t+7),i=e.substr(t+7,n-t-7).match(r?jt:Ht),a+=e.substr(s,t-s)+Ki(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),s=n+1;return a+e.substr(s,e.length-s)},nn=function(e,t,i,n,r){var s=t-e,a=n-i;return Vi(r,(function(t){return i+((t-e)/s*a||0)}))},rn=function(e,t,i){var n,r,s,a=e.labels,o=Mt;for(n in a)(r=a[n]-t)<0==!!i&&r&&o>(r=Math.abs(r))&&(s=n,o=r);return s},sn=function(e,t,i){var n,r,s=e.vars,a=s[t];if(a)return n=s[t+"Params"],r=s.callbackScope||e,i&&ti.length&&mi(),n?a.apply(r,n):a.call(r)},an=function(e){return Ti(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&sn(e,"onInterrupt"),e},on=function(e){var t=(e=!e.name&&e.default||e).name,i=Rt(e),n=t&&!i&&e.init?function(){this._props=[]}:e,r={init:Kt,render:$n,add:On,kill:Zn,modifier:Jn,rawVars:0},s={targetTest:0,get:0,getSetter:jn,aliases:{},register:0};if(vn(),e!==n){if(ni[t])return;xi(n,xi(Mi(e,r),s)),wi(n.prototype,wi(r,Mi(e,s))),ni[n.prop=t]=n,e.targetTest&&(ai.push(n),ei[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Qt(t,n),e.register&&e.register(rr,n,er)},ln={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},cn=function(e,t,i){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},un=function(e,t,i){var n,r,s,a,o,l,c,u,h,d,p=e?kt(e)?[e>>16,e>>8&255,255&e]:0:ln.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),ln[e])p=ln[e];else if("#"===e.charAt(0)){if(e.length<6&&(n=e.charAt(1),r=e.charAt(2),s=e.charAt(3),e="#"+n+n+r+r+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3))if(p=d=e.match(Ht),t){if(~e.indexOf("="))return p=e.match(Ut),i&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,n=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=cn(a+1/3,n,r),p[1]=cn(a,n,r),p[2]=cn(a-1/3,n,r);else p=e.match(Ht)||ln.transparent;p=p.map(Number)}return t&&!d&&(n=p[0]/255,r=p[1]/255,s=p[2]/255,l=((c=Math.max(n,r,s))+(u=Math.min(n,r,s)))/2,c===u?a=o=0:(h=c-u,o=l>.5?h/(2-c-u):h/(c+u),a=c===n?(r-s)/h+(r<s?6:0):c===r?(s-n)/h+2:(n-r)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),i&&p.length<4&&(p[3]=1),p},hn=function(e){var t=[],i=[],n=-1;return e.split(pn).forEach((function(e){var r=e.match(Vt)||[];t.push.apply(t,r),i.push(n+=r.length+1)})),t.c=i,t},dn=function(e,t,i){var n,r,s,a,o="",l=(e+o).match(pn),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=un(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),i&&(s=hn(e),(n=i.c).join(o)!==s.c.join(o)))for(a=(r=e.replace(pn,"1").split(Vt)).length-1;u<a;u++)o+=r[u]+(~n.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:i).shift());if(!r)for(a=(r=e.split(pn)).length-1;u<a;u++)o+=r[u]+l[u];return o+r[a]},pn=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in ln)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),fn=/hsl[a]?\(/,mn=function(e){var t,i=e.join(" ");if(pn.lastIndex=0,pn.test(i))return t=fn.test(i),e[1]=dn(e[1],t),e[0]=dn(e[0],t,hn(e[1])),!0},gn=function(){var e,t,i,n,r,s,a=Date.now,o=500,l=33,c=a(),u=c,h=1e3/240,d=h,p=[],f=function i(f){var m,g,v,y,x=a()-u,b=!0===f;if(x>o&&(c+=x-l),((m=(v=(u+=x)-c)-d)>0||b)&&(y=++n.frame,r=v-1e3*n.time,n.time=v/=1e3,d+=m+(m>=h?4:h-m),g=1),b||(e=t(i)),g)for(s=0;s<p.length;s++)p[s](v,r,y,f)};return n={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){pt&&(!ht&&zt()&&(ut=ht=window,dt=ut.document||{},Xt.gsap=rr,(ut.gsapVersions||(ut.gsapVersions=[])).push(rr.version),$t(Yt||ut.GreenSockGlobals||!ut.gsap&&ut||{}),i=ut.requestAnimationFrame),e&&n.sleep(),t=i||function(e){return setTimeout(e,d-1e3*n.time+1|0)},gt=1,f(2))},sleep:function(){(i?ut.cancelAnimationFrame:clearTimeout)(e),gt=0,t=Kt},lagSmoothing:function(e,t){o=e||1/1e-8,l=Math.min(t,o,0)},fps:function(e){h=1e3/(e||240),d=1e3*n.time+h},add:function(e){p.indexOf(e)<0&&p.push(e),vn()},remove:function(e){var t;~(t=p.indexOf(e))&&p.splice(t,1)&&s>=t&&s--},_listeners:p}}(),vn=function(){return!gt&&gn.wake()},yn={},xn=/^[\d.\-M][\d.\-,\s]/,bn=/["']/g,wn=function(e){for(var t,i,n,r={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)i=s[o],t=o!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,t),r[a]=isNaN(n)?n.replace(bn,"").trim():+n,a=i.substr(t+1).trim();return r},_n=function(e){return function(t){return 1-e(1-t)}},Mn=function e(t,i){for(var n,r=t._first;r;)r instanceof Rn?e(r,i):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===i||(r.timeline?e(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},Sn=function(e,t){return e&&(Rt(e)?e:yn[e]||function(e){var t,i,n,r,s=(e+"").split("("),a=yn[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[wn(s[1])]:(t=e,i=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",i),t.substring(i,~r&&r<n?t.indexOf(")",n+1):n)).split(",").map(vi)):yn._CE&&xn.test(e)?yn._CE("",e):a}(e))||t},En=function(e,t,i,n){void 0===i&&(i=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,s={easeIn:t,easeOut:i,easeInOut:n};return hi(e,(function(e){for(var t in yn[e]=Xt[e]=s,yn[r=e.toLowerCase()]=i,s)yn[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=yn[e+"."+t]=s[t]})),s},Tn=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},An=function e(t,i,n){var r=i>=1?i:1,s=(n||(t?.3:.45))/(i<1?i:1),a=s/St*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*Lt((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:Tn(o);return s=St/s,l.config=function(i,n){return e(t,i,n)},l},Cn=function e(t,i){void 0===i&&(i=1.70158);var n=function(e){return e?--e*e*((i+1)*e+i)+1:0},r="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:Tn(n);return r.config=function(i){return e(t,i)},r};hi("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var i=t<5?t+1:t;En(e+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},(function(e){return 1-Math.pow(1-e,i)}),(function(e){return e<.5?Math.pow(2*e,i)/2:1-Math.pow(2*(1-e),i)/2}))})),yn.Linear.easeNone=yn.none=yn.Linear.easeIn,En("Elastic",An("in"),An("out"),An()),vt=7.5625,xt=1/(yt=2.75),En("Bounce",(function(e){return 1-bt(1-e)}),bt=function(e){return e<xt?vt*e*e:e<.7272727272727273?vt*Math.pow(e-1.5/yt,2)+.75:e<.9090909090909092?vt*(e-=2.25/yt)*e+.9375:vt*Math.pow(e-2.625/yt,2)+.984375}),En("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),En("Circ",(function(e){return-(At(1-e*e)-1)})),En("Sine",(function(e){return 1===e?1:1-Ct(e*Et)})),En("Back",Cn("in"),Cn("out"),Cn()),yn.SteppedEase=yn.steps=Xt.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,n=e+(t?0:1),r=t?1:0;return function(e){return((n*Wi(0,1-1e-8,e)|0)+r)*i}}},_t.ease=yn["quad.out"],hi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return oi+=e+","+e+"Params,"}));var Ln=function(e,t){this.id=Tt++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ui,this.set=t?t.getSetter:jn},Pn=function(){function e(e,t){var i=e.parent||ct;this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Bi(this,+e.duration,1,1),this.data=e.data,gt||gn.wake(),i&&Di(i,this,t||0===t?t:i._time,1),e.reversed&&this.reverse(),e.paused&&this.paused(!0)}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Bi(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(vn(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Ii(this,e),!i._dp||i.parent||Oi(i,this);i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Di(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&1e-8===Math.abs(this._zTime)||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),gi(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Li(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Li(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,t):this._repeat?Pi(this._tTime,i)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Ri(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,Ci(this.totalTime(Wi(-this._delay,this._tDur,t),!0))},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(vn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Di(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Dt(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ri(t.rawTime(e),this):this._tTime:this._tTime},t.globalTime=function(e){for(var t=this,i=arguments.length?e:t.rawTime();t;)i=t._start+i/(t._ts||1),t=t._dp;return i},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Fi(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Fi(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Ui(this,e),Dt(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Dt(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,i=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<this.endTime(!0)-1e-8))},t.eventCallback=function(e,t,i){var n=this.vars;return arguments.length>1?(t?(n[e]=t,i&&(n[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this;return new Promise((function(i){var n=Rt(e)?e:yi,r=function(){var e=t.then;t.then=null,Rt(n)&&(n=n(t))&&(n.then||n===t)&&(t.then=e),i(n),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){an(this)},e}();xi(Pn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Rn=function(e){function t(t,i){var n;return void 0===t&&(t={}),(n=e.call(this,t,i)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=Dt(t.sortChildren),n.parent&&Oi(n.parent,at(n)),t.scrollTrigger&&zi(at(n),t.scrollTrigger),n}ot(t,e);var i=t.prototype;return i.to=function(e,t,i){return new Hn(e,fi(arguments,0,this),Ui(this,kt(t)?arguments[3]:i)),this},i.from=function(e,t,i){return new Hn(e,fi(arguments,1,this),Ui(this,kt(t)?arguments[3]:i)),this},i.fromTo=function(e,t,i,n){return new Hn(e,fi(arguments,2,this),Ui(this,kt(t)?arguments[4]:n)),this},i.set=function(e,t,i){return t.duration=0,t.parent=this,Si(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Hn(e,t,Ui(this,i),1),this},i.call=function(e,t,i){return Di(this,Hn.delayedCall(0,e,t),Ui(this,i))},i.staggerTo=function(e,t,i,n,r,s,a){return i.duration=t,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=a,i.parent=this,new Hn(e,i,Ui(this,r)),this},i.staggerFrom=function(e,t,i,n,r,s,a){return i.runBackwards=1,Si(i).immediateRender=Dt(i.immediateRender),this.staggerTo(e,t,i,n,r,s,a)},i.staggerFromTo=function(e,t,i,n,r,s,a,o){return n.startAt=i,Si(n).immediateRender=Dt(n.immediateRender),this.staggerTo(e,t,n,r,s,a,o)},i.render=function(e,t,i){var n,r,s,a,o,l,c,u,h,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==ct&&e>g-1e-8&&e>=0?g:e<1e-8?0:e,x=this._zTime<0!=e<0&&(this._initted||!v);if(y!==this._tTime||i||x){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),n=y,h=this._start,l=!(u=this._ts),x&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,i);if(n=di(y%o),y===g?(a=this._repeat,n=v):((a=~~(y/o))&&a===y/o&&(n=v,a--),n>v&&(n=v)),d=Pi(this._tTime,o),!m&&this._tTime&&d!==a&&(d=a),p&&1&a&&(n=v-n,f=1),a!==d&&!this._lock){var b=p&&1&d,w=b===(p&&1&a);if(a<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m||(f?0:di(a*o)),t,!v)._lock=0,!t&&this.parent&&sn(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,w&&(this._lock=2,m=b?v:-1e-4,this.render(m,!0)),this._lock=0,!this._ts&&!l)return this;Mn(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(!n._dur&&"isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(!n._dur&&"isPause"===n.data&&n._start<t)return n;n=n._prev}}(this,di(m),di(n)))&&(y-=n-(n=c._start)),this._tTime=y,this._time=n,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&n&&!t&&sn(this,"onStart"),n>=m&&e>=0)for(r=this._first;r;){if(s=r._next,(r._act||n>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,t,i),n!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var _=e<0?e:n;r;){if(s=r._prev,(r._act||_<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(_-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(_-r._start)*r._ts,t,i),n!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=_?-1e-8:1e-8);break}}r=s}}if(c&&!t&&(this.pause(),c.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=h,ki(this),this.render(e,t,i);this._onUpdate&&!t&&sn(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Ti(this,1),t||e<0&&!m||!y&&!m||(sn(this,y===g?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(e,t){var i=this;if(kt(t)||(t=Ui(this,t)),!(e instanceof Pn)){if(Ft(e))return e.forEach((function(e){return i.add(e,t)})),this;if(Pt(e))return this.addLabel(e,t);if(!Rt(e))return this;e=Hn.delayedCall(0,e)}return this!==e?Di(this,e,t):this},i.getChildren=function(e,t,i,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=-Mt);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof Hn?t&&r.push(s):(i&&r.push(s),e&&r.push.apply(r,s.getChildren(!0,t,i)))),s=s._next;return r},i.getById=function(e){for(var t=this.getChildren(1,1,1),i=t.length;i--;)if(t[i].vars.id===e)return t[i]},i.remove=function(e){return Pt(e)?this.removeLabel(e):Rt(e)?this.killTweensOf(e):(Ei(this,e),e===this._recent&&(this._recent=this._last),Ai(this))},i.totalTime=function(t,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=di(gn.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,i),this._forcing=0,this):this._tTime},i.addLabel=function(e,t){return this.labels[e]=Ui(this,t),this},i.removeLabel=function(e){return delete this.labels[e],this},i.addPause=function(e,t,i){var n=Hn.delayedCall(0,t||Kt,i);return n.data="isPause",this._hasPause=1,Di(this,n,Ui(this,e))},i.removePause=function(e){var t=this._first;for(e=Ui(this,e);t;)t._start===e&&"isPause"===t.data&&Ti(t),t=t._next},i.killTweensOf=function(e,t,i){for(var n=this.getTweensOf(e,i),r=n.length;r--;)kn!==n[r]&&n[r].kill(e,t);return this},i.getTweensOf=function(e,t){for(var i,n=[],r=Yi(e),s=this._first,a=kt(t);s;)s instanceof Hn?pi(s._targets,r)&&(a?(!kn||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&n.push(s):(i=s.getTweensOf(r,t)).length&&n.push.apply(n,i),s=s._next;return n},i.tweenTo=function(e,t){t=t||{};var i=this,n=Ui(i,e),r=t,s=r.startAt,a=r.onStart,o=r.onStartParams,l=r.immediateRender,c=Hn.to(i,xi({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:t.duration||Math.abs((n-(s&&"time"in s?s.time:i._time))/i.timeScale())||1e-8,onStart:function(){i.pause();var e=t.duration||Math.abs((n-i._time)/i.timeScale());c._dur!==e&&Bi(c,e,0,1).render(c._time,!0,!0),a&&a.apply(c,o||[])}},t));return l?c.render(0):c},i.tweenFromTo=function(e,t,i){return this.tweenTo(t,xi({startAt:{time:Ui(this,e)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(e){return void 0===e&&(e=this._time),rn(this,Ui(this,e))},i.previousLabel=function(e){return void 0===e&&(e=this._time),rn(this,Ui(this,e),1)},i.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(e,t,i){void 0===i&&(i=0);for(var n,r=this._first,s=this.labels;r;)r._start>=i&&(r._start+=e,r._end+=e),r=r._next;if(t)for(n in s)s[n]>=i&&(s[n]+=e);return Ai(this)},i.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},i.clear=function(e){void 0===e&&(e=!0);for(var t,i=this._first;i;)t=i._next,this.remove(i),i=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ai(this)},i.totalDuration=function(e){var t,i,n,r=0,s=this,a=s._last,o=Mt;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(n=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(i=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Di(s,a,i-a._delay,1)._lock=0):o=i,i<0&&a._ts&&(r-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-Infinity),o=0),a._end>r&&a._ts&&(r=a._end),a=t;Bi(s,s===ct&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(ct._ts&&(gi(ct,Ri(e,ct)),ft=gn.frame),gn.frame>=si){si+=wt.autoSleep||120;var t=ct._first;if((!t||!t._ts)&&wt.autoSleep&&gn._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||gn.sleep()}}},t}(Pn);xi(Rn.prototype,{_lock:0,_hasPause:0,_forcing:0});var kn,In=function(e,t,i,n,r,s,a){var o,l,c,u,h,d,p,f,m=new er(this._pt,e,t,0,1,Yn,null,r),g=0,v=0;for(m.b=i,m.e=n,i+="",(p=~(n+="").indexOf("random("))&&(n=tn(n)),s&&(s(f=[i,n],e,t),i=f[0],n=f[1]),l=i.match(Wt)||[];o=Wt.exec(n);)u=o[0],h=n.substring(g,o.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:c&&c<4?Math.round:0},g=Wt.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=a,(Gt.test(n)||p)&&(m.e=0),this._pt=m,m},On=function(e,t,i,n,r,s,a,o,l){Rt(n)&&(n=n(r||0,e,s));var c,u=e[t],h="get"!==i?i:Rt(u)?l?e[t.indexOf("set")||!Rt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,d=Rt(u)?l?Wn:Vn:Un;if(Pt(n)&&(~n.indexOf("random(")&&(n=tn(n)),"="===n.charAt(1)&&(n=parseFloat(h)+parseFloat(n.substr(2))*("-"===n.charAt(0)?-1:1)+(Gi(h)||0))),h!==n)return isNaN(h*n)?(!u&&!(t in e)&&Jt(t,n),In.call(this,e,t,h,n,d,o||wt.stringFilter,l)):(c=new er(this._pt,e,t,+h||0,n-(h||0),"boolean"==typeof u?Xn:qn,0,d),l&&(c.fp=l),a&&c.modifier(a,this,e),this._pt=c)},Dn=function(e,t,i,n,r,s){var a,o,l,c;if(ni[e]&&!1!==(a=new ni[e]).init(r,a.rawVars?t[e]:function(e,t,i,n,r){if(Rt(e)&&(e=Nn(e,r,t,i,n)),!Ot(e)||e.style&&e.nodeType||Ft(e)||Bt(e))return Pt(e)?Nn(e,r,t,i,n):e;var s,a={};for(s in e)a[s]=Nn(e[s],r,t,i,n);return a}(t[e],n,r,s,i),i,n,s)&&(i._pt=o=new er(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==mt))for(l=i._ptLookup[i._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=o;return a},zn=function e(t,i){var n,r,s,a,o,l,c,u,h,d,p,f,m,g=t.vars,v=g.ease,y=g.startAt,x=g.immediateRender,b=g.lazy,w=g.onUpdate,_=g.onUpdateParams,M=g.callbackScope,S=g.runBackwards,E=g.yoyoEase,T=g.keyframes,A=g.autoRevert,C=t._dur,L=t._startAt,P=t._targets,R=t.parent,k=R&&"nested"===R.data?R.parent._targets:P,I="auto"===t._overwrite&&!lt,O=t.timeline;if(O&&(!T||!v)&&(v="none"),t._ease=Sn(v,_t.ease),t._yEase=E?_n(Sn(!0===E?v:E,_t.ease)):0,E&&t._yoyo&&!t._repeat&&(E=t._yEase,t._yEase=t._ease,t._ease=E),!O){if(f=(u=P[0]?ci(P[0]).harness:0)&&g[u.prop],n=Mi(g,ei),L&&L.render(-1,!0).kill(),y)if(Ti(t._startAt=Hn.set(P,xi({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:Dt(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:_,callbackScope:M,stagger:0},y))),x){if(i>0)A||(t._startAt=0);else if(C&&!(i<0&&L))return void(i&&(t._zTime=i))}else!1===A&&(t._startAt=0);else if(S&&C)if(L)!A&&(t._startAt=0);else if(i&&(x=!1),s=xi({overwrite:!1,data:"isFromStart",lazy:x&&Dt(b),immediateRender:x,stagger:0,parent:R},n),f&&(s[u.prop]=f),Ti(t._startAt=Hn.set(P,s)),x){if(!i)return}else e(t._startAt,1e-8);for(t._pt=0,b=C&&Dt(b)||b&&!C,r=0;r<P.length;r++){if(c=(o=P[r])._gsap||li(P)[r]._gsap,t._ptLookup[r]=d={},ii[c.id]&&ti.length&&mi(),p=k===P?r:k.indexOf(o),u&&!1!==(h=new u).init(o,f||n,t,p,k)&&(t._pt=a=new er(t._pt,o,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){d[e]=a})),h.priority&&(l=1)),!u||f)for(s in n)ni[s]&&(h=Dn(s,n,t,p,o,k))?h.priority&&(l=1):d[s]=a=On.call(t,o,s,"get",n[s],p,k,0,g.stringFilter);t._op&&t._op[r]&&t.kill(o,t._op[r]),I&&t._pt&&(kn=t,ct.killTweensOf(o,d,t.globalTime(0)),m=!t.parent,kn=0),t._pt&&b&&(ii[c.id]=1)}l&&Kn(t),t._onInit&&t._onInit(t)}t._from=!O&&!!g.runBackwards,t._onUpdate=w,t._initted=(!t._op||t._pt)&&!m},Nn=function(e,t,i,n,r){return Rt(e)?e.call(t,i,n,r):Pt(e)&&~e.indexOf("random(")?tn(e):e},Bn=oi+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Fn=(Bn+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Hn=function(e){function t(t,i,n,r){var s;"number"==typeof i&&(n.duration=i,i=n,n=null);var a,o,l,c,u,h,d,p,f=(s=e.call(this,r?i:Si(i),n)||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,y=f.stagger,x=f.overwrite,b=f.keyframes,w=f.defaults,_=f.scrollTrigger,M=f.yoyoEase,S=s.parent,E=(Ft(t)||Bt(t)?kt(t[0]):"length"in i)?[t]:Yi(t);if(s._targets=E.length?li(E):Zt("GSAP target "+t+" not found. https://greensock.com",!wt.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,b||y||Nt(m)||Nt(g)){if(i=s.vars,(a=s.timeline=new Rn({data:"nested",defaults:w||{}})).kill(),a.parent=a._dp=at(s),a._start=0,b)xi(a.vars.defaults,{ease:"none"}),b.forEach((function(e){return a.to(E,e,">")}));else{if(c=E.length,d=y?Ji(y):Kt,Ot(y))for(u in y)~Bn.indexOf(u)&&(p||(p={}),p[u]=y[u]);for(o=0;o<c;o++){for(u in l={},i)Fn.indexOf(u)<0&&(l[u]=i[u]);l.stagger=0,M&&(l.yoyoEase=M),p&&wi(l,p),h=E[o],l.duration=+Nn(m,at(s),o,h,E),l.delay=(+Nn(g,at(s),o,h,E)||0)-s._delay,!y&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(h,l,d(o,h,E))}a.duration()?m=g=0:s.timeline=0}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==x||lt||(kn=at(s),ct.killTweensOf(E),kn=0),S&&Oi(S,at(s)),(v||!m&&!b&&s._start===di(S._time)&&Dt(v)&&function e(t){return!t||t._ts&&e(t.parent)}(at(s))&&"nested"!==S.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g))),_&&zi(at(s),_),s}ot(t,e);var i=t.prototype;return i.render=function(e,t,i){var n,r,s,a,o,l,c,u,h,d=this._time,p=this._tDur,f=this._dur,m=e>p-1e-8&&e>=0?p:e<1e-8?0:e;if(f){if(m!==this._tTime||!e||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(n=m,u=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,i);if(n=di(m%a),m===p?(s=this._repeat,n=f):((s=~~(m/a))&&s===m/a&&(n=f,s--),n>f&&(n=f)),(l=this._yoyo&&1&s)&&(h=this._yEase,n=f-n),o=Pi(this._tTime,a),n===d&&!i&&this._initted)return this;s!==o&&(u&&this._yEase&&Mn(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(di(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Ni(this,e<0?e:n,i,t))return this._tTime=0,this;if(f!==this._dur)return this.render(e,t,i)}for(this._tTime=m,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(n/f),this._from&&(this.ratio=c=1-c),n&&!d&&!t&&sn(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(e<0?e:!n&&l?-1e-8:u._dur*c,t,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,i),sn(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&sn(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Ti(this,1),t||e<0&&!d||!m&&!d||(sn(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,n){var r,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||e(i))}(e)||(e._ts<0||e._dp._ts<0)&&"isFromStart"!==e.data&&"isStart"!==e.data)?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=Wi(0,e._tDur,t),s=Pi(u,c),a=Pi(e._tTime,c),e._yoyo&&1&s&&(l=1-l),s!==a&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||n||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&Ni(e,t,n,i))return;for(a=e._zTime,e._zTime=t||(i?1e-8:0),i||(i=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,r=e._pt;r;)r.r(l,r.d),r=r._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!i&&sn(e,"onUpdate"),u&&e._repeat&&!i&&e.parent&&sn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Ti(e,1),i||(sn(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},i.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?an(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,kn&&!0!==kn.vars.overwrite)._first||an(this),this.parent&&i!==this.timeline.totalDuration()&&Bi(this,this._dur*this.timeline._tDur/i,0,1),this}var n,r,s,a,o,l,c,u=this._targets,h=e?Yi(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0}(u,h))return"all"===t&&(this._pt=0),an(this);for(n=this._op=this._op||[],"all"!==t&&(Pt(t)&&(o={},hi(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var i,n,r,s,a=e[0]?ci(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(n in i=wi({},t),o)if(n in i)for(r=(s=o[n].split(",")).length;r--;)i[s[r]]=i[n];return i}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(o in r=d[c],"all"===t?(n[c]=t,a=r,s={}):(s=n[c]=n[c]||{},a=t),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Ei(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&an(this),this},t.to=function(e,i){return new t(e,i,arguments[2])},t.from=function(e,i){return new t(e,fi(arguments,1))},t.delayedCall=function(e,i,n,r){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},t.fromTo=function(e,i,n){return new t(e,fi(arguments,2))},t.set=function(e,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(e,i)},t.killTweensOf=function(e,t,i){return ct.killTweensOf(e,t,i)},t}(Pn);xi(Hn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),hi("staggerTo,staggerFrom,staggerFromTo",(function(e){Hn[e]=function(){var t=new Rn,i=ji.call(arguments,0);return i.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,i)}}));var Un=function(e,t,i){return e[t]=i},Vn=function(e,t,i){return e[t](i)},Wn=function(e,t,i,n){return e[t](n.fp,i)},Gn=function(e,t,i){return e.setAttribute(t,i)},jn=function(e,t){return Rt(e[t])?Vn:It(e[t])&&e.setAttribute?Gn:Un},qn=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},Xn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Yn=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},$n=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Jn=function(e,t,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(e,t,i),s=r},Zn=function(e){for(var t,i,n=this._pt;n;)i=n._next,n.p===e&&!n.op||n.op===e?Ei(this,n,"_pt"):n.dep||(t=1),n=i;return!t},Qn=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},Kn=function(e){for(var t,i,n,r,s=e._pt;s;){for(t=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=t}e._pt=n},er=function(){function e(e,t,i,n,r,s,a,o,l){this.t=t,this.s=n,this.c=r,this.p=i,this.r=s||qn,this.d=a||this,this.set=o||Un,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,i){this.mSet=this.mSet||this.set,this.set=Qn,this.m=e,this.mt=i,this.tween=t},e}();hi(oi+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return ei[e]=1})),Xt.TweenMax=Xt.TweenLite=Hn,Xt.TimelineLite=Xt.TimelineMax=Rn,ct=new Rn({sortChildren:!1,defaults:_t,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),wt.stringFilter=mn;var tr={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((function(e){return on(e)}))},timeline:function(e){return new Rn(e)},getTweensOf:function(e,t){return ct.getTweensOf(e,t)},getProperty:function(e,t,i,n){Pt(e)&&(e=Yi(e)[0]);var r=ci(e||{}).get,s=i?yi:vi;return"native"===i&&(i=""),e?t?s((ni[t]&&ni[t].get||r)(e,t,i,n)):function(t,i,n){return s((ni[t]&&ni[t].get||r)(e,t,i,n))}:e},quickSetter:function(e,t,i){if((e=Yi(e)).length>1){var n=e.map((function(e){return rr.quickSetter(e,t,i)})),r=n.length;return function(e){for(var t=r;t--;)n[t](e)}}e=e[0]||{};var s=ni[t],a=ci(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var n=new s;mt._pt=0,n.init(e,i?t+i:t,mt,0,[e]),n.render(1,n),mt._pt&&$n(1,mt)}:a.set(e,o);return s?l:function(t){return l(e,o,i?t+i:t,a,1)}},isTweening:function(e){return ct.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Sn(e.ease,_t.ease)),_i(_t,e||{})},config:function(e){return _i(wt,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,r=e.defaults,s=e.extendTimeline;(n||"").split(",").forEach((function(e){return e&&!ni[e]&&!Xt[e]&&Zt(t+" effect requires "+e+" plugin.")})),ri[t]=function(e,t,n){return i(Yi(e),xi(t||{},r),n)},s&&(Rn.prototype[t]=function(e,i,n){return this.add(ri[t](e,Ot(i)?i:(n=i)&&{},this),n)})},registerEase:function(e,t){yn[e]=Sn(t)},parseEase:function(e,t){return arguments.length?Sn(e,t):yn},getById:function(e){return ct.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,n,r=new Rn(e);for(r.smoothChildTiming=Dt(e.smoothChildTiming),ct.remove(r),r._dp=0,r._time=r._tTime=ct._time,i=ct._first;i;)n=i._next,!t&&!i._dur&&i instanceof Hn&&i.vars.onComplete===i._targets[0]||Di(r,i,i._start-i._delay),i=n;return Di(ct,r,0),r},utils:{wrap:function e(t,i,n){var r=i-t;return Ft(t)?en(t,e(0,t.length),i):Vi(n,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,i,n){var r=i-t,s=2*r;return Ft(t)?en(t,e(0,t.length-1),i):Vi(n,(function(e){return t+((e=(s+(e-t)%s)%s||0)>r?s-e:e)}))},distribute:Ji,random:Ki,snap:Qi,normalize:function(e,t,i){return nn(e,t,0,1,i)},getUnit:Gi,clamp:function(e,t,i){return Vi(i,(function(i){return Wi(e,t,i)}))},splitColor:un,toArray:Yi,mapRange:nn,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||Gi(i))}},interpolate:function e(t,i,n,r){var s=isNaN(t+i)?0:function(e){return(1-e)*t+e*i};if(!s){var a,o,l,c,u,h=Pt(t),d={};if(!0===n&&(r=1)&&(n=null),h)t={p:t},i={p:i};else if(Ft(t)&&!Ft(i)){for(l=[],c=t.length,u=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},n=i}else r||(t=wi(Ft(t)?[]:{},t));if(!l){for(a in i)On.call(d,t,a,"get",i[a]);s=function(e){return $n(e,d)||(h?t.p:t)}}}return Vi(n,s)},shuffle:$i},install:$t,effects:ri,ticker:gn,updateRoot:Rn.updateRoot,plugins:ni,globalTimeline:ct,core:{PropTween:er,globals:Qt,Tween:Hn,Timeline:Rn,Animation:Pn,getCache:ci,_removeLinkedListItem:Ei,suppressOverwrites:function(e){return lt=e}}};hi("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return tr[e]=Hn[e]})),gn.add(Rn.updateRoot),mt=tr.to({},{duration:0});var ir=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},nr=function(e,t){return{name:e,rawVars:1,init:function(e,i,n){n._onInit=function(e){var n,r;if(Pt(i)&&(n={},hi(i,(function(e){return n[e]=1})),i=n),t){for(r in n={},i)n[r]=t(i[r]);i=n}!function(e,t){var i,n,r,s=e._targets;for(i in t)for(n=s.length;n--;)(r=e._ptLookup[n][i])&&(r=r.d)&&(r._pt&&(r=ir(r,i)),r&&r.modifier&&r.modifier(t[i],e,s[n],i))}(e,i)}}}},rr=tr.registerPlugin({name:"attr",init:function(e,t,i,n,r){var s,a;for(s in t)(a=this.add(e,"setAttribute",(e.getAttribute(s)||0)+"",t[s],n,r,0,0,s))&&(a.op=s),this._props.push(s)}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i])}},nr("roundProps",Zi),nr("modifiers"),nr("snap",Qi))||tr;Hn.version=Rn.version=rr.version="3.6.1",pt=1,zt()&&vn();yn.Power0,yn.Power1,yn.Power2,yn.Power3;var sr,ar,or,lr,cr,ur,hr,dr=yn.Power4,pr=(yn.Linear,yn.Quad,yn.Cubic,yn.Quart,yn.Quint,yn.Strong,yn.Elastic,yn.Back,yn.SteppedEase,yn.Bounce,yn.Sine,yn.Expo,yn.Circ,{}),fr=180/Math.PI,mr=Math.PI/180,gr=Math.atan2,vr=/([A-Z])/g,yr=/(?:left|right|width|margin|padding|x)/i,xr=/[\s,\(]\S/,br={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},wr=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},_r=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Mr=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Sr=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Er=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Tr=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Ar=function(e,t,i){return e.style[t]=i},Cr=function(e,t,i){return e.style.setProperty(t,i)},Lr=function(e,t,i){return e._gsap[t]=i},Pr=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Rr=function(e,t,i,n,r){var s=e._gsap;s.scaleX=s.scaleY=i,s.renderTransform(r,s)},kr=function(e,t,i,n,r){var s=e._gsap;s[t]=i,s.renderTransform(r,s)},Ir="transform",Or=Ir+"Origin",Dr=function(e,t){var i=ar.createElementNS?ar.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ar.createElement(e);return i.style?i:ar.createElement(e)},zr=function e(t,i,n){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(vr,"-$1").toLowerCase())||r.getPropertyValue(i)||!n&&e(t,Br(i)||i,1)||""},Nr="O,Moz,ms,Ms,Webkit".split(","),Br=function(e,t,i){var n=(t||cr).style,r=5;if(e in n&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(Nr[r]+e in n););return r<0?null:(3===r?"ms":r>=0?Nr[r]:"")+e},Fr=function(){"undefined"!=typeof window&&window.document&&(sr=window,ar=sr.document,or=ar.documentElement,cr=Dr("div")||{style:{}},Dr("div"),Ir=Br(Ir),Or=Ir+"Origin",cr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",hr=!!Br("perspective"),lr=1)},Hr=function e(t){var i,n=Dr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(or.appendChild(n),n.appendChild(this),this.style.display="block",t)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(i=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),or.removeChild(n),this.style.cssText=a,i},Ur=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Vr=function(e){var t;try{t=e.getBBox()}catch(i){t=Hr.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Hr||(t=Hr.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Ur(e,["x","cx","x1"])||0,y:+Ur(e,["y","cy","y1"])||0,width:0,height:0}},Wr=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Vr(e))},Gr=function(e,t){if(t){var i=e.style;t in pr&&t!==Or&&(t=Ir),i.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),i.removeProperty(t.replace(vr,"-$1").toLowerCase())):i.removeAttribute(t)}},jr=function(e,t,i,n,r,s){var a=new er(e._pt,t,i,0,1,s?Tr:Er);return e._pt=a,a.b=n,a.e=r,e._props.push(i),a},qr={deg:1,rad:1,turn:1},Xr=function e(t,i,n,r){var s,a,o,l,c=parseFloat(n)||0,u=(n+"").trim().substr((c+"").length)||"px",h=cr.style,d=yr.test(i),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m="px"===r,g="%"===r;return r===u||!c||qr[r]||qr[u]?c:("px"!==u&&!m&&(c=e(t,i,n,"px")),l=t.getCTM&&Wr(t),!g&&"%"!==u||!pr[i]&&!~i.indexOf("adius")?(h[d?"width":"height"]=100+(m?u:r),a=~i.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==ar&&a.appendChild||(a=ar.body),(o=a._gsap)&&g&&o.width&&d&&o.time===gn.time?di(c/o.width*100):((g||"%"===u)&&(h.position=zr(t,"position")),a===t&&(h.position="static"),a.appendChild(cr),s=cr[f],a.removeChild(cr),h.position="absolute",d&&g&&((o=ci(a)).time=gn.time,o.width=a[f]),di(m?s*c/100:s&&c?100/s*c:0))):(s=l?t.getBBox()[d?"width":"height"]:t[f],di(g?c/s*100:c/100*s)))},Yr=function(e,t,i,n){var r;return lr||Fr(),t in br&&"transform"!==t&&~(t=br[t]).indexOf(",")&&(t=t.split(",")[0]),pr[t]&&"transform"!==t?(r=ss(e,n),r="transformOrigin"!==t?r[t]:as(zr(e,Or))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||n||~(r+"").indexOf("calc("))&&(r=Qr[t]&&Qr[t](e,t,i)||zr(e,t)||ui(e,t)||("opacity"===t?1:0)),i&&!~(r+"").trim().indexOf(" ")?Xr(e,t,r,i)+i:r},$r=function(e,t,i,n){if(!i||"none"===i){var r=Br(t,e,1),s=r&&zr(e,r,1);s&&s!==i?(t=r,i=s):"borderColor"===t&&(i=zr(e,"borderTopColor"))}var a,o,l,c,u,h,d,p,f,m,g,v,y=new er(this._pt,e.style,t,0,1,Yn),x=0,b=0;if(y.b=i,y.e=n,i+="","auto"===(n+="")&&(e.style[t]=n,n=zr(e,t)||n,e.style[t]=i),mn(a=[i,n]),n=a[1],l=(i=a[0]).match(Vt)||[],(n.match(Vt)||[]).length){for(;o=Vt.exec(n);)d=o[0],f=n.substring(x,o.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(h=l[b++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),x=Vt.lastIndex-m.length,m||(m=m||wt.units[t]||g,x===n.length&&(n+=m,y.e+=m)),g!==m&&(c=Xr(e,t,h,m)||0),y._pt={_next:y._pt,p:f||1===b?f:",",s:c,c:v?v*p:p-c,m:u&&u<4||"zIndex"===t?Math.round:0});y.c=x<n.length?n.substring(x,n.length):""}else y.r="display"===t&&"none"===n?Tr:Er;return Gt.test(n)&&(y.e=0),this._pt=y,y},Jr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Zr=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i,n,r,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(r=(o=o.split(",")).length;--r>-1;)i=o[r],pr[i]&&(n=1,i="transformOrigin"===i?Or:Ir),Gr(s,i);n&&(Gr(s,Ir),l&&(l.svg&&s.removeAttribute("transform"),ss(s,1),l.uncache=1))}},Qr={clearProps:function(e,t,i,n,r){if("isFromStart"!==r.data){var s=e._pt=new er(e._pt,t,i,0,0,Zr);return s.u=n,s.pr=-10,s.tween=r,e._props.push(i),1}}},Kr=[1,0,0,1,0,0],es={},ts=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},is=function(e){var t=zr(e,Ir);return ts(t)?Kr:t.substr(7).match(Ut).map(di)},ns=function(e,t){var i,n,r,s,a=e._gsap||ci(e),o=e.style,l=is(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Kr:l:(l!==Kr||e.offsetParent||e===or||a.svg||(r=o.display,o.display="block",(i=e.parentNode)&&e.offsetParent||(s=1,n=e.nextSibling,or.appendChild(e)),l=is(e),r?o.display=r:Gr(e,"display"),s&&(n?i.insertBefore(e,n):i?i.appendChild(e):or.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},rs=function(e,t,i,n,r,s){var a,o,l,c=e._gsap,u=r||ns(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],x=u[4],b=u[5],w=t.split(" "),_=parseFloat(w[0])||0,M=parseFloat(w[1])||0;i?u!==Kr&&(o=m*y-g*v)&&(l=_*(-g/o)+M*(m/o)-(m*b-g*x)/o,_=_*(y/o)+M*(-v/o)+(v*b-y*x)/o,M=l):(_=(a=Vr(e)).x+(~w[0].indexOf("%")?_/100*a.width:_),M=a.y+(~(w[1]||w[0]).indexOf("%")?M/100*a.height:M)),n||!1!==n&&c.smooth?(x=_-h,b=M-d,c.xOffset=p+(x*m+b*v)-x,c.yOffset=f+(x*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=_,c.yOrigin=M,c.smooth=!!n,c.origin=t,c.originIsAbsolute=!!i,e.style[Or]="0px 0px",s&&(jr(s,c,"xOrigin",h,_),jr(s,c,"yOrigin",d,M),jr(s,c,"xOffset",p,c.xOffset),jr(s,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",_+" "+M)},ss=function(e,t){var i=e._gsap||new Ln(e);if("x"in i&&!t&&!i.uncache)return i;var n,r,s,a,o,l,c,u,h,d,p,f,m,g,v,y,x,b,w,_,M,S,E,T,A,C,L,P,R,k,I,O,D=e.style,z=i.scaleX<0,N=zr(e,Or)||"0";return n=r=s=l=c=u=h=d=p=0,a=o=1,i.svg=!(!e.getCTM||!Wr(e)),g=ns(e,i.svg),i.svg&&(T=!i.uncache&&!t&&e.getAttribute("data-svg-origin"),rs(e,T||N,!!T||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==Kr&&(b=g[0],w=g[1],_=g[2],M=g[3],n=S=g[4],r=E=g[5],6===g.length?(a=Math.sqrt(b*b+w*w),o=Math.sqrt(M*M+_*_),l=b||w?gr(w,b)*fr:0,(h=_||M?gr(_,M)*fr+l:0)&&(o*=Math.abs(Math.cos(h*mr))),i.svg&&(n-=f-(f*b+m*_),r-=m-(f*w+m*M))):(O=g[6],k=g[7],L=g[8],P=g[9],R=g[10],I=g[11],n=g[12],r=g[13],s=g[14],c=(v=gr(O,R))*fr,v&&(T=S*(y=Math.cos(-v))+L*(x=Math.sin(-v)),A=E*y+P*x,C=O*y+R*x,L=S*-x+L*y,P=E*-x+P*y,R=O*-x+R*y,I=k*-x+I*y,S=T,E=A,O=C),u=(v=gr(-_,R))*fr,v&&(y=Math.cos(-v),I=M*(x=Math.sin(-v))+I*y,b=T=b*y-L*x,w=A=w*y-P*x,_=C=_*y-R*x),l=(v=gr(w,b))*fr,v&&(T=b*(y=Math.cos(v))+w*(x=Math.sin(v)),A=S*y+E*x,w=w*y-b*x,E=E*y-S*x,b=T,S=A),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),a=di(Math.sqrt(b*b+w*w+_*_)),o=di(Math.sqrt(E*E+O*O)),v=gr(S,E),h=Math.abs(v)>2e-4?v*fr:0,p=I?1/(I<0?-I:I):0),i.svg&&(T=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!ts(zr(e,Ir)),T&&e.setAttribute("transform",T))),Math.abs(h)>90&&Math.abs(h)<270&&(z?(a*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),i.x=n-((i.xPercent=n&&(i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+"px",i.y=r-((i.yPercent=r&&(i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+"px",i.z=s+"px",i.scaleX=di(a),i.scaleY=di(o),i.rotation=di(l)+"deg",i.rotationX=di(c)+"deg",i.rotationY=di(u)+"deg",i.skewX=h+"deg",i.skewY=d+"deg",i.transformPerspective=p+"px",(i.zOrigin=parseFloat(N.split(" ")[2])||0)&&(D[Or]=as(N)),i.xOffset=i.yOffset=0,i.force3D=wt.force3D,i.renderTransform=i.svg?us:hr?cs:ls,i.uncache=0,i},as=function(e){return(e=e.split(" "))[0]+" "+e[1]},os=function(e,t,i){var n=Gi(t);return di(parseFloat(t)+parseFloat(Xr(e,"x",i+"px",n)))+n},ls=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,cs(e,t)},cs=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,s=i.x,a=i.y,o=i.z,l=i.rotation,c=i.rotationY,u=i.rotationX,h=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,v=i.target,y=i.zOrigin,x="",b="auto"===g&&e&&1!==e||!0===g;if(y&&("0deg"!==u||"0deg"!==c)){var w,_=parseFloat(c)*mr,M=Math.sin(_),S=Math.cos(_);_=parseFloat(u)*mr,w=Math.cos(_),s=os(v,s,M*w*-y),a=os(v,a,-Math.sin(_)*-y),o=os(v,o,S*w*-y+y)}"0px"!==m&&(x+="perspective("+m+") "),(n||r)&&(x+="translate("+n+"%, "+r+"%) "),(b||"0px"!==s||"0px"!==a||"0px"!==o)&&(x+="0px"!==o||b?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+") "),"0deg"!==l&&(x+="rotate("+l+") "),"0deg"!==c&&(x+="rotateY("+c+") "),"0deg"!==u&&(x+="rotateX("+u+") "),"0deg"===h&&"0deg"===d||(x+="skew("+h+", "+d+") "),1===p&&1===f||(x+="scale("+p+", "+f+") "),v.style[Ir]=x||"translate(0, 0)"},us=function(e,t){var i,n,r,s,a,o=t||this,l=o.xPercent,c=o.yPercent,u=o.x,h=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,y=o.xOrigin,x=o.yOrigin,b=o.xOffset,w=o.yOffset,_=o.forceCSS,M=parseFloat(u),S=parseFloat(h);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=mr,p*=mr,i=Math.cos(d)*m,n=Math.sin(d)*m,r=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=mr,a=Math.tan(p-f),r*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),i*=a=Math.sqrt(1+a*a),n*=a)),i=di(i),n=di(n),r=di(r),s=di(s)):(i=m,s=g,n=r=0),(M&&!~(u+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(M=Xr(v,"x",u,"px"),S=Xr(v,"y",h,"px")),(y||x||b||w)&&(M=di(M+y-(y*i+x*r)+b),S=di(S+x-(y*n+x*s)+w)),(l||c)&&(a=v.getBBox(),M=di(M+l/100*a.width),S=di(S+c/100*a.height)),a="matrix("+i+","+n+","+r+","+s+","+M+","+S+")",v.setAttribute("transform",a),_&&(v.style[Ir]=a)},hs=function(e,t,i,n,r,s){var a,o,l=Pt(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?fr:1),u=s?c*s:c-n,h=n+u+"deg";return l&&("short"===(a=r.split("_")[1])&&(u%=360)!==u%180&&(u+=u<0?360:-360),"cw"===a&&u<0?u=(u+36e9)%360-360*~~(u/360):"ccw"===a&&u>0&&(u=(u-36e9)%360-360*~~(u/360))),e._pt=o=new er(e._pt,t,i,n,u,_r),o.e=h,o.u="deg",e._props.push(i),o},ds=function(e,t){for(var i in t)e[i]=t[i];return e},ps=function(e,t,i){var n,r,s,a,o,l,c,u=ds({},i._gsap),h=i.style;for(r in u.svg?(s=i.getAttribute("transform"),i.setAttribute("transform",""),h[Ir]=t,n=ss(i,1),Gr(i,Ir),i.setAttribute("transform",s)):(s=getComputedStyle(i)[Ir],h[Ir]=t,n=ss(i,1),h[Ir]=s),pr)(s=u[r])!==(a=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=Gi(s)!==(c=Gi(a))?Xr(i,r,s,c):parseFloat(s),l=parseFloat(a),e._pt=new er(e._pt,n,r,o,l-o,wr),e._pt.u=c||0,e._props.push(r));ds(n,u)};hi("padding,margin,Width,Radius",(function(e,t){var i="Top",n="Right",r="Bottom",s="Left",a=(t<3?[i,n,r,s]:[i+s,i+n,r+n,r+s]).map((function(i){return t<2?e+i:"border"+i+e}));Qr[t>1?"border"+e:e]=function(e,t,i,n,r){var s,o;if(arguments.length<4)return s=a.map((function(t){return Yr(e,t,i)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(n+"").split(" "),o={},a.forEach((function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,o,r)}}));var fs,ms,gs={name:"css",register:Fr,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var s,a,o,l,c,u,h,d,p,f,m,g,v,y,x,b,w,_,M,S=this._props,E=e.style,T=i.vars.startAt;for(h in lr||Fr(),t)if("autoRound"!==h&&(a=t[h],!ni[h]||!Dn(h,t,i,n,e,r)))if(c=typeof a,u=Qr[h],"function"===c&&(c=typeof(a=a.call(i,n,e,r))),"string"===c&&~a.indexOf("random(")&&(a=tn(a)),u)u(this,e,h,a,i)&&(x=1);else if("--"===h.substr(0,2))s=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",pn.lastIndex=0,pn.test(s)||(d=Gi(s),p=Gi(a)),p?d!==p&&(s=Xr(e,h,s,p)+p):d&&(a+=d),this.add(E,"setProperty",s,a,n,r,0,0,h);else if("undefined"!==c){if(T&&h in T?(s="function"==typeof T[h]?T[h].call(i,n,e,r):T[h],h in wt.units&&!Gi(s)&&(s+=wt.units[h]),"="===(s+"").charAt(1)&&(s=Yr(e,h))):s=Yr(e,h),l=parseFloat(s),(f="string"===c&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),h in br&&("autoAlpha"===h&&(1===l&&"hidden"===Yr(e,"visibility")&&o&&(l=0),jr(this,E,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=br[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in pr)if(g||((v=e._gsap).renderTransform&&!t.parseTransform||ss(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new er(this._pt,E,Ir,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new er(this._pt,v,"scaleY",v.scaleY,f?f*o:o-v.scaleY),S.push("scaleY",h),h+="X";else{if("transformOrigin"===h){w=void 0,_=void 0,M=void 0,w=(b=a).split(" "),_=w[0],M=w[1]||"50%","top"!==_&&"bottom"!==_&&"left"!==M&&"right"!==M||(b=_,_=M,M=b),w[0]=Jr[_]||_,w[1]=Jr[M]||M,a=w.join(" "),v.svg?rs(e,a,0,y,0,this):((p=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&jr(this,v,"zOrigin",v.zOrigin,p),jr(this,E,h,as(s),as(a)));continue}if("svgOrigin"===h){rs(e,a,1,y,0,this);continue}if(h in es){hs(this,v,h,l,a,f);continue}if("smoothOrigin"===h){jr(this,v,"smooth",v.smooth,a);continue}if("force3D"===h){v[h]=a;continue}if("transform"===h){ps(this,a,e);continue}}else h in E||(h=Br(h)||h);if(m||(o||0===o)&&(l||0===l)&&!xr.test(a)&&h in E)o||(o=0),(d=(s+"").substr((l+"").length))!==(p=Gi(a)||(h in wt.units?wt.units[h]:d))&&(l=Xr(e,h,s,p)),this._pt=new er(this._pt,m?v:E,h,l,f?f*o:o-l,m||"px"!==p&&"zIndex"!==h||!1===t.autoRound?wr:Sr),this._pt.u=p||0,d!==p&&(this._pt.b=s,this._pt.r=Mr);else if(h in E)$r.call(this,e,h,s,a);else{if(!(h in e)){Jt(h,a);continue}this.add(e,h,e[h],a,n,r)}S.push(h)}x&&Kn(this)},get:Yr,aliases:br,getSetter:function(e,t,i){var n=br[t];return n&&n.indexOf(",")<0&&(t=n),t in pr&&t!==Or&&(e._gsap.x||Yr(e,"x"))?i&&ur===i?"scale"===t?Pr:Lr:(ur=i||{})&&("scale"===t?Rr:kr):e.style&&!It(e.style[t])?Ar:~t.indexOf("-")?Cr:jn(e,t)},core:{_removeProperty:Gr,_getMatrix:ns}};rr.utils.checkPrefix=Br,ms=hi("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(fs="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){pr[e]=1})),hi(fs,(function(e){wt.units[e]="deg",es[e]=1})),br[ms[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+fs,hi("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");br[t[1]]=ms[t[0]]})),hi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){wt.units[e]="px"})),rr.registerPlugin(gs);var vs,ys,xs,bs,ws,_s,Ms,Ss,Es,Ts,As,Cs,Ls,Ps,Rs,ks,Is,Os,Ds,zs,Ns,Bs,Fs,Hs,Us,Vs,Ws,Gs=rr.registerPlugin(gs)||rr,js=(Gs.core.Tween,1),qs=[],Xs=[],Ys=Date.now,$s=Ys(),Js=0,Zs=1,Qs=function(e){return e},Ks=function(e){return Math.round(1e5*e)/1e5||0},ea=function(){return"undefined"!=typeof window},ta=function(){return vs||ea()&&(vs=window.gsap)&&vs.registerPlugin&&vs},ia=function(e){return!!~Ms.indexOf(e)},na=function(e,t){return~qs.indexOf(e)&&qs[qs.indexOf(e)+1][t]},ra=function(e,t){var i=t.s,n=t.sc,r=Xs.indexOf(e),s=n===ya.sc?1:2;return!~r&&(r=Xs.push(e)-1),Xs[r+s]||(Xs[r+s]=na(e,i)||(ia(e)?n:function(t){return arguments.length?e[i]=t:e[i]}))},sa=function(e){return na(e,"getBoundingClientRect")||(ia(e)?function(){return no.width=xs.innerWidth,no.height=xs.innerHeight,no}:function(){return wa(e)})},aa=function(e,t){var i=t.s,n=t.d2,r=t.d,s=t.a;return(i="scroll"+n)&&(s=na(e,i))?s()-sa(e)()[r]:ia(e)?Math.max(ws[i],_s[i])-(xs["inner"+n]||ws["client"+n]||_s["client"+n]):e[i]-e["offset"+n]},oa=function(e,t){for(var i=0;i<Ns.length;i+=3)(!t||~t.indexOf(Ns[i+1]))&&e(Ns[i],Ns[i+1],Ns[i+2])},la=function(e){return"string"==typeof e},ca=function(e){return"function"==typeof e},ua=function(e){return"number"==typeof e},ha=function(e){return"object"==typeof e},da=function(e){return ca(e)&&e()},pa=function(e,t){return function(){var i=da(e),n=da(t);return function(){da(i),da(n)}}},fa=Math.abs,ma="padding",ga="px",va={s:"scrollLeft",p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:function(e){return arguments.length?xs.scrollTo(e,ya.sc()):xs.pageXOffset||bs.scrollLeft||ws.scrollLeft||_s.scrollLeft||0}},ya={s:"scrollTop",p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:va,sc:function(e){return arguments.length?xs.scrollTo(va.sc(),e):xs.pageYOffset||bs.scrollTop||ws.scrollTop||_s.scrollTop||0}},xa=function(e){return xs.getComputedStyle(e)},ba=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},wa=function(e,t){var i=t&&"matrix(1, 0, 0, 1, 0, 0)"!==xa(e)[Is]&&vs.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},_a=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},Ma=function(e){var t,i=[],n=e.labels,r=e.duration();for(t in n)i.push(n[t]/r);return i},Sa=function(e,t,i,n){return i.split(",").forEach((function(i){return e(t,i,n)}))},Ea=function(e,t,i){return e.addEventListener(t,i,{passive:!0})},Ta=function(e,t,i){return e.removeEventListener(t,i)},Aa={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ca={toggleActions:"play",anticipatePin:0},La={top:0,left:0,center:.5,bottom:1,right:1},Pa=function(e,t){if(la(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in La?La[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Ra=function(e,t,i,n,r,s,a){var o=r.startColor,l=r.endColor,c=r.fontSize,u=r.indent,h=r.fontWeight,d=bs.createElement("div"),p=ia(i)||"fixed"===na(i,"pinType"),f=-1!==e.indexOf("scroller"),m=p?_s:i,g=-1!==e.indexOf("start"),v=g?o:l,y="border-color:"+v+";font-size:"+c+";color:"+v+";font-weight:"+h+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return y+="position:"+(f&&p?"fixed;":"absolute;"),(f||!p)&&(y+=(n===ya?"right":"bottom")+":"+(s+parseFloat(u))+"px;"),a&&(y+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),d._isStart=g,d.setAttribute("class","gsap-marker-"+e),d.style.cssText=y,d.innerText=t||0===t?e+"-"+t:e,m.children[0]?m.insertBefore(d,m.children[0]):m.appendChild(d),d._offset=d["offset"+n.op.d2],ka(d,0,n,g),d},ka=function(e,t,i,n){var r={display:"block"},s=i[n?"os2":"p2"],a=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+s+"Width"]=1,r["border"+a+"Width"]=0,r[i.p]=t+"px",vs.set(e,r)},Ia=[],Oa={},Da=function(){return Ts||(Ts=Es(Ja))},za=function(){Ts||(Ts=Es(Ja),Js||Wa("scrollStart"),Js=Ys())},Na=function(){return!Rs&&!Hs&&!bs.fullscreenElement&&Ss.restart(!0)},Ba={},Fa=[],Ha=[],Ua=function(e){var t,i=vs.ticker.frame,n=[],r=0;if(Ws!==i||js){for(qa();r<Ha.length;r+=4)(t=xs.matchMedia(Ha[r]).matches)!==Ha[r+3]&&(Ha[r+3]=t,t?n.push(r):qa(1,Ha[r])||ca(Ha[r+2])&&Ha[r+2]());for(ja(),r=0;r<n.length;r++)t=n[r],Vs=Ha[t],Ha[t+2]=Ha[t+1](e);Vs=0,ys&&Xa(0,1),Ws=i,Wa("matchMedia")}},Va=function e(){return Ta(lo,"scrollEnd",e)||Xa(!0)},Wa=function(e){return Ba[e]&&Ba[e].map((function(e){return e()}))||Fa},Ga=[],ja=function(e){for(var t=0;t<Ga.length;t+=4)e&&Ga[t+3]!==e||(Ga[t].style.cssText=Ga[t+1],Ga[t+2].uncache=1)},qa=function(e,t){var i;for(Os=0;Os<Ia.length;Os++)i=Ia[Os],t&&i.media!==t||(e?i.kill(1):(i.scroll.rec||(i.scroll.rec=i.scroll()),i.revert()));ja(t),t||Wa("revert")},Xa=function(e,t){if(!Js||e){var i=Wa("refreshInit");for(Bs&&lo.sort(),t||qa(),Os=0;Os<Ia.length;Os++)Ia[Os].refresh();for(i.forEach((function(e){return e&&e.render&&e.render(-1)})),Os=Ia.length;Os--;)Ia[Os].scroll.rec=0;Ss.pause(),Wa("refresh")}else Ea(lo,"scrollEnd",Va)},Ya=0,$a=1,Ja=function(){var e=Ia.length,t=Ys(),i=t-$s>=50,n=e&&Ia[0].scroll();if($a=Ya>n?-1:1,Ya=n,i&&(Js&&!ks&&t-Js>200&&(Js=0,Wa("scrollEnd")),Ls=$s,$s=t),$a<0){for(Os=e;Os-- >0;)Ia[Os]&&Ia[Os].update(0,i);$a=1}else for(Os=0;Os<e;Os++)Ia[Os]&&Ia[Os].update(0,i);Ts=0},Za=["left","top","bottom","right","marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex"],Qa=Za.concat(["width","height","boxSizing","maxWidth","maxHeight","position","margin",ma,ma+"Top",ma+"Right",ma+"Bottom",ma+"Left"]),Ka=function(e,t,i,n){if(e.parentNode!==t){for(var r,s=Za.length,a=t.style,o=e.style;s--;)a[r=Za[s]]=i[r];a.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(a.display="inline-block"),o.bottom=o.right="auto",a.overflow="visible",a.boxSizing="border-box",a.width=_a(e,va)+ga,a.height=_a(e,ya)+ga,a[ma]=o.margin=o.top=o.left="0",to(n),o.width=o.maxWidth=i.width,o.height=o.maxHeight=i.height,o[ma]=i[ma],e.parentNode.insertBefore(t,e),t.appendChild(e)}},eo=/([A-Z])/g,to=function(e){if(e){var t,i,n=e.t.style,r=e.length,s=0;for((e.t._gsap||vs.core.getCache(e.t)).uncache=1;s<r;s+=2)i=e[s+1],t=e[s],i?n[t]=i:n[t]&&n.removeProperty(t.replace(eo,"-$1").toLowerCase())}},io=function(e){for(var t=Qa.length,i=e.style,n=[],r=0;r<t;r++)n.push(Qa[r],i[Qa[r]]);return n.t=e,n},no={left:0,top:0},ro=function(e,t,i,n,r,s,a,o,l,c,u,h){if(ca(e)&&(e=e(o)),la(e)&&"max"===e.substr(0,3)&&(e=h+("="===e.charAt(4)?Pa("0"+e.substr(3),i):0)),ua(e))a&&ka(a,i,n,!0);else{ca(t)&&(t=t(o));var d,p,f,m=As(t)[0]||_s,g=wa(m)||{},v=e.split(" ");g&&(g.left||g.top)||"none"!==xa(m).display||(f=m.style.display,m.style.display="block",g=wa(m),f?m.style.display=f:m.style.removeProperty("display")),d=Pa(v[0],g[n.d]),p=Pa(v[1]||"0",i),e=g[n.p]-l[n.p]-c+d+r-p,a&&ka(a,p,n,i-p<20||a._isStart&&p>20),i-=i-p}if(s){var y=e+i,x=s._isStart;h="scroll"+n.d2,ka(s,y,n,x&&y>20||!x&&(u?Math.max(_s[h],ws[h]):s.parentNode[h])<=y+1),u&&(l=wa(a),u&&(s.style[n.op.p]=l[n.op.p]-n.op.m-s._offset+ga))}return Math.round(e)},so=/(?:webkit|moz|length|cssText|inset)/i,ao=function(e,t,i,n){if(e.parentNode!==t){var r,s,a=e.style;if(t===_s){for(r in e._stOrig=a.cssText,s=xa(e))+r||so.test(r)||!s[r]||"string"!=typeof a[r]||"0"===r||(a[r]=s[r]);a.top=i,a.left=n}else a.cssText=e._stOrig;vs.core.getCache(e).uncache=1,t.appendChild(e)}},oo=function(e,t){var i,n,r=ra(e,t),s="_scroll"+t.p2,a=function t(a,o,l,c,u){var h=t.tween,d=o.onComplete,p={};return h&&h.kill(),i=Math.round(l),o[s]=a,o.modifiers=p,p[s]=function(e){return(e=Ks(r()))!==i&&e!==n&&Math.abs(e-i)>2?(h.kill(),t.tween=0):e=l+c*h.ratio+u*h.ratio*h.ratio,n=i,i=Ks(e)},o.onComplete=function(){t.tween=0,d&&d.call(h)},h=t.tween=vs.to(e,o)};return e[s]=r,e.addEventListener("wheel",(function(){return a.tween&&a.tween.kill()&&(a.tween=0)})),a};va.op=ya;var lo=function(){function e(t,i){ys||e.register(vs)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,i)}return e.prototype.init=function(t,i){if(this.progress=this.start=0,this.vars&&this.kill(1),Zs){var n,r,s,a,o,l,c,u,h,d,p,f,m,g,v,y,x,b,w,_,M,S,E,T,A,C,L,P,R,k,I,O,D,z,N,B,F,H,U,V=(t=ba(la(t)||ua(t)||t.nodeType?{trigger:t}:t,Ca)).horizontal?va:ya,W=t,G=W.onUpdate,j=W.toggleClass,q=W.id,X=W.onToggle,Y=W.onRefresh,$=W.scrub,J=W.trigger,Z=W.pin,Q=W.pinSpacing,K=W.invalidateOnRefresh,ee=W.anticipatePin,te=W.onScrubComplete,ie=W.onSnapComplete,ne=W.once,re=W.snap,se=W.pinReparent,ae=!$&&0!==$,oe=As(t.scroller||xs)[0],le=vs.core.getCache(oe),ce=ia(oe),ue="pinType"in t?"fixed"===t.pinType:ce||"fixed"===na(oe,"pinType"),he=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],de=ae&&t.toggleActions.split(" "),pe="markers"in t?t.markers:Ca.markers,fe=ce?0:parseFloat(xa(oe)["border"+V.p2+"Width"])||0,me=this,ge=t.onRefreshInit&&function(){return t.onRefreshInit(me)},ve=function(e,t,i){var n=i.d,r=i.d2,s=i.a;return(s=na(e,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(t?xs["inner"+r]:e["client"+r])||0}}(oe,ce,V),ye=function(e,t){return!t||~qs.indexOf(e)?sa(e):function(){return no}}(oe,ce);me.media=Vs,ee*=45,Ia.push(me),me.scroller=oe,me.scroll=ra(oe,V),o=me.scroll(),me.vars=t,i=i||t.animation,"refreshPriority"in t&&(Bs=1),le.tweenScroll=le.tweenScroll||{top:oo(oe,ya),left:oo(oe,va)},me.tweenTo=n=le.tweenScroll[V.p],i&&(i.vars.lazy=!1,i._initted||!1!==i.vars.immediateRender&&!1!==t.immediateRender&&i.render(0,!0,!0),me.animation=i.pause(),i.scrollTrigger=me,(O=ua($)&&$)&&(I=vs.to(i,{ease:"power3",duration:O,onComplete:function(){return te&&te(me)}})),R=0,q||(q=i.vars.id)),re&&(ha(re)||(re={snapTo:re}),"scrollBehavior"in _s.style&&vs.set(ce?[_s,ws]:oe,{scrollBehavior:"auto"}),s=ca(re.snapTo)?re.snapTo:"labels"===re.snapTo?function(e){return function(t){return vs.utils.snap(Ma(e),t)}}(i):"labelsDirectional"===re.snapTo?(H=i,function(e,t){var i,n=Ma(H);if(n.sort((function(e,t){return e-t})),t.direction>0){for(e-=1e-4,i=0;i<n.length;i++)if(n[i]>=e)return n[i];return n.pop()}for(i=n.length,e+=1e-4;i--;)if(n[i]<=e)return n[i];return n[0]}):vs.utils.snap(re.snapTo),D=re.duration||{min:.1,max:2},D=ha(D)?Cs(D.min,D.max):Cs(D,D),z=vs.delayedCall(re.delay||O/2||.1,(function(){if(Math.abs(me.getVelocity())<10&&!ks){var e=i&&!ae?i.totalProgress():me.progress,t=(e-k)/(Ys()-Ls)*1e3||0,r=fa(t/2)*t/.185,a=e+(!1===re.inertia?0:r),o=Cs(0,1,s(a,me)),l=me.scroll(),h=Math.round(c+o*g),d=re,p=d.onStart,f=d.onInterrupt,m=d.onComplete,v=n.tween;if(l<=u&&l>=c&&h!==l){if(v&&!v._initted&&v.data<=Math.abs(h-l))return;n(h,{duration:D(fa(.185*Math.max(fa(a-e),fa(o-e))/t/.05||0)),ease:re.ease||"power3",data:Math.abs(h-l),onInterrupt:function(){return z.restart(!0)&&f&&f(me)},onComplete:function(){R=k=i&&!ae?i.totalProgress():me.progress,ie&&ie(me),m&&m(me)}},l,r*g,h-l-r*g),p&&p(me,n.tween)}}else me.isActive&&z.restart(!0)})).pause()),q&&(Oa[q]=me),J=me.trigger=As(J||Z)[0],Z=!0===Z?J:As(Z)[0],la(j)&&(j={targets:J,className:j}),Z&&(!1===Q||"margin"===Q||(Q=!(!Q&&"flex"===xa(Z.parentNode).display)&&ma),me.pin=Z,!1!==t.force3D&&vs.set(Z,{force3D:!0}),(r=vs.core.getCache(Z)).spacer?v=r.pinState:(r.spacer=b=bs.createElement("div"),b.setAttribute("class","pin-spacer"+(q?" pin-spacer-"+q:"")),r.pinState=v=io(Z)),me.spacer=b=r.spacer,P=xa(Z),T=P[Q+V.os2],_=vs.getProperty(Z),M=vs.quickSetter(Z,V.a,ga),Ka(Z,b,P),x=io(Z)),pe&&(m=ha(pe)?ba(pe,Aa):Aa,p=Ra("scroller-start",q,oe,V,m,0),f=Ra("scroller-end",q,oe,V,m,0,p),w=p["offset"+V.op.d2],h=Ra("start",q,oe,V,m,w),d=Ra("end",q,oe,V,m,w),ue||((U=ce?_s:oe).style.position="absolute"===xa(U).position?"absolute":"relative",vs.set([p,f],{force3D:!0}),C=vs.quickSetter(p,V.a,ga),L=vs.quickSetter(f,V.a,ga))),me.revert=function(e){var t=!1!==e||!me.enabled,n=Rs;t!==a&&(t&&(B=Math.max(me.scroll(),me.scroll.rec||0),N=me.progress,F=i&&i.progress()),h&&[h,d,p,f].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(Rs=1),me.update(t),Rs=n,Z&&(t?function(e,t,i){if(to(i),e.parentNode===t){var n=t.parentNode;n&&(n.insertBefore(e,t),n.removeChild(t))}}(Z,b,v):(!se||!me.isActive)&&Ka(Z,b,xa(Z),A)),a=t)},me.refresh=function(n,r){if(!Rs&&me.enabled||r)if(Z&&n&&Js)Ea(e,"scrollEnd",Va);else{Rs=1,I&&I.pause(),K&&i&&i.progress(0).invalidate(),a||me.revert();for(var s,m,w,M,T,C,L,P,R,k=ve(),O=ye(),D=aa(oe,V),z=0,H=0,U=t.end,W=t.endTrigger||J,G=t.start||(0!==t.start&&J?Z?"0 0":"0 100%":0),j=J&&Math.max(0,Ia.indexOf(me))||0,q=j;q--;)(C=Ia[q]).end||C.refresh(0,1)||(Rs=1),(L=C.pin)&&(L===J||L===Z)&&C.revert();for(c=ro(G,J,k,V,me.scroll(),h,p,me,O,fe,ue,D)||(Z?-.001:0),ca(U)&&(U=U(me)),la(U)&&!U.indexOf("+=")&&(~U.indexOf(" ")?U=(la(G)?G.split(" ")[0]:"")+U:(z=Pa(U.substr(2),k),U=la(G)?G:c+z,W=J)),u=Math.max(c,ro(U||(W?"100% 0":D),W,k,V,me.scroll()+z,d,f,me,O,fe,ue,D))||-.001,g=u-c||(c-=.01)&&.001,z=0,q=j;q--;)(L=(C=Ia[q]).pin)&&C.start-C._pinPush<c&&(s=C.end-C.start,L===J&&(z+=s),L===Z&&(H+=s));if(c+=z,u+=z,me._pinPush=H,h&&z&&((s={})[V.a]="+="+z,vs.set([h,d],s)),Z)s=xa(Z),M=V===ya,w=me.scroll(),S=parseFloat(_(V.a))+H,!D&&u>1&&((ce?_s:oe).style["overflow-"+V.a]="scroll"),Ka(Z,b,s),x=io(Z),m=wa(Z,!0),P=ue&&ra(oe,M?va:ya)(),Q&&((A=[Q+V.os2,g+H+ga]).t=b,(q=Q===ma?_a(Z,V)+g+H:0)&&A.push(V.d,q+ga),to(A),ue&&me.scroll(B)),ue&&((T={top:m.top+(M?w-c:P)+ga,left:m.left+(M?P:w-c)+ga,boxSizing:"border-box",position:"fixed"}).width=T.maxWidth=Math.ceil(m.width)+ga,T.height=T.maxHeight=Math.ceil(m.height)+ga,T.margin=T.marginTop=T.marginRight=T.marginBottom=T.marginLeft="0",T[ma]=s[ma],T[ma+"Top"]=s[ma+"Top"],T[ma+"Right"]=s[ma+"Right"],T[ma+"Bottom"]=s[ma+"Bottom"],T[ma+"Left"]=s[ma+"Left"],y=function(e,t,i){for(var n,r=[],s=e.length,a=i?8:0;a<s;a+=2)n=e[a],r.push(n,n in t?t[n]:e[a+1]);return r.t=e.t,r}(v,T,se)),i?(R=i._initted,Fs(1),i.progress(1,!0),E=_(V.a)-S+g+H,g!==E&&y.splice(y.length-2,2),i.progress(0,!0),R||i.invalidate(),Fs(0)):E=g;else if(J&&me.scroll())for(m=J.parentNode;m&&m!==_s;)m._pinOffset&&(c-=m._pinOffset,u-=m._pinOffset),m=m.parentNode;for(q=0;q<j;q++)(C=Ia[q].pin)&&(C===J||C===Z)&&Ia[q].revert(!1);me.start=c,me.end=u,(o=l=me.scroll())<B&&me.scroll(B),me.revert(!1),Rs=0,i&&ae&&i._initted&&i.progress(F,!0).render(i.time(),!0,!0),N!==me.progress&&(I&&i.totalProgress(N,!0),me.progress=N,me.update()),Z&&Q&&(b._pinOffset=Math.round(me.progress*E)),Y&&Y(me)}},me.getVelocity=function(){return(me.scroll()-l)/(Ys()-Ls)*1e3||0},me.update=function(e,t){var r,s,a,h,d,f=me.scroll(),m=e?0:(f-c)/g,v=m<0?0:m>1?1:m||0,w=me.progress;if(t&&(l=o,o=f,re&&(k=R,R=i&&!ae?i.totalProgress():v)),ee&&!v&&Z&&!Rs&&!js&&Js&&c<f+(f-l)/(Ys()-Ls)*ee&&(v=1e-4),v!==w&&me.enabled){if(h=(d=(r=me.isActive=!!v&&v<1)!==(!!w&&w<1))||!!v!=!!w,me.direction=v>w?1:-1,me.progress=v,ae||(!I||Rs||js?i&&i.totalProgress(v,!!Rs):(I.vars.totalProgress=v,I.invalidate().restart())),Z)if(e&&Q&&(b.style[Q+V.os2]=T),ue){if(h){if(a=!e&&v>w&&u+1>f&&f+1>=aa(oe,V),se)if(e||!r&&!a)ao(Z,b);else{var _=wa(Z,!0),A=f-c;ao(Z,_s,_.top+(V===ya?A:0)+ga,_.left+(V===ya?0:A)+ga)}to(r||a?y:x),E!==g&&v<1&&r||M(S+(1!==v||a?0:E))}}else M(S+E*v);re&&!n.tween&&!Rs&&!js&&z.restart(!0),j&&(d||ne&&v&&(v<1||!Us))&&As(j.targets).forEach((function(e){return e.classList[r||ne?"add":"remove"](j.className)})),G&&!ae&&!e&&G(me),h&&!Rs?(s=v&&!w?0:1===v?1:1===w?2:3,ae&&(a=!d&&"none"!==de[s+1]&&de[s+1]||de[s],i&&("complete"===a||"reset"===a||a in i)&&("complete"===a?i.pause().totalProgress(1):"reset"===a?i.restart(!0).pause():i[a]()),G&&G(me)),!d&&Us||(X&&d&&X(me),he[s]&&he[s](me),ne&&(1===v?me.kill(!1,1):he[s]=0),d||he[s=1===v?1:3]&&he[s](me))):ae&&G&&!Rs&&G(me)}L&&(C(f+(p._isFlipped?1:0)),L(f))},me.enable=function(){me.enabled||(me.enabled=!0,Ea(oe,"resize",Na),Ea(oe,"scroll",za),ge&&Ea(e,"refreshInit",ge),i&&i.add?vs.delayedCall(.01,(function(){return c||u||me.refresh()}))&&(g=.01)&&(c=u=0):me.refresh())},me.disable=function(t,i){if(me.enabled&&(!1!==t&&me.revert(),me.enabled=me.isActive=!1,i||I&&I.pause(),B=0,r&&(r.uncache=1),ge&&Ta(e,"refreshInit",ge),z&&(z.pause(),n.tween&&n.tween.kill()&&(n.tween=0)),!ce)){for(var s=Ia.length;s--;)if(Ia[s].scroller===oe&&Ia[s]!==me)return;Ta(oe,"resize",Na),Ta(oe,"scroll",za)}},me.kill=function(e,t){me.disable(e,t),q&&delete Oa[q];var n=Ia.indexOf(me);Ia.splice(n,1),n===Os&&$a>0&&Os--,i&&(i.scrollTrigger=null,e&&i.render(-1),t||i.kill()),h&&[h,d,p,f].forEach((function(e){return e.parentNode.removeChild(e)})),Z&&(r&&(r.uncache=1),n=0,Ia.forEach((function(e){return e.pin===Z&&n++})),n||(r.spacer=0))},me.enable()}else this.update=this.refresh=this.kill=Qs},e.register=function(t){if(!ys&&(vs=t||ta(),ea()&&window.document&&(xs=window,bs=document,ws=bs.documentElement,_s=bs.body),vs&&(As=vs.utils.toArray,Cs=vs.utils.clamp,Fs=vs.core.suppressOverwrites||Qs,vs.core.globals("ScrollTrigger",e),_s))){Es=xs.requestAnimationFrame||function(e){return setTimeout(e,16)},Ea(xs,"wheel",za),Ms=[xs,bs,ws,_s],Ea(bs,"scroll",za);var i,n=_s.style,r=n.borderTop;n.borderTop="1px solid #000",i=wa(_s),ya.m=Math.round(i.top+ya.sc())||0,va.m=Math.round(i.left+va.sc())||0,r?n.borderTop=r:n.removeProperty("border-top"),Ps=setInterval(Da,200),vs.delayedCall(.5,(function(){return js=0})),Ea(bs,"touchcancel",Qs),Ea(_s,"touchstart",Qs),Sa(Ea,bs,"pointerdown,touchstart,mousedown",(function(){return ks=1})),Sa(Ea,bs,"pointerup,touchend,mouseup",(function(){return ks=0})),Is=vs.utils.checkPrefix("transform"),Qa.push(Is),ys=Ys(),Ss=vs.delayedCall(.2,Xa).pause(),Ns=[bs,"visibilitychange",function(){var e=xs.innerWidth,t=xs.innerHeight;bs.hidden?(Ds=e,zs=t):Ds===e&&zs===t||Na()},bs,"DOMContentLoaded",Xa,xs,"load",function(){return Js||Xa()},xs,"resize",Na],oa(Ea)}return ys},e.defaults=function(e){for(var t in e)Ca[t]=e[t]},e.kill=function(){Zs=0,Ia.slice(0).forEach((function(e){return e.kill(1)}))},e.config=function(e){"limitCallbacks"in e&&(Us=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(Ps)||(Ps=t)&&setInterval(Da,t),"autoRefreshEvents"in e&&(oa(Ta)||oa(Ea,e.autoRefreshEvents||"none"),Hs=-1===(e.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var i=As(e)[0],n=Xs.indexOf(i),r=ia(i);~n&&Xs.splice(n,r?6:2),r?qs.unshift(xs,t,_s,t,ws,t):qs.unshift(i,t)},e.matchMedia=function(e){var t,i,n,r,s;for(i in e)n=Ha.indexOf(i),r=e[i],Vs=i,"all"===i?r():(t=xs.matchMedia(i))&&(t.matches&&(s=r()),~n?(Ha[n+1]=pa(Ha[n+1],r),Ha[n+2]=pa(Ha[n+2],s)):(n=Ha.length,Ha.push(i,r,s),t.addListener?t.addListener(Ua):t.addEventListener("change",Ua)),Ha[n+3]=t.matches),Vs=0;return Ha},e.clearMatchMedia=function(e){e||(Ha.length=0),(e=Ha.indexOf(e))>=0&&Ha.splice(e,4)},e}();lo.version="3.6.1",lo.saveStyles=function(e){return e?As(e).forEach((function(e){if(e&&e.style){var t=Ga.indexOf(e);t>=0&&Ga.splice(t,4),Ga.push(e,e.style.cssText,vs.core.getCache(e),Vs)}})):Ga},lo.revert=function(e,t){return qa(!e,t)},lo.create=function(e,t){return new lo(e,t)},lo.refresh=function(e){return e?Na():Xa(!0)},lo.update=Ja,lo.maxScroll=function(e,t){return aa(e,t?va:ya)},lo.getScrollFunc=function(e,t){return ra(As(e)[0],t?va:ya)},lo.getById=function(e){return Oa[e]},lo.getAll=function(){return Ia.slice(0)},lo.isScrolling=function(){return!!Js},lo.addEventListener=function(e,t){var i=Ba[e]||(Ba[e]=[]);~i.indexOf(t)||i.push(t)},lo.removeEventListener=function(e,t){var i=Ba[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},lo.batch=function(e,t){var i,n=[],r={},s=t.interval||.016,a=t.batchMax||1e9,o=function(e,t){var i=[],n=[],r=vs.delayedCall(s,(function(){t(i,n),i=[],n=[]})).pause();return function(e){i.length||r.restart(!0),i.push(e.trigger),n.push(e),a<=i.length&&r.progress(1)}};for(i in t)r[i]="on"===i.substr(0,2)&&ca(t[i])&&"onRefreshInit"!==i?o(0,t[i]):t[i];return ca(a)&&(a=a(),Ea(lo,"refresh",(function(){return a=t.batchMax()}))),As(e).forEach((function(e){var t={};for(i in r)t[i]=r[i];t.trigger=e,n.push(lo.create(t))})),n},lo.sort=function(e){return Ia.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},ta()&&vs.registerPlugin(lo);var co,uo,ho,po,fo,mo,go,vo=function(){return"undefined"!=typeof window},yo=function(){return co||vo()&&(co=window.gsap)&&co.registerPlugin&&co},xo=function(e){return"string"==typeof e},bo=function(e){return"function"==typeof e},wo=function(e,t){var i="x"===t?"Width":"Height",n="scroll"+i,r="client"+i;return e===ho||e===po||e===fo?Math.max(po[n],fo[n])-(ho["inner"+i]||po[r]||fo[r]):e[n]-e["offset"+i]},_o=function(e,t){var i="scroll"+("x"===t?"Left":"Top");return e===ho&&(null!=e.pageXOffset?i="page"+t.toUpperCase()+"Offset":e=null!=po[i]?po:fo),function(){return e[i]}},Mo=function(e,t){if(!(e=mo(e)[0])||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var i=e.getBoundingClientRect(),n=!t||t===ho||t===fo,r=n?{top:po.clientTop-(ho.pageYOffset||po.scrollTop||fo.scrollTop||0),left:po.clientLeft-(ho.pageXOffset||po.scrollLeft||fo.scrollLeft||0)}:t.getBoundingClientRect(),s={x:i.left-r.left,y:i.top-r.top};return!n&&t&&(s.x+=_o(t,"x")(),s.y+=_o(t,"y")()),s},So=function(e,t,i,n,r){return isNaN(e)||"object"==typeof e?xo(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+n-r:"max"===e?wo(t,i)-r:Math.min(wo(t,i),Mo(e,t)[i]-r):parseFloat(e)-r},Eo=function(){co=yo(),vo()&&co&&document.body&&(ho=window,fo=document.body,po=document.documentElement,mo=co.utils.toArray,co.config({autoKillThreshold:7}),go=co.config(),uo=1)},To={version:"3.6.1",name:"scrollTo",rawVars:1,register:function(e){co=e,Eo()},init:function(e,t,i,n,r){uo||Eo();this.isWin=e===ho,this.target=e,this.tween=i,t=function(e,t,i,n){if(bo(e)&&(e=e(t,i,n)),"object"!=typeof e)return xo(e)&&"max"!==e&&"="!==e.charAt(1)?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var r,s={};for(r in e)s[r]="onAutoKill"!==r&&bo(e[r])?e[r](t,i,n):e[r];return s}(t,n,e,r),this.vars=t,this.autoKill=!!t.autoKill,this.getX=_o(e,"x"),this.getY=_o(e,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=t.x?(this.add(this,"x",this.x,So(t.x,e,"x",this.x,t.offsetX||0),n,r),this._props.push("scrollTo_x")):this.skipX=1,null!=t.y?(this.add(this,"y",this.y,So(t.y,e,"y",this.y,t.offsetY||0),n,r),this._props.push("scrollTo_y")):this.skipY=1},render:function(e,t){for(var i,n,r,s,a,o=t._pt,l=t.target,c=t.tween,u=t.autoKill,h=t.xPrev,d=t.yPrev,p=t.isWin;o;)o.r(e,o.d),o=o._next;i=p||!t.skipX?t.getX():h,r=(n=p||!t.skipY?t.getY():d)-d,s=i-h,a=go.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),u&&(!t.skipX&&(s>a||s<-a)&&i<wo(l,"x")&&(t.skipX=1),!t.skipY&&(r>a||r<-a)&&n<wo(l,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(c.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(c,t.vars.onAutoKillParams||[]))),p?ho.scrollTo(t.skipX?i:t.x,t.skipY?n:t.y):(t.skipY||(l.scrollTop=t.y),t.skipX||(l.scrollLeft=t.x)),t.xPrev=t.x,t.yPrev=t.y},kill:function(e){var t="scrollTo"===e;(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1)}};To.max=wo,To.getOffset=Mo,To.buildGetter=_o,yo()&&co.registerPlugin(To),Gs.registerPlugin(lo),Gs.registerPlugin(To);var Ao=i("vX6Q"),Co=i.n(Ao);class Lo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const Po=[];for(let e=0;e<256;e++)Po[e]=(e<16?"0":"")+e.toString(16);const Ro=Math.PI/180,ko=180/Math.PI;function Io(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Po[255&e]+Po[e>>8&255]+Po[e>>16&255]+Po[e>>24&255]+"-"+Po[255&t]+Po[t>>8&255]+"-"+Po[t>>16&15|64]+Po[t>>24&255]+"-"+Po[63&i|128]+Po[i>>8&255]+"-"+Po[i>>16&255]+Po[i>>24&255]+Po[255&n]+Po[n>>8&255]+Po[n>>16&255]+Po[n>>24&255]).toUpperCase()}function Oo(e,t,i){return Math.max(t,Math.min(i,e))}function Do(e,t){return(e%t+t)%t}function zo(e,t,i){return(1-i)*e+i*t}function No(e){return 0==(e&e-1)&&0!==e}function Bo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}class Fo{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*i-s*n+e.x,this.y=r*n+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Fo.prototype.isVector2=!0;class Ho{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,n,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],x=n[7],b=n[2],w=n[5],_=n[8];return r[0]=s*f+a*v+o*b,r[3]=s*m+a*y+o*w,r[6]=s*g+a*x+o*_,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*w,r[7]=l*g+c*x+u*_,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*w,r[8]=h*g+d*x+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-i*r*c+i*a*o+n*r*l-n*s*o}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,h=a*o-c*r,d=l*r-s*o,p=t*u+i*h+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(n*l-c*i)*f,e[2]=(a*i-n*s)*f,e[3]=h*f,e[4]=(c*t-n*o)*f,e[5]=(n*r-a*t)*f,e[6]=d*f,e[7]=(i*o-l*t)*f,e[8]=(s*t-i*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*s+l*a)+s+e,-n*l,n*o,-n*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),n=this.elements,r=n[0],s=n[3],a=n[6],o=n[1],l=n[4],c=n[7];return n[0]=t*r+i*o,n[3]=t*s+i*l,n[6]=t*a+i*c,n[1]=-i*r+t*o,n[4]=-i*s+t*l,n[7]=-i*a+t*c,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let Uo;Ho.prototype.isMatrix3=!0;class Vo{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Uo&&(Uo=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Uo.width=e.width,Uo.height=e.height;const i=Uo.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Uo}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Wo=0;class Go extends Lo{constructor(e=Go.DEFAULT_IMAGE,t=Go.DEFAULT_MAPPING,i=1001,n=1001,r=1006,s=1008,a=1023,o=1009,l=1,c=3e3){super(),Object.defineProperty(this,"id",{value:Wo++}),this.uuid=Io(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Fo(0,0),this.repeat=new Fo(1,1),this.center=new Fo(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ho,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=Io()),!t&&void 0===e.images[n.uuid]){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(jo(n[e].image)):t.push(jo(n[e]))}else t=jo(n);e.images[n.uuid]={uuid:n.uuid,url:t}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function jo(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Vo.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Go.DEFAULT_IMAGE=void 0,Go.DEFAULT_MAPPING=300,Go.prototype.isTexture=!0;class qo{constructor(e=0,t=0,i=0,n=1){this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*t+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*t+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*t+s[7]*i+s[11]*n+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const s=e.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,s=(u+1)/2,m=(f+1)/2,g=(o+c)/4,v=(l+d)/4,y=(h+p)/4;return e>s&&e>m?e<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=g/i,r=v/i):s>m?s<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(s),i=g/n,r=y/n):m<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(m),i=v/r,n=y/r),this.set(i,n,r,t),this}let m=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((a+u+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}qo.prototype.isVector4=!0;class Xo extends Lo{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new qo(0,0,e,t),this.scissorTest=!1,this.viewport=new qo(0,0,e,t),this.texture=new Go(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Xo.prototype.isWebGLRenderTarget=!0;(class extends Xo{constructor(e,t,i){super(e,t);const n=this.texture;this.texture=[];for(let e=0;e<i;e++)this.texture[e]=n.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class Yo extends Xo{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Yo.prototype.isWebGLMultisampleRenderTarget=!0;class $o{constructor(e=0,t=0,i=0,n=1){this._x=e,this._y=t,this._z=i,this._w=n}static slerp(e,t,i,n){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,n)}static slerpFlat(e,t,i,n,r,s,a){let o=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const h=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||o!==h||l!==d||c!==p){let e=1-a;const t=o*h+l*d+c*p+u*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),s=Math.atan2(r,t*i);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*i;if(o=o*e+h*r,l=l*e+d*r,c=c*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,s){const a=i[n],o=i[n+1],l=i[n+2],c=i[n+3],u=r[s],h=r[s+1],d=r[s+2],p=r[s+3];return e[t]=a*p+c*u+o*d-l*h,e[t+1]=o*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-o*u,e[t+3]=c*p-a*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,n=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(i/2),c=a(n/2),u=a(r/2),h=o(i/2),d=o(n/2),p=o(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=i+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-n)*e}else if(i>a&&i>u){const e=2*Math.sqrt(1+i-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(n+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-i-u);this._w=(r-l)/e,this._x=(n+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-i-a);this._w=(s-n)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oo(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+s*a+n*l-r*o,this._y=n*c+s*o+r*a-i*l,this._z=r*c+s*l+i*o-n*a,this._w=s*c-i*a-n*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,s=this._w;let a=s*e._w+i*e._x+n*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=n*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}$o.prototype.isQuaternion=!0;class Jo{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qo.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Qo.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,s=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*n-a*i,c=o*i+a*t-r*n,u=o*n+r*i-s*t,h=-r*t-s*i-a*n;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Zo.copy(this).projectOnVector(e),this.sub(Zo)}reflect(e){return this.sub(Zo.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oo(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Jo.prototype.isVector3=!0;const Zo=new Jo,Qo=new $o;class Ko{constructor(e=new Jo(1/0,1/0,1/0),t=new Jo(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<i&&(i=c),u<n&&(n=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,i,n),this.max.set(r,s,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<i&&(i=c),u<n&&(n=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,i,n),this.max.set(r,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),il.copy(t.boundingBox),il.applyMatrix4(e.matrixWorld),this.union(il));const i=e.children;for(let e=0,t=i.length;e<t;e++)this.expandByObject(i[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,tl),tl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cl),ul.subVectors(this.max,cl),nl.subVectors(e.a,cl),rl.subVectors(e.b,cl),sl.subVectors(e.c,cl),al.subVectors(rl,nl),ol.subVectors(sl,rl),ll.subVectors(nl,sl);let t=[0,-al.z,al.y,0,-ol.z,ol.y,0,-ll.z,ll.y,al.z,0,-al.x,ol.z,0,-ol.x,ll.z,0,-ll.x,-al.y,al.x,0,-ol.y,ol.x,0,-ll.y,ll.x,0];return!!pl(t,nl,rl,sl,ul)&&(t=[1,0,0,0,1,0,0,0,1],!!pl(t,nl,rl,sl,ul)&&(hl.crossVectors(al,ol),t=[hl.x,hl.y,hl.z],pl(t,nl,rl,sl,ul)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return tl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(tl).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(el[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),el[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),el[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),el[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),el[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),el[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),el[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),el[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(el)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ko.prototype.isBox3=!0;const el=[new Jo,new Jo,new Jo,new Jo,new Jo,new Jo,new Jo,new Jo],tl=new Jo,il=new Ko,nl=new Jo,rl=new Jo,sl=new Jo,al=new Jo,ol=new Jo,ll=new Jo,cl=new Jo,ul=new Jo,hl=new Jo,dl=new Jo;function pl(e,t,i,n,r){for(let s=0,a=e.length-3;s<=a;s+=3){dl.fromArray(e,s);const a=r.x*Math.abs(dl.x)+r.y*Math.abs(dl.y)+r.z*Math.abs(dl.z),o=t.dot(dl),l=i.dot(dl),c=n.dot(dl);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const fl=new Ko,ml=new Jo,gl=new Jo,vl=new Jo;class yl{constructor(e=new Jo,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):fl.setFromPoints(e).getCenter(i);let n=0;for(let t=0,r=e.length;t<r;t++)n=Math.max(n,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){vl.subVectors(e,this.center);const t=vl.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.add(vl.multiplyScalar(i/e)),this.radius+=i}return this}union(e){return gl.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ml.copy(e.center).add(gl)),this.expandByPoint(ml.copy(e.center).sub(gl)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const xl=new Jo,bl=new Jo,wl=new Jo,_l=new Jo,Ml=new Jo,Sl=new Jo,El=new Jo;class Tl{constructor(e=new Jo,t=new Jo(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xl.copy(this.direction).multiplyScalar(t).add(this.origin),xl.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){bl.copy(e).add(t).multiplyScalar(.5),wl.copy(t).sub(e).normalize(),_l.copy(this.origin).sub(bl);const r=.5*e.distanceTo(t),s=-this.direction.dot(wl),a=_l.dot(this.direction),o=-_l.dot(wl),l=_l.lengthSq(),c=Math.abs(1-s*s);let u,h,d,p;if(c>0)if(u=s*o-a,h=s*a-o,p=r*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h<=-p?(u=Math.max(0,-(-s*r+a)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(s*r+a)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),n&&n.copy(wl).multiplyScalar(h).add(bl),d}intersectSphere(e,t){xl.subVectors(e.center,this.origin);const i=xl.dot(this.direction),n=xl.dot(xl)-i*i,r=e.radius*e.radius;if(n>r)return null;const s=Math.sqrt(r-n),a=i-s,o=i+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),i>s||r>n?null:((r>i||i!=i)&&(i=r),(s<n||n!=n)&&(n=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),i>o||a>n?null:((a>i||i!=i)&&(i=a),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,xl)}intersectTriangle(e,t,i,n,r){Ml.subVectors(t,e),Sl.subVectors(i,e),El.crossVectors(Ml,Sl);let s,a=this.direction.dot(El);if(a>0){if(n)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}_l.subVectors(this.origin,e);const o=s*this.direction.dot(Sl.crossVectors(_l,Sl));if(o<0)return null;const l=s*this.direction.dot(Ml.cross(_l));if(l<0)return null;if(o+l>a)return null;const c=-s*_l.dot(El);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Al{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,n,r,s,a,o,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Al).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Cl.setFromMatrixColumn(e,0).length(),r=1/Cl.setFromMatrixColumn(e,1).length(),s=1/Cl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,n=e.y,r=e.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,i=s*u,n=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=n+i*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,i=o*u,n=l*c,r=l*u;t[0]=e+r*a,t[4]=n*a-i,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=i*a-n,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,i=o*u,n=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=n+i*a,t[1]=i+n*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,i=s*u,n=a*c,r=a*u;t[0]=o*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,i=s*l,n=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,i=s*l,n=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=i*u-n,t[2]=n*u-i,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pl,e,Rl)}lookAt(e,t,i){const n=this.elements;return Ol.subVectors(e,t),0===Ol.lengthSq()&&(Ol.z=1),Ol.normalize(),kl.crossVectors(i,Ol),0===kl.lengthSq()&&(1===Math.abs(i.z)?Ol.x+=1e-4:Ol.z+=1e-4,Ol.normalize(),kl.crossVectors(i,Ol)),kl.normalize(),Il.crossVectors(Ol,kl),n[0]=kl.x,n[4]=Il.x,n[8]=Ol.x,n[1]=kl.y,n[5]=Il.y,n[9]=Ol.y,n[2]=kl.z,n[6]=Il.z,n[10]=Ol.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],x=i[11],b=i[15],w=n[0],_=n[4],M=n[8],S=n[12],E=n[1],T=n[5],A=n[9],C=n[13],L=n[2],P=n[6],R=n[10],k=n[14],I=n[3],O=n[7],D=n[11],z=n[15];return r[0]=s*w+a*E+o*L+l*I,r[4]=s*_+a*T+o*P+l*O,r[8]=s*M+a*A+o*R+l*D,r[12]=s*S+a*C+o*k+l*z,r[1]=c*w+u*E+h*L+d*I,r[5]=c*_+u*T+h*P+d*O,r[9]=c*M+u*A+h*R+d*D,r[13]=c*S+u*C+h*k+d*z,r[2]=p*w+f*E+m*L+g*I,r[6]=p*_+f*T+m*P+g*O,r[10]=p*M+f*A+m*R+g*D,r[14]=p*S+f*C+m*k+g*z,r[3]=v*w+y*E+x*L+b*I,r[7]=v*_+y*T+x*P+b*O,r[11]=v*M+y*A+x*R+b*D,r[15]=v*S+y*C+x*k+b*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-n*l*u-r*a*h+i*l*h+n*a*d-i*o*d)+e[7]*(+t*o*d-t*l*h+r*s*h-n*s*d+n*l*c-r*o*c)+e[11]*(+t*l*u-t*a*d-r*s*u+i*s*d+r*a*c-i*l*c)+e[15]*(-n*a*c-t*o*u+t*a*h+n*s*u-i*s*h+i*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*o*d-a*m*d-u*o*g+a*h*g,y=p*h*l-c*m*l-p*o*d+s*m*d+c*o*g-s*h*g,x=c*f*l-p*u*l+p*a*d-s*f*d-c*a*g+s*u*g,b=p*u*o-c*f*o-p*a*h+s*f*h+c*a*m-s*u*m,w=t*v+i*y+n*x+r*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return e[0]=v*_,e[1]=(f*h*r-u*m*r-f*n*d+i*m*d+u*n*g-i*h*g)*_,e[2]=(a*m*r-f*o*r+f*n*l-i*m*l-a*n*g+i*o*g)*_,e[3]=(u*o*r-a*h*r-u*n*l+i*h*l+a*n*d-i*o*d)*_,e[4]=y*_,e[5]=(c*m*r-p*h*r+p*n*d-t*m*d-c*n*g+t*h*g)*_,e[6]=(p*o*r-s*m*r-p*n*l+t*m*l+s*n*g-t*o*g)*_,e[7]=(s*h*r-c*o*r+c*n*l-t*h*l-s*n*d+t*o*d)*_,e[8]=x*_,e[9]=(p*u*r-c*f*r-p*i*d+t*f*d+c*i*g-t*u*g)*_,e[10]=(s*f*r-p*a*r+p*i*l-t*f*l-s*i*g+t*a*g)*_,e[11]=(c*a*r-s*u*r-c*i*l+t*u*l+s*i*d-t*a*d)*_,e[12]=b*_,e[13]=(c*f*n-p*u*n+p*i*h-t*f*h-c*i*m+t*u*m)*_,e[14]=(p*a*n-s*f*n-p*i*o+t*f*o+s*i*m-t*a*m)*_,e[15]=(s*u*n-c*a*n+c*i*o-t*u*o-s*i*h+t*a*h)*_,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+i,l*a-n*o,l*o+n*a,0,l*a+n*o,c*a+i,c*o-n*s,0,l*o-n*a,c*o+n*s,r*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,s){return this.set(1,i,r,0,e,1,s,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,p=r*u,f=s*c,m=s*u,g=a*u,v=o*l,y=o*c,x=o*u,b=i.x,w=i.y,_=i.z;return n[0]=(1-(f+g))*b,n[1]=(d+x)*b,n[2]=(p-y)*b,n[3]=0,n[4]=(d-x)*w,n[5]=(1-(h+g))*w,n[6]=(m+v)*w,n[7]=0,n[8]=(p+y)*_,n[9]=(m-v)*_,n[10]=(1-(h+f))*_,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=Cl.set(n[0],n[1],n[2]).length();const s=Cl.set(n[4],n[5],n[6]).length(),a=Cl.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Ll.copy(this);const o=1/r,l=1/s,c=1/a;return Ll.elements[0]*=o,Ll.elements[1]*=o,Ll.elements[2]*=o,Ll.elements[4]*=l,Ll.elements[5]*=l,Ll.elements[6]*=l,Ll.elements[8]*=c,Ll.elements[9]*=c,Ll.elements[10]*=c,t.setFromRotationMatrix(Ll),i.x=r,i.y=s,i.z=a,this}makePerspective(e,t,i,n,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,o=2*r/(t-e),l=2*r/(i-n),c=(t+e)/(t-e),u=(i+n)/(i-n),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,n,r,s){const a=this.elements,o=1/(t-e),l=1/(i-n),c=1/(s-r),u=(t+e)*o,h=(i+n)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Al.prototype.isMatrix4=!0;const Cl=new Jo,Ll=new Al,Pl=new Jo(0,0,0),Rl=new Jo(1,1,1),kl=new Jo,Il=new Jo,Ol=new Jo,Dl=new Al,zl=new $o;class Nl{constructor(e=0,t=0,i=0,n=Nl.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,r=n[0],s=n[4],a=n[8],o=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(Oo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Oo(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Oo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Oo(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Oo(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Oo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Dl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Dl,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zl.setFromEuler(this),this.setFromQuaternion(zl,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Jo(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Nl.prototype.isEuler=!0,Nl.DefaultOrder="XYZ",Nl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Bl{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Fl=0;const Hl=new Jo,Ul=new $o,Vl=new Al,Wl=new Jo,Gl=new Jo,jl=new Jo,ql=new $o,Xl=new Jo(1,0,0),Yl=new Jo(0,1,0),$l=new Jo(0,0,1),Jl={type:"added"},Zl={type:"removed"};class Ql extends Lo{constructor(){super(),Object.defineProperty(this,"id",{value:Fl++}),this.uuid=Io(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ql.DefaultUp.clone();const e=new Jo,t=new Nl,i=new $o,n=new Jo(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Al},normalMatrix:{value:new Ho}}),this.matrix=new Al,this.matrixWorld=new Al,this.matrixAutoUpdate=Ql.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Bl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ul.setFromAxisAngle(e,t),this.quaternion.multiply(Ul),this}rotateOnWorldAxis(e,t){return Ul.setFromAxisAngle(e,t),this.quaternion.premultiply(Ul),this}rotateX(e){return this.rotateOnAxis(Xl,e)}rotateY(e){return this.rotateOnAxis(Yl,e)}rotateZ(e){return this.rotateOnAxis($l,e)}translateOnAxis(e,t){return Hl.copy(e).applyQuaternion(this.quaternion),this.position.add(Hl.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Xl,e)}translateY(e){return this.translateOnAxis(Yl,e)}translateZ(e){return this.translateOnAxis($l,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Vl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Wl.copy(e):Wl.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Gl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vl.lookAt(Gl,Wl,this.up):Vl.lookAt(Wl,Gl,this.up),this.quaternion.setFromRotationMatrix(Vl),n&&(Vl.extractRotation(n.matrixWorld),Ul.setFromRotationMatrix(Vl),this.quaternion.premultiply(Ul.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Jl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Zl)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Zl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Vl.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Vl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,e,jl),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gl,ql,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=s(e.geometries),n=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c)}return i.object=n,i;function s(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}}Ql.DefaultUp=new Jo(0,1,0),Ql.DefaultMatrixAutoUpdate=!0,Ql.prototype.isObject3D=!0;const Kl=new Jo,ec=new Jo,tc=new Jo,ic=new Jo,nc=new Jo,rc=new Jo,sc=new Jo,ac=new Jo,oc=new Jo,lc=new Jo;class cc{constructor(e=new Jo,t=new Jo,i=new Jo){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Kl.subVectors(e,t),n.cross(Kl);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){Kl.subVectors(n,t),ec.subVectors(i,t),tc.subVectors(e,t);const s=Kl.dot(Kl),a=Kl.dot(ec),o=Kl.dot(tc),l=ec.dot(ec),c=ec.dot(tc),u=s*l-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-a*c)*h,p=(s*c-a*o)*h;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,ic),ic.x>=0&&ic.y>=0&&ic.x+ic.y<=1}static getUV(e,t,i,n,r,s,a,o){return this.getBarycoord(e,t,i,n,ic),o.set(0,0),o.addScaledVector(r,ic.x),o.addScaledVector(s,ic.y),o.addScaledVector(a,ic.z),o}static isFrontFacing(e,t,i,n){return Kl.subVectors(i,t),ec.subVectors(e,t),Kl.cross(ec).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kl.subVectors(this.c,this.b),ec.subVectors(this.a,this.b),.5*Kl.cross(ec).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cc.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,r){return cc.getUV(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return cc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let s,a;nc.subVectors(n,i),rc.subVectors(r,i),ac.subVectors(e,i);const o=nc.dot(ac),l=rc.dot(ac);if(o<=0&&l<=0)return t.copy(i);oc.subVectors(e,n);const c=nc.dot(oc),u=rc.dot(oc);if(c>=0&&u<=c)return t.copy(n);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(i).addScaledVector(nc,s);lc.subVectors(e,r);const d=nc.dot(lc),p=rc.dot(lc);if(p>=0&&d<=p)return t.copy(r);const f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(rc,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return sc.subVectors(r,n),a=(u-c)/(u-c+(d-p)),t.copy(n).addScaledVector(sc,a);const g=1/(m+f+h);return s=f*g,a=h*g,t.copy(i).addScaledVector(nc,s).addScaledVector(rc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let uc=0;class hc extends Lo{constructor(){super(),Object.defineProperty(this,"id",{value:uc++}),this.uuid=Io(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=1023,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(i.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(i.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),1023!==this.format&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}hc.prototype.isMaterial=!0;const dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pc={h:0,s:0,l:0},fc={h:0,s:0,l:0};function mc(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}function gc(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function vc(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class yc{constructor(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=Do(e,1),t=Oo(t,0,1),i=Oo(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=mc(r,n,e+1/3),this.g=mc(r,n,e),this.b=mc(r,n,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const n=i[1],r=i[2];switch(n){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const i=parseFloat(e[1])/360,n=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(i,n,r)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=i[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=dc[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=gc(e.r),this.g=gc(e.g),this.b=gc(e.b),this}copyLinearToSRGB(e){return this.r=vc(e.r),this.g=vc(e.g),this.b=vc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,n=this.b,r=Math.max(t,i,n),s=Math.min(t,i,n);let a,o;const l=(s+r)/2;if(s===r)a=0,o=0;else{const e=r-s;switch(o=l<=.5?e/(r+s):e/(2-r-s),r){case t:a=(i-n)/e+(i<n?6:0);break;case i:a=(n-t)/e+2;break;case n:a=(t-i)/e+4}a/=6}return e.h=a,e.s=o,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,i){return this.getHSL(pc),pc.h+=e,pc.s+=t,pc.l+=i,this.setHSL(pc.h,pc.s,pc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(pc),e.getHSL(fc);const i=zo(pc.h,fc.h,t),n=zo(pc.s,fc.s,t),r=zo(pc.l,fc.l,t);return this.setHSL(i,n,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}yc.NAMES=dc,yc.prototype.isColor=!0,yc.prototype.r=1,yc.prototype.g=1,yc.prototype.b=1;class xc extends hc{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new yc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}xc.prototype.isMeshBasicMaterial=!0;const bc=new Jo,wc=new Fo;class _c{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new yc),t[i++]=r.r,t[i++]=r.g,t[i++]=r.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new Fo),t[i++]=r.x,t[i++]=r.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new Jo),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let n=0,r=e.length;n<r;n++){let r=e[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new qo),t[i++]=r.x,t[i++]=r.y,t[i++]=r.z,t[i++]=r.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)wc.fromBufferAttribute(this,t),wc.applyMatrix3(e),this.setXY(t,wc.x,wc.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)bc.fromBufferAttribute(this,t),bc.applyMatrix3(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)bc.x=this.getX(t),bc.y=this.getY(t),bc.z=this.getZ(t),bc.applyMatrix4(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)bc.x=this.getX(t),bc.y=this.getY(t),bc.z=this.getZ(t),bc.applyNormalMatrix(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)bc.x=this.getX(t),bc.y=this.getY(t),bc.z=this.getZ(t),bc.transformDirection(e),this.setXYZ(t,bc.x,bc.y,bc.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}_c.prototype.isBufferAttribute=!0;class Mc extends _c{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Sc extends _c{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class extends _c{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class Ec extends _c{constructor(e,t,i){super(new Float32Array(e),t,i)}}function Tc(e){if(0===e.length)return-1/0;let t=e[0];for(let i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let Ac=0;const Cc=new Al,Lc=new Ql,Pc=new Jo,Rc=new Ko,kc=new Ko,Ic=new Jo;class Oc extends Lo{constructor(){super(),Object.defineProperty(this,"id",{value:Ac++}),this.uuid=Io(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Tc(e)>65535?Sc:Mc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Ho).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cc.makeRotationFromQuaternion(e),this.applyMatrix4(Cc),this}rotateX(e){return Cc.makeRotationX(e),this.applyMatrix4(Cc),this}rotateY(e){return Cc.makeRotationY(e),this.applyMatrix4(Cc),this}rotateZ(e){return Cc.makeRotationZ(e),this.applyMatrix4(Cc),this}translate(e,t,i){return Cc.makeTranslation(e,t,i),this.applyMatrix4(Cc),this}scale(e,t,i){return Cc.makeScale(e,t,i),this.applyMatrix4(Cc),this}lookAt(e){return Lc.lookAt(e),Lc.updateMatrix(),this.applyMatrix4(Lc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pc).negate(),this.translate(Pc.x,Pc.y,Pc.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Ec(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ko);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jo(-1/0,-1/0,-1/0),new Jo(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Rc.setFromBufferAttribute(i),this.morphTargetsRelative?(Ic.addVectors(this.boundingBox.min,Rc.min),this.boundingBox.expandByPoint(Ic),Ic.addVectors(this.boundingBox.max,Rc.max),this.boundingBox.expandByPoint(Ic)):(this.boundingBox.expandByPoint(Rc.min),this.boundingBox.expandByPoint(Rc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new yl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jo,1/0);if(e){const i=this.boundingSphere.center;if(Rc.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];kc.setFromBufferAttribute(i),this.morphTargetsRelative?(Ic.addVectors(Rc.min,kc.min),Rc.expandByPoint(Ic),Ic.addVectors(Rc.max,kc.max),Rc.expandByPoint(Ic)):(Rc.expandByPoint(kc.min),Rc.expandByPoint(kc.max))}Rc.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)Ic.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Ic));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)Ic.fromBufferAttribute(s,t),a&&(Pc.fromBufferAttribute(e,t),Ic.add(Pc)),n=Math.max(n,i.distanceToSquared(Ic))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,n=t.position.array,r=t.normal.array,s=t.uv.array,a=n.length/3;void 0===t.tangent&&this.setAttribute("tangent",new _c(new Float32Array(4*a),4));const o=t.tangent.array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new Jo,c[e]=new Jo;const u=new Jo,h=new Jo,d=new Jo,p=new Fo,f=new Fo,m=new Fo,g=new Jo,v=new Jo;function y(e,t,i){u.fromArray(n,3*e),h.fromArray(n,3*t),d.fromArray(n,3*i),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*i),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[i].add(g),c[e].add(v),c[t].add(v),c[i].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(let e=0,t=x.length;e<t;++e){const t=x[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)y(i[e+0],i[e+1],i[e+2])}const b=new Jo,w=new Jo,_=new Jo,M=new Jo;function S(e){_.fromArray(r,3*e),M.copy(_);const t=l[e];b.copy(t),b.sub(_.multiplyScalar(_.dot(t))).normalize(),w.crossVectors(M,t);const i=w.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=i}for(let e=0,t=x.length;e<t;++e){const t=x[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)S(i[e+0]),S(i[e+1]),S(i[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new _c(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new Jo,r=new Jo,s=new Jo,a=new Jo,o=new Jo,l=new Jo,c=new Jo,u=new Jo;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,r),u.subVectors(n,r),c.cross(u),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),a.add(c),o.add(c),l.add(c),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(n,r),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const n in i){if(void 0===e.attributes[n])continue;const r=i[n].array,s=e.attributes[n],a=s.array,o=s.itemSize*t,l=Math.min(a.length,r.length-o);for(let e=0,t=o;e<l;e++,t++)r[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ic.fromBufferAttribute(e,t),Ic.normalize(),e.setXYZ(t,Ic.x,Ic.y,Ic.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,s=new i.constructor(t.length*n);let a=0,o=0;for(let r=0,l=t.length;r<l;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*n;for(let e=0;e<n;e++)s[o++]=i[a++]}return new _c(s,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Oc,i=this.index.array,n=this.attributes;for(const r in n){const s=e(n[r],i);t.setAttribute(r,s)}const r=this.morphAttributes;for(const n in r){const s=[],a=r[n];for(let t=0,n=a.length;t<n;t++){const n=e(a[t],i);s.push(n)}t.morphAttributes[n]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,i=s.length;e<i;e++){const i=s[e];t.addGroup(i.start,i.count,i.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const t in i){const n=i[t];e.data.attributes[t]=n.toJSON(e.data)}const n={};let r=!1;for(const t in this.morphAttributes){const i=this.morphAttributes[t],s=[];for(let t=0,n=i.length;t<n;t++){const n=i[t];s.push(n.toJSON(e.data))}s.length>0&&(n[t]=s,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new Oc).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const e in n){const i=n[e];this.setAttribute(e,i.clone(t))}const r=e.morphAttributes;for(const e in r){const i=[],n=r[e];for(let e=0,r=n.length;e<r;e++)i.push(n[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Oc.prototype.isBufferGeometry=!0;const Dc=new Al,zc=new Tl,Nc=new yl,Bc=new Jo,Fc=new Jo,Hc=new Jo,Uc=new Jo,Vc=new Jo,Wc=new Jo,Gc=new Jo,jc=new Jo,qc=new Jo,Xc=new Fo,Yc=new Fo,$c=new Fo,Jc=new Jo,Zc=new Jo;class Qc extends Ql{constructor(e=new Oc,t=new xc){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),Nc.copy(i.boundingSphere),Nc.applyMatrix4(r),!1===e.ray.intersectsSphere(Nc))return;if(Dc.copy(r).invert(),zc.copy(e.ray).applyMatrix4(Dc),null!==i.boundingBox&&!1===zc.intersectsBox(i.boundingBox))return;let s;if(i.isBufferGeometry){const r=i.index,a=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative,c=i.attributes.uv,u=i.attributes.uv2,h=i.groups,d=i.drawRange;if(null!==r)if(Array.isArray(n))for(let i=0,p=h.length;i<p;i++){const p=h[i],f=n[p.materialIndex];for(let i=Math.max(p.start,d.start),n=Math.min(p.start+p.count,d.start+d.count);i<n;i+=3){const n=r.getX(i),h=r.getX(i+1),d=r.getX(i+2);s=Kc(this,f,e,zc,a,o,l,c,u,n,h,d),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=p.materialIndex,t.push(s))}}else{for(let i=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);i<h;i+=3){const h=r.getX(i),d=r.getX(i+1),p=r.getX(i+2);s=Kc(this,n,e,zc,a,o,l,c,u,h,d,p),s&&(s.faceIndex=Math.floor(i/3),t.push(s))}}else if(void 0!==a)if(Array.isArray(n))for(let i=0,r=h.length;i<r;i++){const r=h[i],p=n[r.materialIndex];for(let i=Math.max(r.start,d.start),n=Math.min(r.start+r.count,d.start+d.count);i<n;i+=3){s=Kc(this,p,e,zc,a,o,l,c,u,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=r.materialIndex,t.push(s))}}else{for(let i=Math.max(0,d.start),r=Math.min(a.count,d.start+d.count);i<r;i+=3){s=Kc(this,n,e,zc,a,o,l,c,u,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),t.push(s))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Kc(e,t,i,n,r,s,a,o,l,c,u,h){Bc.fromBufferAttribute(r,c),Fc.fromBufferAttribute(r,u),Hc.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(s&&d){Gc.set(0,0,0),jc.set(0,0,0),qc.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],i=s[e];0!==t&&(Uc.fromBufferAttribute(i,c),Vc.fromBufferAttribute(i,u),Wc.fromBufferAttribute(i,h),a?(Gc.addScaledVector(Uc,t),jc.addScaledVector(Vc,t),qc.addScaledVector(Wc,t)):(Gc.addScaledVector(Uc.sub(Bc),t),jc.addScaledVector(Vc.sub(Fc),t),qc.addScaledVector(Wc.sub(Hc),t)))}Bc.add(Gc),Fc.add(jc),Hc.add(qc)}e.isSkinnedMesh&&(e.boneTransform(c,Bc),e.boneTransform(u,Fc),e.boneTransform(h,Hc));const p=function(e,t,i,n,r,s,a,o){let l;if(l=1===t.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,2!==t.side,o),null===l)return null;Zc.copy(o),Zc.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(Zc);return c<i.near||c>i.far?null:{distance:c,point:Zc.clone(),object:e}}(e,t,i,n,Bc,Fc,Hc,Jc);if(p){o&&(Xc.fromBufferAttribute(o,c),Yc.fromBufferAttribute(o,u),$c.fromBufferAttribute(o,h),p.uv=cc.getUV(Jc,Bc,Fc,Hc,Xc,Yc,$c,new Fo)),l&&(Xc.fromBufferAttribute(l,c),Yc.fromBufferAttribute(l,u),$c.fromBufferAttribute(l,h),p.uv2=cc.getUV(Jc,Bc,Fc,Hc,Xc,Yc,$c,new Fo));const e={a:c,b:u,c:h,normal:new Jo,materialIndex:0};cc.getNormal(Bc,Fc,Hc,e.normal),p.face=e}return p}Qc.prototype.isMesh=!0;class eu extends Oc{constructor(e=1,t=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const a=this;n=Math.floor(n),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,i,n,r,s,p,f,m,g,v){const y=s/m,x=p/g,b=s/2,w=p/2,_=f/2,M=m+1,S=g+1;let E=0,T=0;const A=new Jo;for(let s=0;s<S;s++){const a=s*x-w;for(let o=0;o<M;o++){const h=o*y-b;A[e]=h*n,A[t]=a*r,A[i]=_,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[i]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const i=h+t+M*e,n=h+t+M*(e+1),r=h+(t+1)+M*(e+1),s=h+(t+1)+M*e;o.push(i,n,s),o.push(n,r,s),T+=6}a.addGroup(d,T,v),d+=T,h+=E}p("z","y","x",-1,-1,i,t,e,s,r,0),p("z","y","x",1,-1,i,t,-e,s,r,1),p("x","z","y",1,1,e,i,t,n,s,2),p("x","z","y",1,-1,e,i,-t,n,s,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new Ec(l,3)),this.setAttribute("normal",new Ec(c,3)),this.setAttribute("uv",new Ec(u,2))}static fromJSON(e){return new eu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tu(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function iu(e){const t={};for(let i=0;i<e.length;i++){const n=tu(e[i]);for(const e in n)t[e]=n[e]}return t}const nu={clone:tu,merge:iu};class ru extends hc{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}ru.prototype.isShaderMaterial=!0;class su extends Ql{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Al,this.projectionMatrix=new Al,this.projectionMatrixInverse=new Al}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}su.prototype.isCamera=!0;class au extends su{constructor(e=50,t=1,i=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ko*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ro*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ko*Math.atan(Math.tan(.5*Ro*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ro*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/e,t-=s.offsetY*i/a,n*=s.width/e,i*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}au.prototype.isPerspectiveCamera=!0;class ou extends Ql{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const n=new au(90,1,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new Jo(1,0,0)),this.add(n);const r=new au(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jo(-1,0,0)),this.add(r);const s=new au(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Jo(0,1,0)),this.add(s);const a=new au(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Jo(0,-1,0)),this.add(a);const o=new au(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Jo(0,0,1)),this.add(o);const l=new au(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Jo(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,r,s,a,o,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class lu extends Go{constructor(e,t,i,n,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,n,r,s,a=void 0!==a?a:1022,o,l,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}lu.prototype.isCubeTexture=!0;class cu extends Xo{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),t=t||{},this.texture=new lu(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},n=new eu(5,5,5),r=new ru({name:"CubemapFromEquirect",uniforms:tu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const s=new Qc(n,r),a=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);return new ou(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,n){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,n);e.setRenderTarget(r)}}cu.prototype.isWebGLCubeRenderTarget=!0;const uu=new Jo,hu=new Jo,du=new Ho;class pu{constructor(e=new Jo(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=uu.subVectors(i,t).cross(hu.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(uu),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||du.getNormalMatrix(e),n=this.coplanarPoint(uu).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}pu.prototype.isPlane=!0;const fu=new yl,mu=new Jo;class gu{constructor(e=new pu,t=new pu,i=new pu,n=new pu,r=new pu,s=new pu){this.planes=[e,t,i,n,r,s]}set(e,t,i,n,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6],u=i[7],h=i[8],d=i[9],p=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(a-n,u-o,f-h,y-m).normalize(),t[1].setComponents(a+n,u+o,f+h,y+m).normalize(),t[2].setComponents(a+r,u+l,f+d,y+g).normalize(),t[3].setComponents(a-r,u-l,f-d,y-g).normalize(),t[4].setComponents(a-s,u-c,f-p,y-v).normalize(),t[5].setComponents(a+s,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(fu)}intersectsSprite(e){return fu.center.set(0,0,0),fu.radius=.7071067811865476,fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(fu)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(i)<n)return!1}return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(mu.x=n.normal.x>0?e.max.x:e.min.x,mu.y=n.normal.y>0?e.max.y:e.min.y,mu.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(mu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vu(){let e=null,t=!1,i=null,n=null;function r(t,s){i(t,s),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function yu(e,t){const i=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);i&&(e.deleteBuffer(i.buffer),n.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=n.get(t);void 0===s?n.set(t,function(t,n){const r=t.array,s=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,s),t.onUploadCallback();let o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?t.isFloat16BufferAttribute?i?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):s.version<t.version&&(!function(t,n,r){const s=n.array,a=n.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,s):(i?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}(s.buffer,t,r),s.version=t.version)}}}class xu extends Oc{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,s=t/2,a=Math.floor(i),o=Math.floor(n),l=a+1,c=o+1,u=e/a,h=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-s;for(let i=0;i<l;i++){const n=i*u-r;p.push(n,-t,0),f.push(0,0,1),m.push(i/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const i=t+l*e,n=t+l*(e+1),r=t+1+l*(e+1),s=t+1+l*e;d.push(i,n,s),d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new Ec(p,3)),this.setAttribute("normal",new Ec(f,3)),this.setAttribute("uv",new Ec(m,2))}static fromJSON(e){return new xu(e.width,e.height,e.widthSegments,e.heightSegments)}}const bu={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotVH = saturate( dot( geometry.viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float NoH ) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float NoV, float NoL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );\n}\nvec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in GeometricContext geometry ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = transmission.a;\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},wu={common:{diffuse:{value:new yc(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ho},uv2Transform:{value:new Ho},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Fo(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yc(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yc(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ho}},sprite:{diffuse:{value:new yc(16777215)},opacity:{value:1},center:{value:new Fo(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ho}}},_u={basic:{uniforms:iu([wu.common,wu.specularmap,wu.envmap,wu.aomap,wu.lightmap,wu.fog]),vertexShader:bu.meshbasic_vert,fragmentShader:bu.meshbasic_frag},lambert:{uniforms:iu([wu.common,wu.specularmap,wu.envmap,wu.aomap,wu.lightmap,wu.emissivemap,wu.fog,wu.lights,{emissive:{value:new yc(0)}}]),vertexShader:bu.meshlambert_vert,fragmentShader:bu.meshlambert_frag},phong:{uniforms:iu([wu.common,wu.specularmap,wu.envmap,wu.aomap,wu.lightmap,wu.emissivemap,wu.bumpmap,wu.normalmap,wu.displacementmap,wu.fog,wu.lights,{emissive:{value:new yc(0)},specular:{value:new yc(1118481)},shininess:{value:30}}]),vertexShader:bu.meshphong_vert,fragmentShader:bu.meshphong_frag},standard:{uniforms:iu([wu.common,wu.envmap,wu.aomap,wu.lightmap,wu.emissivemap,wu.bumpmap,wu.normalmap,wu.displacementmap,wu.roughnessmap,wu.metalnessmap,wu.fog,wu.lights,{emissive:{value:new yc(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bu.meshphysical_vert,fragmentShader:bu.meshphysical_frag},toon:{uniforms:iu([wu.common,wu.aomap,wu.lightmap,wu.emissivemap,wu.bumpmap,wu.normalmap,wu.displacementmap,wu.gradientmap,wu.fog,wu.lights,{emissive:{value:new yc(0)}}]),vertexShader:bu.meshtoon_vert,fragmentShader:bu.meshtoon_frag},matcap:{uniforms:iu([wu.common,wu.bumpmap,wu.normalmap,wu.displacementmap,wu.fog,{matcap:{value:null}}]),vertexShader:bu.meshmatcap_vert,fragmentShader:bu.meshmatcap_frag},points:{uniforms:iu([wu.points,wu.fog]),vertexShader:bu.points_vert,fragmentShader:bu.points_frag},dashed:{uniforms:iu([wu.common,wu.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bu.linedashed_vert,fragmentShader:bu.linedashed_frag},depth:{uniforms:iu([wu.common,wu.displacementmap]),vertexShader:bu.depth_vert,fragmentShader:bu.depth_frag},normal:{uniforms:iu([wu.common,wu.bumpmap,wu.normalmap,wu.displacementmap,{opacity:{value:1}}]),vertexShader:bu.meshnormal_vert,fragmentShader:bu.meshnormal_frag},sprite:{uniforms:iu([wu.sprite,wu.fog]),vertexShader:bu.sprite_vert,fragmentShader:bu.sprite_frag},background:{uniforms:{uvTransform:{value:new Ho},t2D:{value:null}},vertexShader:bu.background_vert,fragmentShader:bu.background_frag},cube:{uniforms:iu([wu.envmap,{opacity:{value:1}}]),vertexShader:bu.cube_vert,fragmentShader:bu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bu.equirect_vert,fragmentShader:bu.equirect_frag},distanceRGBA:{uniforms:iu([wu.common,wu.displacementmap,{referencePosition:{value:new Jo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bu.distanceRGBA_vert,fragmentShader:bu.distanceRGBA_frag},shadow:{uniforms:iu([wu.lights,wu.fog,{color:{value:new yc(0)},opacity:{value:1}}]),vertexShader:bu.shadow_vert,fragmentShader:bu.shadow_frag}};function Mu(e,t,i,n,r){const s=new yc(0);let a,o,l=0,c=null,u=0,h=null;function d(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),l=t,d(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(s,l)},render:function(i,r){let p=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?d(s,l):f&&f.isColor&&(d(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===o&&(o=new Qc(new eu(1,1,1),new ru({name:"BackgroundCubeMaterial",uniforms:tu(_u.cube.uniforms),vertexShader:_u.cube.vertexShader,fragmentShader:_u.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),o.material.uniforms.envMap.value=f,o.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&u===f.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),i.unshift(o,o.geometry,o.material,0,0,null)):f&&f.isTexture&&(void 0===a&&(a=new Qc(new xu(2,2),new ru({name:"BackgroundMaterial",uniforms:tu(_u.background.uniforms),vertexShader:_u.background.vertexShader,fragmentShader:_u.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),a.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&u===f.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),i.unshift(a,a.geometry,a.material,0,0,null))}}}function Su(e,t,i,n){const r=e.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),a=n.isWebGL2||null!==s,o={},l=d(null);let c=l;function u(t){return n.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function h(t){return n.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function d(e){const t=[],i=[],n=[];for(let e=0;e<r;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function f(e){m(e,0)}function m(i,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[i]=1,0===a[i]&&(e.enableVertexAttribArray(i),a[i]=1),o[i]!==r){(n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r}}function g(){const t=c.newAttributes,i=c.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function v(t,i,r,s,a,o){!0!==n.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,i,r,s,a,o):e.vertexAttribIPointer(t,i,r,a,o)}function y(){x(),c!==l&&(c=l,u(c.object))}function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,x){let b=!1;if(a){const t=function(t,i,r){const a=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let u=c[a];void 0===u&&(u=d(n.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=u);return u}(y,h,l);c!==t&&(c=t,u(c.object)),b=function(e,t){const i=c.attributes,n=e.attributes;let r=0;for(const e in n){const t=i[e],s=n[e];if(void 0===t)return!0;if(t.attribute!==s)return!0;if(t.data!==s.data)return!0;r++}return c.attributesNum!==r||c.index!==t}(y,x),b&&function(e,t){const i={},n=e.attributes;let r=0;for(const e in n){const t=n[e],s={};s.attribute=t,t.data&&(s.data=t.data),i[e]=s,r++}c.attributes=i,c.attributesNum=r,c.index=t}(y,x)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==x&&i.update(x,34963),b&&(!function(r,s,a,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const n=c[t];if(n.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=i.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const i=s.data,l=i.stride,d=s.offset;if(i&&i.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)m(n.location+e,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<n.locationSize;e++)f(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)v(n.location+e,a/n.locationSize,u,t,l*h,(d+a/n.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)m(n.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<n.locationSize;e++)f(n.location+e);e.bindBuffer(34962,c);for(let e=0;e<n.locationSize;e++)v(n.location+e,a/n.locationSize,u,t,a*h,a/n.locationSize*e*h)}}else if(void 0!==u){const i=u[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(n.location,i);break;case 3:e.vertexAttrib3fv(n.location,i);break;case 4:e.vertexAttrib4fv(n.location,i);break;default:e.vertexAttrib1fv(n.location,i)}}}}g()}(r,l,h,y),null!==x&&e.bindBuffer(34963,i.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const e in o){const t=o[e];for(const e in t){const i=t[e];for(const e in i)h(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const i=t[e];for(const e in i)h(i[e].object),delete i[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const i=o[t];if(void 0===i[e.id])continue;const n=i[e.id];for(const e in n)h(n[e].object),delete n[e];delete i[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Eu(e,t,i,n){const r=n.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,n){e.drawArrays(s,t,n),i.update(n,s,1)},this.renderInstances=function(n,a,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,n,a,o),i.update(a,s,o)}}function Tu(e,t,i){let n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==i.precision?i.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?e.getParameter(36183):0}}function Au(e){const t=this;let i=null,n=0,r=!1,s=!1;const a=new pu,o=new Ho,l={value:null,needsUpdate:!1};function c(){l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function u(e,i,n,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=n+4*s,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,i=n;t!==s;++t,i+=4)a.copy(e[t]).applyMatrix4(r,o),a.normal.toArray(c,i),c[i+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const a=0!==e.length||t||0!==n||r;return r=t,i=u(e,s,0),n=e.length,a},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(t,a,o){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!r||null===h||0===h.length||s&&!p)s?u(null):c();else{const e=s?0:n,t=4*e;let r=f.clippingState||null;l.value=r,r=u(h,a,t,o);for(let e=0;e!==t;++e)r[e]=i[e];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Cu(e){let t=new WeakMap;function i(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(303===s||304===s){if(t.has(r)){return i(t.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=e.getRenderTarget(),o=new cu(s.height/2);return o.fromEquirectangularTexture(e,r),t.set(r,o),e.setRenderTarget(a),r.addEventListener("dispose",n),i(o.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}_u.physical={uniforms:iu([_u.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Fo(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new yc(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Fo},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new yc(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new yc(1,1,1)},specularTintMap:{value:null}}]),vertexShader:bu.meshphysical_vert,fragmentShader:bu.meshphysical_frag};class Lu extends su{constructor(e=-1,t=1,i=1,n=-1,r=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,s=i+e,a=n+t,o=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Lu.prototype.isOrthographicCamera=!0;class Pu extends ru{constructor(e){super(e),this.type="RawShaderMaterial"}}Pu.prototype.isRawShaderMaterial=!0;const Ru=Math.pow(2,8),ku=[.125,.215,.35,.446,.526,.582],Iu=5+ku.length,Ou={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},Du=new Lu,{_lodPlanes:zu,_sizeLods:Nu,_sigmas:Bu}=qu(),Fu=new yc;let Hu=null;const Uu=(1+Math.sqrt(5))/2,Vu=1/Uu,Wu=[new Jo(1,1,1),new Jo(-1,1,1),new Jo(1,1,-1),new Jo(-1,1,-1),new Jo(0,Uu,Vu),new Jo(0,Uu,-Vu),new Jo(Vu,0,Uu),new Jo(-Vu,0,Uu),new Jo(Uu,Vu,0),new Jo(-Uu,Vu,0)];class Gu{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),i=new Jo(0,1,0);return new Pu({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:Ou[3e3]},outputEncoding:{value:Ou[3e3]}},vertexShader:Zu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Qu()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){Hu=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Ju(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=$u(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<zu.length;e++)zu[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Hu),e.scissorTest=!1,Yu(e,0,0,e.width,e.height)}_fromTexture(e){Hu=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:ju(e)?e.encoding:3002,depthBuffer:!1},i=Xu(t);return i.depthBuffer=!e,this._pingPongRenderTarget=Xu(t),i}_compileMaterial(e){const t=new Qc(zu[0],e);this._renderer.compile(t,Du)}_sceneToCubeUV(e,t,i,n){const r=new au(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.outputEncoding,u=o.toneMapping;o.getClearColor(Fu),o.toneMapping=0,o.outputEncoding=3e3,o.autoClear=!1;const h=new xc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Qc(new eu,h);let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(Fu),p=!0);for(let t=0;t<6;t++){const i=t%3;0==i?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1==i?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t])),Yu(n,i*Ru,t>2?Ru:0,Ru,Ru),o.setRenderTarget(n),p&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=u,o.outputEncoding=c,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){const i=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Ju()):null==this._equirectShader&&(this._equirectShader=$u());const n=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new Qc(zu[0],n),s=n.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=Ou[e.encoding],s.outputEncoding.value=Ou[t.texture.encoding],Yu(t,0,0,3*Ru,2*Ru),i.setRenderTarget(t),i.render(r,Du)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<Iu;t++){const i=Math.sqrt(Bu[t]*Bu[t]-Bu[t-1]*Bu[t-1]),n=Wu[(t-1)%Wu.length];this._blur(e,t-1,t,i,n)}t.autoClear=i}_blur(e,t,i,n,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,n,"latitudinal",r),this._halfBlur(s,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Qc(zu[n],l),u=l.uniforms,h=Nu[i]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/p,i=Math.exp(-t*t/2);m.push(i),0==e?g+=i:e<f&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-i,u.inputEncoding.value=Ou[e.texture.encoding],u.outputEncoding.value=Ou[e.texture.encoding];const v=Nu[n];Yu(t,3*Math.max(0,Ru-2*v),(0===n?0:2*Ru)+2*v*(n>4?n-8+4:0),3*v,2*v),o.setRenderTarget(t),o.render(c,Du)}}function ju(e){return void 0!==e&&1009===e.type&&(3e3===e.encoding||3001===e.encoding||3007===e.encoding)}function qu(){const e=[],t=[],i=[];let n=8;for(let r=0;r<Iu;r++){const s=Math.pow(2,n);t.push(s);let a=1/s;r>4?a=ku[r-8+4-1]:0==r&&(a=0),i.push(a);const o=1/(s-1),l=-o/2,c=1+o/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];g.set(n,p*d*e),v.set(u,f*d*e);const r=[e,e,e,e,e,e];y.set(r,m*d*e)}const x=new Oc;x.setAttribute("position",new _c(g,p)),x.setAttribute("uv",new _c(v,f)),x.setAttribute("faceIndex",new _c(y,m)),e.push(x),n>4&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:i}}function Xu(e){const t=new Xo(3*Ru,3*Ru,e);return t.texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Yu(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function $u(){const e=new Fo(1,1);return new Pu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Ou[3e3]},outputEncoding:{value:Ou[3e3]}},vertexShader:Zu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Qu()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Ju(){return new Pu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ou[3e3]},outputEncoding:{value:Ou[3e3]}},vertexShader:Zu(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Qu()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Zu(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Qu(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Ku(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping,a=303===s||304===s,o=301===s||302===s;if(a||o){if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;for(let i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(s)){const s=e.getRenderTarget();null===i&&(i=new Gu(e));const o=a?i.fromEquirectangular(r):i.fromCubemap(r);return t.set(r,o),e.setRenderTarget(s),r.addEventListener("dispose",n),o.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function eh(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(e){e.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float")},get:function(e){const t=i(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function th(e,t,i,n){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){const i=[],n=e.index,r=e.attributes.position;let a=0;if(null!==n){const e=n.array;a=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],s=e[t+2];i.push(n,r,r,s,s,n)}}else{const e=r.array;a=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}const o=new(Tc(i)>65535?Sc:Mc)(i,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,i.memory.geometries++),t},update:function(e){const i=e.attributes;for(const e in i)t.update(i[e],34962);const n=e.morphAttributes;for(const e in n){const i=n[e];for(let e=0,n=i.length;e<n;e++)t.update(i[e],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return s.get(e)}}}function ih(e,t,i,n){const r=n.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(s,n,a,t*o),i.update(n,s,1)},this.renderInstances=function(n,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,a,n*o,c),i.update(l,s,c)}}function nh(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(t.calls++,i){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function rh(e,t){return e[0]-t[0]}function sh(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ah(e){const t={},i=new Float32Array(8),n=[];for(let e=0;e<8;e++)n[e]=[e,0];return{update:function(r,s,a,o){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[s.id];if(void 0===u||u.length!==c){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[s.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(sh);for(let e=0;e<8;e++)e<c&&u[e][1]?(n[e][0]=u[e][0],n[e][1]=u[e][1]):(n[e][0]=Number.MAX_SAFE_INTEGER,n[e][1]=0);n.sort(rh);const h=s.morphAttributes.position,d=s.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=n[e],r=t[0],a=t[1];r!==Number.MAX_SAFE_INTEGER&&a?(h&&s.getAttribute("morphTarget"+e)!==h[r]&&s.setAttribute("morphTarget"+e,h[r]),d&&s.getAttribute("morphNormal"+e)!==d[r]&&s.setAttribute("morphNormal"+e,d[r]),i[e]=a,p+=a):(h&&!0===s.hasAttribute("morphTarget"+e)&&s.deleteAttribute("morphTarget"+e),d&&!0===s.hasAttribute("morphNormal"+e)&&s.deleteAttribute("morphNormal"+e),i[e]=0)}const f=s.morphTargetsRelative?1:1-p;o.getUniforms().setValue(e,"morphTargetBaseInfluence",f),o.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function oh(e,t,i,n){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(e){const a=n.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),i.update(e.instanceMatrix,34962),null!==e.instanceColor&&i.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}class lh extends Go{constructor(e=null,t=1,i=1,n=1){super(null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}lh.prototype.isDataTexture2DArray=!0;class ch extends Go{constructor(e=null,t=1,i=1,n=1){super(null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ch.prototype.isDataTexture3D=!0;const uh=new Go,hh=new lh,dh=new ch,ph=new lu,fh=[],mh=[],gh=new Float32Array(16),vh=new Float32Array(9),yh=new Float32Array(4);function xh(e,t,i){const n=e[0];if(n<=0||n>0)return e;const r=t*i;let s=fh[r];if(void 0===s&&(s=new Float32Array(r),fh[r]=s),0!==t){n.toArray(s,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(s,r)}return s}function bh(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function wh(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function _h(e,t){let i=mh[t];void 0===i&&(i=new Int32Array(t),mh[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function Mh(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Sh(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(bh(i,t))return;e.uniform2fv(this.addr,t),wh(i,t)}}function Eh(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(bh(i,t))return;e.uniform3fv(this.addr,t),wh(i,t)}}function Th(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(bh(i,t))return;e.uniform4fv(this.addr,t),wh(i,t)}}function Ah(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(bh(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),wh(i,t)}else{if(bh(i,n))return;yh.set(n),e.uniformMatrix2fv(this.addr,!1,yh),wh(i,n)}}function Ch(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(bh(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),wh(i,t)}else{if(bh(i,n))return;vh.set(n),e.uniformMatrix3fv(this.addr,!1,vh),wh(i,n)}}function Lh(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(bh(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),wh(i,t)}else{if(bh(i,n))return;gh.set(n),e.uniformMatrix4fv(this.addr,!1,gh),wh(i,n)}}function Ph(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Rh(e,t){const i=this.cache;bh(i,t)||(e.uniform2iv(this.addr,t),wh(i,t))}function kh(e,t){const i=this.cache;bh(i,t)||(e.uniform3iv(this.addr,t),wh(i,t))}function Ih(e,t){const i=this.cache;bh(i,t)||(e.uniform4iv(this.addr,t),wh(i,t))}function Oh(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Dh(e,t){const i=this.cache;bh(i,t)||(e.uniform2uiv(this.addr,t),wh(i,t))}function zh(e,t){const i=this.cache;bh(i,t)||(e.uniform3uiv(this.addr,t),wh(i,t))}function Nh(e,t){const i=this.cache;bh(i,t)||(e.uniform4uiv(this.addr,t),wh(i,t))}function Bh(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(t||uh,r)}function Fh(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||dh,r)}function Hh(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(t||ph,r)}function Uh(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||hh,r)}function Vh(e,t){e.uniform1fv(this.addr,t)}function Wh(e,t){const i=xh(t,this.size,2);e.uniform2fv(this.addr,i)}function Gh(e,t){const i=xh(t,this.size,3);e.uniform3fv(this.addr,i)}function jh(e,t){const i=xh(t,this.size,4);e.uniform4fv(this.addr,i)}function qh(e,t){const i=xh(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Xh(e,t){const i=xh(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Yh(e,t){const i=xh(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function $h(e,t){e.uniform1iv(this.addr,t)}function Jh(e,t){e.uniform2iv(this.addr,t)}function Zh(e,t){e.uniform3iv(this.addr,t)}function Qh(e,t){e.uniform4iv(this.addr,t)}function Kh(e,t){e.uniform1uiv(this.addr,t)}function ed(e,t){e.uniform2uiv(this.addr,t)}function td(e,t){e.uniform3uiv(this.addr,t)}function id(e,t){e.uniform4uiv(this.addr,t)}function nd(e,t,i){const n=t.length,r=_h(i,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)i.safeSetTexture2D(t[e]||uh,r[e])}function rd(e,t,i){const n=t.length,r=_h(i,n);e.uniform1iv(this.addr,r);for(let e=0;e!==n;++e)i.safeSetTextureCube(t[e]||ph,r[e])}function sd(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Mh;case 35664:return Sh;case 35665:return Eh;case 35666:return Th;case 35674:return Ah;case 35675:return Ch;case 35676:return Lh;case 5124:case 35670:return Ph;case 35667:case 35671:return Rh;case 35668:case 35672:return kh;case 35669:case 35673:return Ih;case 5125:return Oh;case 36294:return Dh;case 36295:return zh;case 36296:return Nh;case 35678:case 36198:case 36298:case 36306:case 35682:return Bh;case 35679:case 36299:case 36307:return Fh;case 35680:case 36300:case 36308:case 36293:return Hh;case 36289:case 36303:case 36311:case 36292:return Uh}}(t.type)}function ad(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Vh;case 35664:return Wh;case 35665:return Gh;case 35666:return jh;case 35674:return qh;case 35675:return Xh;case 35676:return Yh;case 5124:case 35670:return $h;case 35667:case 35671:return Jh;case 35668:case 35672:return Zh;case 35669:case 35673:return Qh;case 5125:return Kh;case 36294:return ed;case 36295:return td;case 36296:return id;case 35678:case 36198:case 36298:case 36306:case 35682:return nd;case 35680:case 36300:case 36308:case 36293:return rd}}(t.type)}function od(e){this.id=e,this.seq=[],this.map={}}ad.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),wh(t,e)},od.prototype.setValue=function(e,t,i){const n=this.seq;for(let r=0,s=n.length;r!==s;++r){const s=n[r];s.setValue(e,t[s.id],i)}};const ld=/(\w+)(\])?(\[|\.)?/g;function cd(e,t){e.seq.push(t),e.map[t.id]=t}function ud(e,t,i){const n=e.name,r=n.length;for(ld.lastIndex=0;;){const s=ld.exec(n),a=ld.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){cd(i,void 0===c?new sd(o,e,t):new ad(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new od(o),cd(i,e)),i=e}}}function hd(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);ud(i,e.getUniformLocation(t,i.name),this)}}function dd(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}hd.prototype.setValue=function(e,t,i,n){const r=this.map[t];void 0!==r&&r.setValue(e,i,n)},hd.prototype.setOptional=function(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)},hd.upload=function(e,t,i,n){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=i[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,n)}},hd.seqWithValue=function(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&i.push(r)}return i};let pd=0;function fd(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function md(e,t,i){const n=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return n&&""===r?"":i.toUpperCase()+"\n\n"+r+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function gd(e,t){const i=fd(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function vd(e,t){const i=fd(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function yd(e,t){let i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function xd(e){return""!==e}function bd(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function wd(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const _d=/^[ \t]*#include +<([\w\d./]+)>/gm;function Md(e){return e.replace(_d,Sd)}function Sd(e,t){const i=bu[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return Md(i)}const Ed=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Td=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ad(e){return e.replace(Td,Ld).replace(Ed,Cd)}function Cd(e,t,i,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ld(e,t,i,n)}function Ld(e,t,i,n){let r="";for(let e=parseInt(t);e<parseInt(i);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function Pd(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Rd(e,t,i,n){const r=e.getContext(),s=i.defines;let a=i.vertexShader,o=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(i),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(i),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(i),d=e.gammaFactor>0?e.gammaFactor:1,p=i.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xd).join("\n")}(i),f=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(s),m=r.createProgram();let g,v,y=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(g=[f].filter(xd).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(xd).join("\n"),v.length>0&&(v+="\n")):(g=[Pd(i),"#define SHADER_NAME "+i.shaderName,f,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularTintMap?"#define USE_SPECULARTINTMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xd).join("\n"),v=[p,Pd(i),"#define SHADER_NAME "+i.shaderName,f,"#define GAMMA_FACTOR "+d,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularTintMap?"#define USE_SPECULARTINTMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheenTint?"#define USE_SHEEN":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?bu.tonemapping_pars_fragment:"",0!==i.toneMapping?yd("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",1022===i.format?"#define OPAQUE":"",bu.encodings_pars_fragment,i.map?gd("mapTexelToLinear",i.mapEncoding):"",i.matcap?gd("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?gd("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?gd("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.specularTintMap?gd("specularTintMapTexelToLinear",i.specularTintMapEncoding):"",i.lightMap?gd("lightMapTexelToLinear",i.lightMapEncoding):"",vd("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(xd).join("\n")),a=Md(a),a=bd(a,i),a=wd(a,i),o=Md(o),o=bd(o,i),o=wd(o,i),a=Ad(a),o=Ad(o),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(y="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===i.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===i.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+o,b=dd(r,35633,y+g+a),w=dd(r,35632,x);if(r.attachShader(m,b),r.attachShader(m,w),void 0!==i.index0AttributeName?r.bindAttribLocation(m,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(b).trim(),i=r.getShaderInfoLog(w).trim();let n=!0,s=!0;if(!1===r.getProgramParameter(m,35714)){n=!1;const t=md(r,b,"vertex"),i=md(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==i||(s=!1);s&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:i,prefix:v}})}let _,M;return r.deleteShader(b),r.deleteShader(w),this.getUniforms=function(){return void 0===_&&(_=new hd(r,m)),_},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const i={},n=e.getProgramParameter(t,35721);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r),s=n.name;let a=1;35674===n.type&&(a=2),35675===n.type&&(a=3),35676===n.type&&(a=4),i[s]={type:n.type,location:e.getAttribLocation(t,s),locationSize:a}}return i}(r,m)),M},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=i.shaderName,this.id=pd++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=w,this}function kd(e,t,i,n,r,s,a){const o=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,h=r.maxVertexUniforms,d=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function g(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(s,o,m,v,y){const x=v.fog,b=s.isMeshStandardMaterial?v.environment:null,w=(s.isMeshStandardMaterial?i:t).get(s.envMap||b),_=f[s.type],M=y.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(u)return 1024;{const e=h,i=Math.floor((e-20)/4),n=Math.min(i,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}}(y):0;let S,E;if(null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead.")),_){const e=_u[_];S=e.vertexShader,E=e.fragmentShader}else S=s.vertexShader,E=s.fragmentShader;const T=e.getRenderTarget(),A=s.alphaTest>0,C=s.clearcoat>0;return{isWebGL2:l,shaderID:_,shaderName:s.type,vertexShader:S,fragmentShader:E,defines:s.defines,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:d,outputEncoding:null!==T?g(T.texture):e.outputEncoding,map:!!s.map,mapEncoding:g(s.map),matcap:!!s.matcap,matcapEncoding:g(s.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:g(w),envMapCubeUV:!!w&&(306===w.mapping||307===w.mapping),lightMap:!!s.lightMap,lightMapEncoding:g(s.lightMap),aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,emissiveMapEncoding:g(s.emissiveMap),bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:1===s.normalMapType,tangentSpaceNormalMap:0===s.normalMapType,clearcoat:C,clearcoatMap:C&&!!s.clearcoatMap,clearcoatRoughnessMap:C&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularTintMap:!!s.specularTintMap,specularTintMapEncoding:g(s.specularTintMap),alphaMap:!!s.alphaMap,alphaTest:A,gradientMap:!!s.gradientMap,sheenTint:!!s.sheenTint&&(s.sheenTint.r>0||s.sheenTint.g>0||s.sheenTint.b>0),transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularTintMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularTintMap||!s.displacementMap),fog:!!x,useFog:s.fog,fogExp2:x&&x.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===y.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:u,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:s.format,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||n.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<m.length;e++)i.push(t[m[e]]);i.push(e.outputEncoding),i.push(e.gammaFactor)}return i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=f[e.type];let i;if(t){const e=_u[t];i=nu.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new Rd(e,i,t,s),o.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function Id(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function Od(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Dd(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function zd(e){const t=[];let i=0;const n=[],r=[],s=[],a={id:-1};function o(n,r,s,o,l,c){let u=t[i];const h=e.get(s);return void 0===u?(u={id:n.id,object:n,geometry:r,material:s,program:h.program||a,groupOrder:o,renderOrder:n.renderOrder,z:l,group:c},t[i]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=s,u.program=h.program||a,u.groupOrder=o,u.renderOrder=n.renderOrder,u.z=l,u.group=c),i++,u}return{opaque:n,transmissive:r,transparent:s,init:function(){i=0,n.length=0,r.length=0,s.length=0},push:function(e,t,i,a,l,c){const u=o(e,t,i,a,l,c);i.transmission>0?r.push(u):!0===i.transparent?s.push(u):n.push(u)},unshift:function(e,t,i,a,l,c){const u=o(e,t,i,a,l,c);i.transmission>0?r.unshift(u):!0===i.transparent?s.unshift(u):n.unshift(u)},finish:function(){for(let e=i,n=t.length;e<n;e++){const i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Od),r.length>1&&r.sort(t||Dd),s.length>1&&s.sort(t||Dd)}}}function Nd(e){let t=new WeakMap;return{get:function(i,n){let r;return!1===t.has(i)?(r=new zd(e),t.set(i,[r])):n>=t.get(i).length?(r=new zd(e),t.get(i).push(r)):r=t.get(i)[n],r},dispose:function(){t=new WeakMap}}}function Bd(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Jo,color:new yc};break;case"SpotLight":i={position:new Jo,direction:new Jo,color:new yc,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Jo,color:new yc,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Jo,skyColor:new yc,groundColor:new yc};break;case"RectAreaLight":i={color:new yc,position:new Jo,halfWidth:new Jo,halfHeight:new Jo}}return e[t.id]=i,i}}}let Fd=0;function Hd(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ud(e,t){const i=new Bd,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fo};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fo,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new Jo);const s=new Jo,a=new Al,o=new Al;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;s.sort(Hd);const y=!0!==a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,x=t.intensity,b=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*x*y,l+=a.g*x*y,c+=a.b*x*y;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.directionalShadow[u]=i,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=i.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(x*y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.spotShadow[d]=i,r.spotShadowMap[d]=w,r.spotShadowMatrix[d]=t.shadow.matrix,v++}r.spot[d]=e,d++}else if(t.isRectAreaLight){const e=i.get(t);e.color.copy(a).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[p]=e,p++}else if(t.isPointLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,r.pointShadow[h]=i,r.pointShadowMap[h]=w,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){const e=i.get(t);e.skyColor.copy(t.color).multiplyScalar(x*y),e.groundColor.copy(t.groundColor).multiplyScalar(x*y),r.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=wu.LTC_FLOAT_1,r.rectAreaLTC2=wu.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=wu.LTC_HALF_1,r.rectAreaLTC2=wu.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const x=r.hash;x.directionalLength===u&&x.pointLength===h&&x.spotLength===d&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v||(r.directional.length=u,r.spot.length=d,r.rectArea.length=p,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotShadowMatrix.length=v,x.directionalLength=u,x.pointLength=h,x.spotLength=d,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,r.version=Fd++)},setupView:function(e,t){let i=0,n=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[i];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),i++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(d.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=r.point[n];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),n++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:r}}function Vd(e,t){const i=new Ud(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Wd(e,t){let i=new WeakMap;return{get:function(n,r=0){let s;return!1===i.has(n)?(s=new Vd(e,t),i.set(n,[s])):r>=i.get(n).length?(s=new Vd(e,t),i.get(n).push(s)):s=i.get(n)[r],s},dispose:function(){i=new WeakMap}}}class Gd extends hc{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Gd.prototype.isMeshDepthMaterial=!0;class jd extends hc{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Jo,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}jd.prototype.isMeshDistanceMaterial=!0;function qd(e,t,i){let n=new gu;const r=new Fo,s=new Fo,a=new qo,o=new Gd({depthPacking:3201}),l=new jd,c={},u=i.maxTextureSize,h={0:1,1:0,2:2},d=new ru({uniforms:{shadow_pass:{value:null},resolution:{value:new Fo},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Oc;f.setAttribute("position",new _c(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Qc(f,d),g=this;function v(i,n){const r=t.update(m);d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,d.uniforms.samples.value=i.blurSamples,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,r,d,m,null),p.uniforms.shadow_pass.value=i.mapPass.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,p.uniforms.samples.value=i.blurSamples,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,r,p,m,null)}function y(t,i,n,r,s,a,u){let d=null;const p=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(d=void 0!==p?p:!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=d.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=d.clone(),i[t]=r),d=r}return d.visible=n.visible,d.wireframe=n.wireframe,d.side=3===u?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],d.alphaMap=n.alphaMap,d.alphaTest=n.alphaTest,d.clipShadows=n.clipShadows,d.clippingPlanes=n.clippingPlanes,d.clipIntersection=n.clipIntersection,d.displacementMap=n.displacementMap,d.displacementScale=n.displacementScale,d.displacementBias=n.displacementBias,d.wireframeLinewidth=n.wireframeLinewidth,d.linewidth=n.linewidth,!0===r.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(r.matrixWorld),d.nearDistance=s,d.farDistance=a),d}function x(i,r,s,a,o){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===o)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);const n=t.update(i),r=i.material;if(Array.isArray(r)){const t=n.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=y(i,0,u,a,s.near,s.far,o);e.renderBufferDirect(s,null,n,t,i,c)}}}else if(r.visible){const t=y(i,0,r,a,s.near,s.far,o);e.renderBufferDirect(s,null,n,t,i,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)x(l[e],r,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),s.copy(h.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/p.x),r.x=s.x*p.x,h.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/p.y),r.y=s.y*p.y,h.mapSize.y=s.y)),null===h.map&&!h.isPointLightShadow&&3===this.type){const e={minFilter:1006,magFilter:1006,format:1023};h.map=new Xo(r.x,r.y,e),h.map.texture.name=c.name+".shadowMap",h.mapPass=new Xo(r.x,r.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:1003,magFilter:1003,format:1023};h.map=new Xo(r.x,r.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const f=h.getViewportCount();for(let e=0;e<f;e++){const t=h.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),h.updateMatrices(c,e),n=h.getFrustum(),x(i,o,h.camera,c,this.type)}h.isPointLightShadow||3!==this.type||v(h,o),h.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function Xd(e,t,i){const n=i.isWebGL2;const r=new function(){let t=!1;const i=new qo;let n=null;const r=new qo(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,s,a,o){!0===o&&(t*=a,n*=a,s*=a),i.set(t,n,s,a),!1===r.equals(i)&&(e.clearColor(t,n,s,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},s=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(e){e?N(2929):B(2929)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},a=new function(){let t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?N(2960):B(2960))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,a){n===t&&r===i&&s===a||(e.stencilFunc(t,i,a),n=t,r=i,s=a)},setOp:function(t,i,n){a===t&&o===i&&l===n||(e.stencilOp(t,i,n),a=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,c=null}}};let o={},l=null,c={},u=null,h=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,b=null,w=null,_=null,M=null,S=null;const E=e.getParameter(35661);let T=!1,A=0;const C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(C)[1]),T=A>=1):-1!==C.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),T=A>=2);let L=null,P={};const R=e.getParameter(3088),k=e.getParameter(2978),I=(new qo).fromArray(R),O=(new qo).fromArray(k);function D(t,i,n){const r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<n;t++)e.texImage2D(i+t,0,6408,1,1,0,6408,5121,r);return s}const z={};function N(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function B(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}z[3553]=D(3553,3553,1),z[34067]=D(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),N(2929),s.setFunc(3),V(!1),W(1),N(2884),U(0);const F={100:32774,101:32778,102:32779};if(n)F[103]=32775,F[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(F[103]=e.MIN_EXT,F[104]=e.MAX_EXT)}const H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function U(t,i,n,r,s,a,o,l){if(0!==t){if(!1===h&&(N(3042),h=!0),5===t)s=s||i,a=a||n,o=o||r,i===p&&s===g||(e.blendEquationSeparate(F[i],F[s]),p=i,g=s),n===f&&r===m&&a===v&&o===y||(e.blendFuncSeparate(H[n],H[r],H[a],H[o]),f=n,m=r,v=a,y=o),d=t,x=null;else if(t!==d||l!==x){if(100===p&&100===g||(e.blendEquation(32774),p=100,g=100),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,v=null,y=null,d=t,x=l}}else!0===h&&(B(3042),h=!1)}function V(t){b!==t&&(t?e.frontFace(2304):e.frontFace(2305),b=t)}function W(t){0!==t?(N(2884),t!==w&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):B(2884),w=t}function G(t,i,n){t?(N(32823),M===i&&S===n||(e.polygonOffset(i,n),M=i,S=n)):B(32823)}function j(t){void 0===t&&(t=33984+E-1),L!==t&&(e.activeTexture(t),L=t)}return{buffers:{color:r,depth:s,stencil:a},enable:N,disable:B,bindFramebuffer:function(t,i){return null===i&&null!==l&&(i=l),c[t]!==i&&(e.bindFramebuffer(t,i),c[t]=i,n&&(36009===t&&(c[36160]=i),36160===t&&(c[36009]=i)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(36160,t),l=t)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:U,setMaterial:function(e,t){2===e.side?B(2884):N(2884);let i=1===e.side;t&&(i=!i),V(i),1===e.blending&&!1===e.transparent?U(0):U(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);const n=e.stencilWrite;a.setTest(n),n&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),G(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):B(32926)},setFlipSided:V,setCullFace:W,setLineWidth:function(t){t!==_&&(T&&e.lineWidth(t),_=t)},setPolygonOffset:G,setScissorTest:function(e){e?N(3089):B(3089)},activeTexture:j,bindTexture:function(t,i){null===L&&j();let n=P[L];void 0===n&&(n={type:void 0,texture:void 0},P[L]=n),n.type===t&&n.texture===i||(e.bindTexture(t,i||z[t]),n.type=t,n.texture=i)},unbindTexture:function(){const t=P[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===n&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},L=null,P={},l=null,c={},u=null,h=!1,d=null,p=null,f=null,m=null,g=null,v=null,y=null,x=!1,b=null,w=null,_=null,M=null,S=null,I.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),r.reset(),s.reset(),a.reset()}}}function Yd(e,t,i,n,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,i,n){let r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=t?Bo:Math.floor,s=n(r*e.width),a=n(r*e.height);void 0===p&&(p=m(s,a));const o=i?m(s,a):p;o.width=s,o.height=a;return o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return No(e.width)&&No(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function x(t,i,r,s,a=1){e.generateMipmap(t);n.get(i).__maxMipLevel=Math.log2(Math.max(r,s,a))}function b(i,n,r){if(!1===o)return n;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let s=n;return 6403===n&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===n&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===n&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function w(e){return 1003===e||1004===e||1005===e?9728:9729}function _(t){const i=t.target;i.removeEventListener("dispose",_),function(t){const i=n.get(t);if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture),n.remove(t)}(i),i.isVideoTexture&&d.delete(i),a.memory.textures--}function M(t){const i=t.target;i.removeEventListener("dispose",M),function(t){const i=t.texture,r=n.get(t),s=n.get(i);if(!t)return;void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=i.length;t<r;t++){const r=n.get(i[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--),n.remove(i[t])}n.remove(i),n.remove(t)}(i)}let S=0;function E(e,t){const r=n.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void R(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(33984+t),i.bindTexture(3553,r.__webglTexture)}function T(t,r){const a=n.get(t);t.version>0&&a.__version!==t.version?function(t,n,r){if(6!==n.image.length)return;P(t,n),i.activeTexture(33984+r),i.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const a=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),l=n.image[0]&&n.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=a||l?l?n.image[e].image:n.image[e]:g(n.image[e],!1,!0,c);const h=u[0],d=v(h)||o,p=s.convert(n.format),f=s.convert(n.type),m=b(n.internalFormat,p,f);let w;if(L(34067,n,d),a){for(let e=0;e<6;e++){w=u[e].mipmaps;for(let t=0;t<w.length;t++){const r=w[t];1023!==n.format&&1022!==n.format?null!==p?i.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+e,t,m,r.width,r.height,0,p,f,r.data)}}t.__maxMipLevel=w.length-1}else{w=n.mipmaps;for(let e=0;e<6;e++)if(l){i.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<w.length;t++){const n=w[t].image[e].image;i.texImage2D(34069+e,t+1,m,n.width,n.height,0,p,f,n.data)}}else{i.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<w.length;t++){const n=w[t];i.texImage2D(34069+e,t+1,m,p,f,n.image[e])}}t.__maxMipLevel=w.length}y(n,d)&&x(34067,n,h.width,h.height);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(a,t,r):(i.activeTexture(33984+r),i.bindTexture(34067,a.__webglTexture))}const A={1e3:10497,1001:33071,1002:33648},C={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function L(i,s,a){if(a?(e.texParameteri(i,10242,A[s.wrapS]),e.texParameteri(i,10243,A[s.wrapT]),32879!==i&&35866!==i||e.texParameteri(i,32882,A[s.wrapR]),e.texParameteri(i,10240,C[s.magFilter]),e.texParameteri(i,10241,C[s.minFilter])):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),32879!==i&&35866!==i||e.texParameteri(i,32882,33071),1001===s.wrapS&&1001===s.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,w(s.magFilter)),e.texParameteri(i,10241,w(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(1015===s.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&1016===s.type&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(e.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function P(t,i){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",_),t.__webglTexture=e.createTexture(),a.memory.textures++)}function R(t,n,r){let a=3553;n.isDataTexture2DArray&&(a=35866),n.isDataTexture3D&&(a=32879),P(t,n),i.activeTexture(33984+r),i.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!o&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(n)&&!1===v(n.image),c=g(n.image,l,!1,u),h=v(c)||o,d=s.convert(n.format);let p,f=s.convert(n.type),m=b(n.internalFormat,d,f);L(a,n,h);const w=n.mipmaps;if(n.isDepthTexture)m=6402,o?m=1015===n.type?36012:1014===n.type?33190:1020===n.type?35056:33189:1015===n.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===n.format&&6402===m&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,f=s.convert(n.type)),1027===n.format&&6402===m&&(m=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,f=s.convert(n.type))),i.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(n.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],i.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);n.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)p=w[e],1023!==n.format&&1022!==n.format?null!==d?i.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=w.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],i.texImage2D(3553,e,m,d,f,p);n.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;y(n,h)&&x(a,n,c.width,c.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function k(t,r,a,o,l){const c=s.convert(a.format),u=s.convert(a.type),h=b(a.internalFormat,c,u);32879===l||35866===l?i.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):i.texImage2D(l,0,h,r.width,r.height,0,c,u,null),i.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,l,n.get(a).__webglTexture,0),i.bindFramebuffer(36160,null)}function I(t,i,n){if(e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n){const t=i.depthTexture;t&&t.isDepthTexture&&(1015===t.type?r=36012:1014===t.type&&(r=33190));const n=D(i);e.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else e.renderbufferStorage(36161,r,i.width,i.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(i.depthBuffer&&i.stencilBuffer){if(n){const t=D(i);e.renderbufferStorageMultisample(36161,t,35056,i.width,i.height)}else e.renderbufferStorage(36161,34041,i.width,i.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===i.isWebGLMultipleRenderTargets?i.texture[0]:i.texture,r=s.convert(t.format),a=s.convert(t.type),o=b(t.internalFormat,r,a);if(n){const t=D(i);e.renderbufferStorageMultisample(36161,t,o,i.width,i.height)}else e.renderbufferStorage(36161,o,i.width,i.height)}e.bindRenderbuffer(36161,null)}function O(t){const r=n.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),E(r.depthTexture,0);const s=n.get(r.depthTexture).__webglTexture;if(1026===r.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==r.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=e.createRenderbuffer(),I(r.__webglDepthbuffer[n],t,!1)}else i.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),I(r.__webglDepthbuffer,t,!1);i.bindFramebuffer(36160,null)}function D(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let z=!1,N=!1;this.allocateTextureUnit=function(){const e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const r=n.get(e);e.version>0&&r.__version!==e.version?R(r,e,t):(i.activeTexture(33984+t),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=n.get(e);e.version>0&&r.__version!==e.version?R(r,e,t):(i.activeTexture(33984+t),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const l=t.texture,c=n.get(t),u=n.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(u.__webglTexture=e.createTexture(),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,f=l.isDataTexture3D||l.isDataTexture2DArray,m=v(t)||o;if(!o||1022!==l.format||1015!==l.type&&1016!==l.type||(l.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers){const i=t.texture;for(let t=0,r=i.length;t<r;t++){const r=n.get(i[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(o){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const n=s.convert(l.format),r=s.convert(l.type),a=b(l.internalFormat,n,r),o=D(t);e.renderbufferStorageMultisample(36161,o,a,t.width,t.height),i.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),I(c.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){i.bindTexture(34067,u.__webglTexture),L(34067,l,m);for(let e=0;e<6;e++)k(c.__webglFramebuffer[e],t,l,36064,34069+e);y(l,m)&&x(34067,l,t.width,t.height),i.unbindTexture()}else if(d){const e=t.texture;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=n.get(s);i.bindTexture(3553,a.__webglTexture),L(3553,s,m),k(c.__webglFramebuffer,t,s,36064+r,3553),y(s,m)&&x(3553,s,t.width,t.height)}i.unbindTexture()}else{let e=3553;if(f)if(o){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");i.bindTexture(e,u.__webglTexture),L(e,l,m),k(c.__webglFramebuffer,t,l,36064,e),y(l,m)&&x(e,l,t.width,t.height,t.depth),i.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||o,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=r.length;s<a;s++){const a=r[s];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=n.get(a).__webglTexture;i.bindTexture(t,r),x(t,a,e.width,e.height),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o){const r=t.width,s=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const o=n.get(t);i.bindFramebuffer(36008,o.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,o.__webglFramebuffer),e.blitFramebuffer(0,0,r,s,0,0,r,s,a,9728),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,o.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),T(e,t)}}function $d(e,t,i){const n=i.isWebGL2;return{convert:function(e){let i;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return n?5131:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(33776===e)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===e)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(i=t.get("WEBGL_compressed_texture_etc"),null!==i)){if(37492===e)return i.COMPRESSED_RGB8_ETC2;if(37496===e)return i.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(i=t.get("WEBGL_compressed_texture_astc"),null!==i?e:null):36492===e?(i=t.get("EXT_texture_compression_bptc"),null!==i?e:null):1020===e?n?34042:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Jd extends au{constructor(e=[]){super(),this.cameras=e}}Jd.prototype.isArrayCamera=!0;class Zd extends Ql{constructor(){super(),this.type="Group"}}Zd.prototype.isGroup=!0;const Qd={type:"move"};class Kd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Zd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Zd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Jo,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Jo),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Zd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Jo,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Jo),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(n=t.getPose(e.targetRaySpace,i),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Qd))),l&&e.hand){s=!0;for(const n of e.hand.values()){const e=t.getJointPose(n,i);if(void 0===l.joints[n.jointName]){const e=new Zd;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[n.jointName]=e,l.add(e)}const r=l.joints[n.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}}class ep extends Lo{constructor(e,t){super();const i=this,n=e.state;let r=null,s=1,a=null,o="local-floor",l=null,c=null,u=null,h=null,d=null,p=!1,f=null,m=null,g=null,v=null,y=null,x=null;const b=[],w=new Map,_=new au;_.layers.enable(1),_.viewport=new qo;const M=new au;M.layers.enable(2),M.viewport=new qo;const S=[_,M],E=new Jd;E.layers.enable(1),E.layers.enable(2);let T=null,A=null;function C(e){const t=w.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function L(){w.forEach((function(e,t){e.disconnect(t)})),w.clear(),T=null,A=null,n.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),f&&t.deleteFramebuffer(f),m&&t.deleteRenderbuffer(m),g&&t.deleteRenderbuffer(g),u=null,f=null,m=null,g=null,d=null,h=null,c=null,r=null,D.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function P(e){const t=r.inputSources;for(let e=0;e<b.length;e++)w.set(t[e],b[e]);for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=w.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),w.delete(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t],n=w.get(i);n&&n.dispatchEvent({type:"connected",data:i})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new Kd,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new Kd,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new Kd,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",L),r.addEventListener("inputsourceschange",P);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers){const i={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,i),r.updateRenderState({baseLayer:d})}else if(t instanceof WebGLRenderingContext){const i={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,i),r.updateRenderState({layers:[d]})}else{p=e.antialias;let i=null;e.depth&&(x=256,e.stencil&&(x|=1024),y=e.stencil?33306:36096,i=e.stencil?35056:33190);const a={colorFormat:e.alpha?32856:32849,depthFormat:i,scaleFactor:s};c=new XRWebGLBinding(r,t),h=c.createProjectionLayer(a),u=t.createFramebuffer(),r.updateRenderState({layers:[h]}),p&&(f=t.createFramebuffer(),m=t.createRenderbuffer(),t.bindRenderbuffer(36161,m),t.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),n.bindFramebuffer(36160,f),t.framebufferRenderbuffer(36160,36064,36161,m),t.bindRenderbuffer(36161,null),null!==i&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,i,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(36160,y,36161,g),t.bindRenderbuffer(36161,null)),n.bindFramebuffer(36160,null))}a=await r.requestReferenceSpace(o),D.setContext(r),D.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const R=new Jo,k=new Jo;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;E.near=M.near=_.near=e.near,E.far=M.far=_.far=e.far,T===E.near&&A===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),T=E.near,A=E.far);const t=e.parent,i=E.cameras;I(E,t);for(let e=0;e<i.length;e++)I(i[e],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.position.copy(E.position),e.quaternion.copy(E.quaternion),e.scale.copy(E.scale),e.matrix.copy(E.matrix),e.matrixWorld.copy(E.matrixWorld);const n=e.children;for(let e=0,t=n.length;e<t;e++)n[e].updateMatrixWorld(!0);2===i.length?function(e,t,i){R.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(i.matrixWorld);const n=R.distanceTo(k),r=t.projectionMatrix.elements,s=i.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,p=a*h,f=n/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=o+f,y=d-m,x=p+(n-m),b=l*o/v*g,w=c*o/v*g;e.projectionMatrix.makePerspective(y,x,b,w,g,v)}(E,_,M):E.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let O=null;const D=new vu;D.setAnimationLoop((function(e,i){if(l=i.getViewerPose(a),v=i,null!==l){const e=l.views;null!==d&&n.bindXRFramebuffer(d.framebuffer);let i=!1;e.length!==E.cameras.length&&(E.cameras.length=0,i=!0);for(let r=0;r<e.length;r++){const s=e[r];let a=null;if(null!==d)a=d.getViewport(s);else{const e=c.getViewSubImage(h,s);n.bindXRFramebuffer(u),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,y,3553,e.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),a=e.viewport}const o=S[r];o.matrix.fromArray(s.transform.matrix),o.projectionMatrix.fromArray(s.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&E.matrix.copy(o.matrix),!0===i&&E.cameras.push(o)}p&&(n.bindXRFramebuffer(f),null!==x&&t.clear(x))}const s=r.inputSources;for(let e=0;e<b.length;e++){const t=b[e],n=s[e];t.update(n,i,a)}if(O&&O(e,i),p){const e=h.textureWidth,i=h.textureHeight;n.bindFramebuffer(36008,f),n.bindFramebuffer(36009,u),t.invalidateFramebuffer(36008,[y]),t.invalidateFramebuffer(36009,[y]),t.blitFramebuffer(0,0,e,i,0,0,e,i,16384,9728),t.invalidateFramebuffer(36008,[36064]),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),n.bindFramebuffer(36160,f)}v=null})),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function tp(e){function t(t,i){t.opacity.value=i.opacity,i.color&&t.diffuse.value.copy(i.color),i.emissive&&t.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.specularMap&&(t.specularMap.value=i.specularMap),i.alphaTest>0&&(t.alphaTest.value=i.alphaTest);const n=e.get(i).envMap;if(n){t.envMap.value=n,t.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,t.reflectivity.value=i.reflectivity,t.ior.value=i.ior,t.refractionRatio.value=i.refractionRatio;const r=e.get(n).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,s;i.lightMap&&(t.lightMap.value=i.lightMap,t.lightMapIntensity.value=i.lightMapIntensity),i.aoMap&&(t.aoMap.value=i.aoMap,t.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularTintMap?r=i.specularTintMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap&&(r=i.thicknessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),i.aoMap?s=i.aoMap:i.lightMap&&(s=i.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uv2Transform.value.copy(s.matrix))}function i(t,i){t.roughness.value=i.roughness,t.metalness.value=i.metalness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);e.get(i).envMap&&(t.envMapIntensity.value=i.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,r,s,a){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t,n){i(e,t),e.ior.value=t.ior,t.sheenTint&&e.sheenTint.value.copy(t.sheenTint);t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint));e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,n,a):i(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,i,n){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*n,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n,r,s):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function ip(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,b=-1,w=null;const _=new qo,M=new qo;let S=null,E=t.width,T=t.height,A=1,C=null,L=null;const P=new qo(0,0,E,T),R=new qo(0,0,E,T);let k=!1;const I=[],O=new gu;let D=!1,z=!1,N=null;const B=new Al,F=new Jo,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===x?A:1}let V,W,G,j,q,X,Y,$,J,Z,Q,K,ee,te,ie,ne,re,se,ae,oe,le,ce,ue,he=i;function de(e,i){for(let n=0;n<e.length;n++){const r=e[n],s=t.getContext(r,i);if(null!==s)return s}return null}try{const e={alpha:n,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=de(t,e),null===he)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function pe(){V=new eh(he),W=new Tu(he,V,e),V.init(W),ce=new $d(he,V,W),G=new Xd(he,V,W),I[0]=1029,j=new nh(he),q=new Id,X=new Yd(he,V,G,q,W,ce,j),Y=new Cu(m),$=new Ku(m),J=new yu(he,W),ue=new Su(he,V,J,W),Z=new th(he,J,j,ue),Q=new oh(he,Z,J,j),ae=new ah(he),ne=new Au(q),K=new kd(m,Y,$,V,W,ue,ne),ee=new tp(q),te=new Nd(q),ie=new Wd(V,W),se=new Mu(m,Y,G,Q,o),re=new qd(m,Q,W),oe=new Eu(he,V,j,W),le=new ih(he,V,j,W),j.programs=K.programs,m.capabilities=W,m.extensions=V,m.properties=q,m.renderLists=te,m.shadowMap=re,m.state=G,m.info=j}pe();const fe=new ep(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=j.autoReset,t=re.enabled,i=re.autoUpdate,n=re.needsUpdate,r=re.type;pe(),j.autoReset=e,re.enabled=t,re.autoUpdate=i,re.needsUpdate=n,re.type=r}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){K.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(E,T,!1))},this.getSize=function(e){return e.set(E,T)},this.setSize=function(e,i,n){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,T=i,t.width=Math.floor(e*A),t.height=Math.floor(i*A),!1!==n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(E*A,T*A).floor()},this.setDrawingBufferSize=function(e,i,n){E=e,T=i,A=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,i,n){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,i,n),G.viewport(_.copy(P).multiplyScalar(A).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,i,n){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,i,n),G.scissor(M.copy(R).multiplyScalar(A).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(e){G.setScissorTest(k=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e,t,i){let n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===i||i)&&(n|=1024),he.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),te.dispose(),ie.dispose(),q.dispose(),Y.dispose(),$.dispose(),Q.dispose(),ue.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",xe),fe.removeEventListener("sessionend",be),N&&(N.dispose(),N=null),we.stop()},this.renderBufferImmediate=function(e,t){ue.initAttributes();const i=q.get(e);e.hasPositions&&!i.position&&(i.position=he.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=he.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=he.createBuffer()),e.hasColors&&!i.color&&(i.color=he.createBuffer());const n=t.getAttributes();e.hasPositions&&(he.bindBuffer(34962,i.position),he.bufferData(34962,e.positionArray,35048),ue.enableAttribute(n.position.location),he.vertexAttribPointer(n.position.location,3,5126,!1,0,0)),e.hasNormals&&(he.bindBuffer(34962,i.normal),he.bufferData(34962,e.normalArray,35048),ue.enableAttribute(n.normal.location),he.vertexAttribPointer(n.normal.location,3,5126,!1,0,0)),e.hasUvs&&(he.bindBuffer(34962,i.uv),he.bufferData(34962,e.uvArray,35048),ue.enableAttribute(n.uv.location),he.vertexAttribPointer(n.uv.location,2,5126,!1,0,0)),e.hasColors&&(he.bindBuffer(34962,i.color),he.bufferData(34962,e.colorArray,35048),ue.enableAttribute(n.color.location),he.vertexAttribPointer(n.color.location,3,5126,!1,0,0)),ue.disableUnusedAttributes(),he.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,s){null===t&&(t=H);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=Ae(e,t,n,r);G.setMaterial(n,a);let l=i.index;const c=i.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===n.wireframe&&(l=Z.getWireframeAttribute(i),h=2),void 0===i.morphAttributes.position&&void 0===i.morphAttributes.normal||ae.update(r,i,n,o),ue.setup(r,n,o,i,l);let d=oe;null!==l&&(u=J.get(l),d=le,d.setIndex(u));const p=null!==l?l.count:c.count,f=i.drawRange.start*h,m=i.drawRange.count*h,g=null!==s?s.start*h:0,v=null!==s?s.count*h:1/0,y=Math.max(f,g),x=Math.min(p,f+m,g+v)-1,b=Math.max(0,x-y+1);if(0!==b){if(r.isMesh)!0===n.wireframe?(G.setLineWidth(n.wireframeLinewidth*U()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),G.setLineWidth(e*U()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,b,r.count);else if(i.isInstancedBufferGeometry){const e=Math.min(i.instanceCount,i._maxInstanceCount);d.renderInstances(y,b,e)}else d.render(y,b)}},this.compile=function(e,t){d=ie.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let n=0;n<i.length;n++){Ee(i[n],e,t)}else Ee(i,e,t)})),f.pop(),d=null};let ye=null;function xe(){we.stop()}function be(){we.start()}const we=new vu;function _e(e,t,i,n){const r=e.opaque,s=e.transmissive,o=e.transparent;d.setupLightsView(i),s.length>0&&function(e,t,i){if(null===N){const e=!0===a&&!0===W.isWebGL2;N=new(e?Yo:Xo)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}const n=m.getRenderTarget();m.setRenderTarget(N),m.clear();const r=m.toneMapping;m.toneMapping=0,Me(e,t,i),m.toneMapping=r,X.updateMultisampleRenderTarget(N),X.updateRenderTargetMipmap(N),m.setRenderTarget(n)}(r,t,i),n&&G.viewport(_.copy(n)),r.length>0&&Me(r,t,i),s.length>0&&Me(s,t,i),o.length>0&&Me(o,t,i)}function Me(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===n?s.material:n,c=s.group;a.layers.test(i.layers)&&Se(a,t,i,o,l,c)}}function Se(e,t,i,n,r,s){if(e.onBeforeRender(m,t,i,n,r,s),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const n=Ae(i,t,r,e);G.setMaterial(r),ue.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,n)}else!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,m.renderBufferDirect(i,t,n,r,e,s),r.side=0,r.needsUpdate=!0,m.renderBufferDirect(i,t,n,r,e,s),r.side=2):m.renderBufferDirect(i,t,n,r,e,s);e.onAfterRender(m,t,i,n,r,s)}function Ee(e,t,i){!0!==t.isScene&&(t=H);const n=q.get(e),r=d.state.lights,s=d.state.shadowsArray,a=r.state.version,o=K.getParameters(e,r.state,s,t,i),l=K.getProgramCacheKey(o);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?$:Y).get(e.envMap||n.environment),void 0===c&&(e.addEventListener("dispose",ve),c=new Map,n.programs=c);let u=c.get(l);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===a)return Te(e,o),u}else o.uniforms=K.getUniforms(e),e.onBuild(o,m),e.onBeforeCompile(o,m),u=K.acquireProgram(o,l),c.set(l,u),n.uniforms=o.uniforms;const h=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Te(e,o),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=a,n.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=u.getUniforms(),f=hd.seqWithValue(p.seq,h);return n.currentProgram=u,n.uniformsList=f,u}function Te(e,t){const i=q.get(e);i.outputEncoding=t.outputEncoding,i.instancing=t.instancing,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents}function Ae(e,t,i,n){!0!==t.isScene&&(t=H),X.resetTextureUnits();const r=t.fog,s=i.isMeshStandardMaterial?t.environment:null,a=null===x?m.outputEncoding:x.texture.encoding,o=(i.isMeshStandardMaterial?$:Y).get(i.envMap||s),l=!0===i.vertexColors&&!!n.geometry&&!!n.geometry.attributes.color&&4===n.geometry.attributes.color.itemSize,c=!!n.geometry&&!!n.geometry.attributes.tangent,u=!!n.geometry&&!!n.geometry.morphAttributes.position,h=!!n.geometry&&!!n.geometry.morphAttributes.normal,p=q.get(i),f=d.state.lights;if(!0===D&&(!0===z||e!==w)){const t=e===w&&i.id===b;ne.setState(i,e,t)}let g=!1;i.version===p.__version?p.needsLights&&p.lightsStateVersion!==f.state.version||p.outputEncoding!==a||n.isInstancedMesh&&!1===p.instancing?g=!0:n.isInstancedMesh||!0!==p.instancing?n.isSkinnedMesh&&!1===p.skinning?g=!0:n.isSkinnedMesh||!0!==p.skinning?p.envMap!==o||i.fog&&p.fog!==r?g=!0:void 0===p.numClippingPlanes||p.numClippingPlanes===ne.numPlanes&&p.numIntersection===ne.numIntersection?(p.vertexAlphas!==l||p.vertexTangents!==c||p.morphTargets!==u||p.morphNormals!==h)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,p.__version=i.version);let v=p.currentProgram;!0===g&&(v=Ee(i,t,n));let y=!1,_=!1,M=!1;const S=v.getUniforms(),E=p.uniforms;if(G.useProgram(v.program)&&(y=!0,_=!0,M=!0),i.id!==b&&(b=i.id,_=!0),y||w!==e){if(S.setValue(he,"projectionMatrix",e.projectionMatrix),W.logarithmicDepthBuffer&&S.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,_=!0,M=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=S.map.cameraPosition;void 0!==t&&t.setValue(he,F.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&S.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||n.isSkinnedMesh)&&S.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(n.isSkinnedMesh){S.setOptional(he,n,"bindMatrix"),S.setOptional(he,n,"bindMatrixInverse");const e=n.skeleton;e&&(W.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),S.setValue(he,"boneTexture",e.boneTexture,X),S.setValue(he,"boneTextureSize",e.boneTextureSize)):S.setOptional(he,e,"boneMatrices"))}var C,L;return(_||p.receiveShadow!==n.receiveShadow)&&(p.receiveShadow=n.receiveShadow,S.setValue(he,"receiveShadow",n.receiveShadow)),_&&(S.setValue(he,"toneMappingExposure",m.toneMappingExposure),p.needsLights&&(L=M,(C=E).ambientLightColor.needsUpdate=L,C.lightProbe.needsUpdate=L,C.directionalLights.needsUpdate=L,C.directionalLightShadows.needsUpdate=L,C.pointLights.needsUpdate=L,C.pointLightShadows.needsUpdate=L,C.spotLights.needsUpdate=L,C.spotLightShadows.needsUpdate=L,C.rectAreaLights.needsUpdate=L,C.hemisphereLights.needsUpdate=L),r&&i.fog&&ee.refreshFogUniforms(E,r),ee.refreshMaterialUniforms(E,i,A,T,N),hd.upload(he,p.uniformsList,E,X)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(hd.upload(he,p.uniformsList,E,X),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&S.setValue(he,"center",n.center),S.setValue(he,"modelViewMatrix",n.modelViewMatrix),S.setValue(he,"normalMatrix",n.normalMatrix),S.setValue(he,"modelMatrix",n.matrixWorld),v}we.setAnimationLoop((function(e){ye&&ye(e)})),"undefined"!=typeof window&&we.setContext(window),this.setAnimationLoop=function(e){ye=e,fe.setAnimationLoop(e),null===e?we.stop():we.start()},fe.addEventListener("sessionstart",xe),fe.addEventListener("sessionend",be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),d=ie.get(e,f.length),d.init(),f.push(d),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(B),z=this.localClippingEnabled,D=ne.init(this.clippingPlanes,z,t),h=te.get(e,p.length),h.init(),p.push(h),function e(t,i,n,r){if(!1===t.visible)return;if(t.layers.test(i.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(i);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||O.intersectsSprite(t)){r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=Q.update(t),i=t.material;i.visible&&h.push(t,e,i,n,F.z,null)}}else if(t.isImmediateRenderObject)r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B),h.push(t,null,t.material,n,F.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||O.intersectsObject(t))){r&&F.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=Q.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i[a.materialIndex];o&&o.visible&&h.push(t,e,o,n,F.z,a)}}else i.visible&&h.push(t,e,i,n,F.z,null)}const s=t.children;for(let t=0,a=s.length;t<a;t++)e(s[t],i,n,r)}(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(C,L),!0===D&&ne.beginShadows();const i=d.state.shadowsArray;if(re.render(i,e,t),!0===D&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const i=t.cameras;for(let t=0,n=i.length;t<n;t++){const n=i[t];_e(h,e,n,n.viewport)}}else _e(h,e,t);null!==x&&(X.updateMultisampleRenderTarget(x),X.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),ue.resetDefaultState(),b=-1,w=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTarget=function(e,t=0,i=0){x=e,v=t,y=i,e&&void 0===q.get(e).__webglFramebuffer&&X.setupRenderTarget(e);let n=null,r=!1,s=!1;if(e){const i=e.texture;(i.isDataTexture3D||i.isDataTexture2DArray)&&(s=!0);const a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=a[t],r=!0):n=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,_.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else _.copy(P).multiplyScalar(A).floor(),M.copy(R).multiplyScalar(A).floor(),S=k;if(G.bindFramebuffer(36160,n)&&W.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const i=e.texture;if(I.length!==i.length||36064!==I[0]){for(let e=0,t=i.length;e<t;e++)I[e]=36064+e;I.length=i.length,t=!0}}else 1===I.length&&36064===I[0]||(I[0]=36064,I.length=1,t=!0);else 1===I.length&&1029===I[0]||(I[0]=1029,I.length=1,t=!0);t&&(W.isWebGL2?he.drawBuffers(I):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(I))}if(G.viewport(_),G.scissor(M),G.setScissorTest(S),r){const n=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,i)}else if(s){const n=q.get(e.texture),r=t||0;he.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}b=-1},this.readRenderTargetPixels=function(e,t,i,n,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){G.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,l=a.type;if(1023!==o&&ce.convert(o)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=1016===l&&(V.has("EXT_color_buffer_half_float")||W.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(1009===l||ce.convert(l)===he.getParameter(35738)||1015===l&&(W.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&he.readPixels(t,i,n,r,ce.convert(o),ce.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==x?q.get(x).__webglFramebuffer:null;G.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,i=0){const n=Math.pow(2,-i),r=Math.floor(t.image.width*n),s=Math.floor(t.image.height*n);let a=ce.convert(t.format);W.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),X.setTexture2D(t,0),he.copyTexImage2D(3553,i,a,e.x,e.y,r,s,0),G.unbindTexture()},this.copyTextureToTexture=function(e,t,i,n=0){const r=t.image.width,s=t.image.height,a=ce.convert(i.format),o=ce.convert(i.type);X.setTexture2D(i,0),he.pixelStorei(37440,i.flipY),he.pixelStorei(37441,i.premultiplyAlpha),he.pixelStorei(3317,i.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,n,e.x,e.y,r,s,a,o,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,n,e.x,e.y,a,o,t.image),0===n&&i.generateMipmaps&&he.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,n,r=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ce.convert(n.format),c=ce.convert(n.type);let u;if(n.isDataTexture3D)X.setTexture3D(n,0),u=32879;else{if(!n.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(n,0),u=35866}he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),p=he.getParameter(3316),f=he.getParameter(3315),g=he.getParameter(32877),v=i.isCompressedTexture?i.mipmaps[0]:i.image;he.pixelStorei(3314,v.width),he.pixelStorei(32878,v.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),i.isDataTexture||i.isDataTexture3D?he.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v.data):i.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,v.data)):he.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,p),he.pixelStorei(3315,f),he.pixelStorei(32877,g),0===r&&n.generateMipmaps&&he.generateMipmap(u),G.unbindTexture()},this.initTexture=function(e){X.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,G.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends ip{}).prototype.isWebGL1Renderer=!0;class np{constructor(e,t=25e-5){this.name="",this.color=new yc(e),this.density=t}clone(){return new np(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}np.prototype.isFogExp2=!0;class rp{constructor(e,t=1,i=1e3){this.name="",this.color=new yc(e),this.near=t,this.far=i}clone(){return new rp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}rp.prototype.isFog=!0;class sp extends Ql{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}sp.prototype.isScene=!0;class ap{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Io()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Io()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Io()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}ap.prototype.isInterleavedBuffer=!0;const op=new Jo;class lp{constructor(e,t,i,n=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)op.x=this.getX(t),op.y=this.getY(t),op.z=this.getZ(t),op.applyMatrix4(e),this.setXYZ(t,op.x,op.y,op.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)op.x=this.getX(t),op.y=this.getY(t),op.z=this.getZ(t),op.applyNormalMatrix(e),this.setXYZ(t,op.x,op.y,op.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)op.x=this.getX(t),op.y=this.getY(t),op.z=this.getZ(t),op.transformDirection(e),this.setXYZ(t,op.x,op.y,op.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new _c(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}lp.prototype.isInterleavedBufferAttribute=!0;class cp extends hc{constructor(e){super(),this.type="SpriteMaterial",this.color=new yc(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let up;cp.prototype.isSpriteMaterial=!0;const hp=new Jo,dp=new Jo,pp=new Jo,fp=new Fo,mp=new Fo,gp=new Al,vp=new Jo,yp=new Jo,xp=new Jo,bp=new Fo,wp=new Fo,_p=new Fo;class Mp extends Ql{constructor(e){if(super(),this.type="Sprite",void 0===up){up=new Oc;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new ap(e,5);up.setIndex([0,1,2,0,2,3]),up.setAttribute("position",new lp(t,3,0,!1)),up.setAttribute("uv",new lp(t,2,3,!1))}this.geometry=up,this.material=void 0!==e?e:new cp,this.center=new Fo(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dp.setFromMatrixScale(this.matrixWorld),gp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),pp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&dp.multiplyScalar(-pp.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const s=this.center;Sp(vp.set(-.5,-.5,0),pp,s,dp,n,r),Sp(yp.set(.5,-.5,0),pp,s,dp,n,r),Sp(xp.set(.5,.5,0),pp,s,dp,n,r),bp.set(0,0),wp.set(1,0),_p.set(1,1);let a=e.ray.intersectTriangle(vp,yp,xp,!1,hp);if(null===a&&(Sp(yp.set(-.5,.5,0),pp,s,dp,n,r),wp.set(0,1),a=e.ray.intersectTriangle(vp,xp,yp,!1,hp),null===a))return;const o=e.ray.origin.distanceTo(hp);o<e.near||o>e.far||t.push({distance:o,point:hp.clone(),uv:cc.getUV(hp,vp,yp,xp,bp,wp,_p,new Fo),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Sp(e,t,i,n,r,s){fp.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(mp.x=s*fp.x-r*fp.y,mp.y=r*fp.x+s*fp.y):mp.copy(fp),e.copy(t),e.x+=mp.x,e.y+=mp.y,e.applyMatrix4(gp)}Mp.prototype.isSprite=!0;const Ep=new Jo,Tp=new qo,Ap=new qo,Cp=new Jo,Lp=new Al;class Pp extends Qc{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Al,this.bindMatrixInverse=new Al}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qo,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,n=this.geometry;Tp.fromBufferAttribute(n.attributes.skinIndex,e),Ap.fromBufferAttribute(n.attributes.skinWeight,e),Ep.fromBufferAttribute(n.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const n=Ap.getComponent(e);if(0!==n){const r=Tp.getComponent(e);Lp.multiplyMatrices(i.bones[r].matrixWorld,i.boneInverses[r]),t.addScaledVector(Cp.copy(Ep).applyMatrix4(Lp),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}Pp.prototype.isSkinnedMesh=!0;class Rp extends Ql{constructor(){super(),this.type="Bone"}}Rp.prototype.isBone=!0;class kp extends Go{constructor(e=null,t=1,i=1,n,r,s,a,o,l=1003,c=1003,u,h){super(null,s,a,o,l,c,n,r,u,h),this.image={data:e,width:t,height:i},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}kp.prototype.isDataTexture=!0;class Ip extends _c{constructor(e,t,i,n=1){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Ip.prototype.isInstancedBufferAttribute=!0;const Op=new Al,Dp=new Al,zp=[],Np=new Qc;class Bp extends Qc{constructor(e,t,i){super(e,t),this.instanceMatrix=new Ip(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,n=this.count;if(Np.geometry=this.geometry,Np.material=this.material,void 0!==Np.material)for(let r=0;r<n;r++){this.getMatrixAt(r,Op),Dp.multiplyMatrices(i,Op),Np.matrixWorld=Dp,Np.raycast(e,zp);for(let e=0,i=zp.length;e<i;e++){const i=zp[e];i.instanceId=r,i.object=this,t.push(i)}zp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ip(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Bp.prototype.isInstancedMesh=!0;class Fp extends hc{constructor(e){super(),this.type="LineBasicMaterial",this.color=new yc(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Fp.prototype.isLineBasicMaterial=!0;const Hp=new Jo,Up=new Jo,Vp=new Al,Wp=new Tl,Gp=new yl;class jp extends Ql{constructor(e=new Oc,t=new Fp){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)Hp.fromBufferAttribute(t,e-1),Up.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=Hp.distanceTo(Up);e.setAttribute("lineDistance",new Ec(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Gp.copy(i.boundingSphere),Gp.applyMatrix4(n),Gp.radius+=r,!1===e.ray.intersectsSphere(Gp))return;Vp.copy(n).invert(),Wp.copy(e.ray).applyMatrix4(Vp);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new Jo,c=new Jo,u=new Jo,h=new Jo,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const n=i.index,r=i.attributes.position;if(null!==n){for(let i=Math.max(0,s.start),a=Math.min(n.count,s.start+s.count)-1;i<a;i+=d){const s=n.getX(i),a=n.getX(i+1);l.fromBufferAttribute(r,s),c.fromBufferAttribute(r,a);if(Wp.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,s.start),n=Math.min(r.count,s.start+s.count)-1;i<n;i+=d){l.fromBufferAttribute(r,i),c.fromBufferAttribute(r,i+1);if(Wp.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}jp.prototype.isLine=!0;const qp=new Jo,Xp=new Jo;class Yp extends jp{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)qp.fromBufferAttribute(t,e),Xp.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+qp.distanceTo(Xp);e.setAttribute("lineDistance",new Ec(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Yp.prototype.isLineSegments=!0;class $p extends jp{constructor(e,t){super(e,t),this.type="LineLoop"}}$p.prototype.isLineLoop=!0;class Jp extends hc{constructor(e){super(),this.type="PointsMaterial",this.color=new yc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Jp.prototype.isPointsMaterial=!0;const Zp=new Al,Qp=new Tl,Kp=new yl,ef=new Jo;class tf extends Ql{constructor(e=new Oc,t=new Jp){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Kp.copy(i.boundingSphere),Kp.applyMatrix4(n),Kp.radius+=r,!1===e.ray.intersectsSphere(Kp))return;Zp.copy(n).invert(),Qp.copy(e.ray).applyMatrix4(Zp);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(i.isBufferGeometry){const r=i.index,a=i.attributes.position;if(null!==r){for(let i=Math.max(0,s.start),l=Math.min(r.count,s.start+s.count);i<l;i++){const s=r.getX(i);ef.fromBufferAttribute(a,s),nf(ef,s,o,n,e,t,this)}}else{for(let i=Math.max(0,s.start),r=Math.min(a.count,s.start+s.count);i<r;i++)ef.fromBufferAttribute(a,i),nf(ef,i,o,n,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const e=t[i[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,i=e.length;t<i;t++){const i=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function nf(e,t,i,n,r,s,a){const o=Qp.distanceSqToPoint(e);if(o<i){const i=new Jo;Qp.closestPointToPoint(e,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:a})}}tf.prototype.isPoints=!0;(class extends Go{constructor(e,t,i,n,r,s,a,o,l){super(e,t,i,n,r,s,a,o,l),this.format=void 0!==a?a:1022,this.minFilter=void 0!==s?s:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class rf extends Go{constructor(e,t,i,n,r,s,a,o,l,c,u,h){super(null,s,a,o,l,c,n,r,u,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}rf.prototype.isCompressedTexture=!0;(class extends Go{constructor(e,t,i,n,r,s,a,o,l){super(e,t,i,n,r,s,a,o,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends Go{constructor(e,t,i,n,r,s,a,o,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===c&&(i=1012),void 0===i&&1027===c&&(i=1020),super(null,n,r,s,a,o,c,i,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0;new Jo,new Jo,new Jo,new cc;class sf{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),r+=i.distanceTo(n),t.push(r),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const r=i.length;let s;s=t||e*i[r-1];let a,o=0,l=r-1;for(;o<=l;)if(n=Math.floor(o+(l-o)/2),a=i[n]-s,a<0)o=n+1;else{if(!(a>0)){l=n;break}l=n-1}if(n=l,i[n]===s)return n/(r-1);const c=i[n];return(n+(s-c)/(i[n+1]-c))/(r-1)}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);const r=this.getPoint(i),s=this.getPoint(n),a=t||(r.isVector2?new Fo:new Jo);return a.copy(s).sub(r).normalize(),a}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Jo,n=[],r=[],s=[],a=new Jo,o=new Al;for(let t=0;t<=e;t++){const i=t/e;n[t]=this.getTangentAt(i,new Jo),n[t].normalize()}r[0]=new Jo,s[0]=new Jo;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),u=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],a),s[0].crossVectors(n[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(n[t-1],n[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Oo(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(n[t],r[t])}if(!0===t){let t=Math.acos(Oo(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),s[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class af extends sf{constructor(e=0,t=0,i=1,n=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const i=t||new Fo,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=s?0:n),!0!==this.aClockwise||s||(r===n?r=-n:r-=n);const a=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*e-n*t+this.aX,l=i*t+n*e+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}af.prototype.isEllipseCurve=!0;class of extends af{constructor(e,t,i,n,r,s){super(e,t,i,i,n,r,s),this.type="ArcCurve"}}function lf(){let e=0,t=0,i=0,n=0;function r(r,s,a,o){e=r,t=a,i=-3*r+3*s-2*a-o,n=2*r-2*s+a+o}return{initCatmullRom:function(e,t,i,n,s){r(t,i,s*(i-e),s*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,s,a,o){let l=(t-e)/s-(i-e)/(s+a)+(i-t)/a,c=(i-t)/a-(n-t)/(a+o)+(n-i)/o;l*=a,c*=a,r(t,i,l,c)},calc:function(r){const s=r*r;return e+t*r+i*s+n*(s*r)}}}of.prototype.isArcCurve=!0;const cf=new Jo,uf=new lf,hf=new lf,df=new lf;class pf extends sf{constructor(e=[],t=!1,i="centripetal",n=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e,t=new Jo){const i=t,n=this.points,r=n.length,s=(r-(this.closed?0:1))*e;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=n[(l-1)%r]:(cf.subVectors(n[0],n[1]).add(n[0]),a=cf);const u=n[l%r],h=n[(l+1)%r];if(this.closed||l+2<r?o=n[(l+2)%r]:(cf.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=cf),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),uf.initNonuniformCatmullRom(a.x,u.x,h.x,o.x,t,i,n),hf.initNonuniformCatmullRom(a.y,u.y,h.y,o.y,t,i,n),df.initNonuniformCatmullRom(a.z,u.z,h.z,o.z,t,i,n)}else"catmullrom"===this.curveType&&(uf.initCatmullRom(a.x,u.x,h.x,o.x,this.tension),hf.initCatmullRom(a.y,u.y,h.y,o.y,this.tension),df.initCatmullRom(a.z,u.z,h.z,o.z,this.tension));return i.set(uf.calc(c),hf.calc(c),df.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Jo).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ff(e,t,i,n,r){const s=.5*(n-t),a=.5*(r-i),o=e*e;return(2*i-2*n+s+a)*(e*o)+(-3*i+3*n-2*s-a)*o+s*e+i}function mf(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function gf(e,t,i,n,r){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}pf.prototype.isCatmullRomCurve3=!0;class vf extends sf{constructor(e=new Fo,t=new Fo,i=new Fo,n=new Fo){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Fo){const i=t,n=this.v0,r=this.v1,s=this.v2,a=this.v3;return i.set(gf(e,n.x,r.x,s.x,a.x),gf(e,n.y,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}vf.prototype.isCubicBezierCurve=!0;class yf extends sf{constructor(e=new Jo,t=new Jo,i=new Jo,n=new Jo){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Jo){const i=t,n=this.v0,r=this.v1,s=this.v2,a=this.v3;return i.set(gf(e,n.x,r.x,s.x,a.x),gf(e,n.y,r.y,s.y,a.y),gf(e,n.z,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}yf.prototype.isCubicBezierCurve3=!0;class xf extends sf{constructor(e=new Fo,t=new Fo){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Fo){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Fo;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}xf.prototype.isLineCurve=!0;class bf extends sf{constructor(e=new Fo,t=new Fo,i=new Fo){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Fo){const i=t,n=this.v0,r=this.v1,s=this.v2;return i.set(mf(e,n.x,r.x,s.x),mf(e,n.y,r.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}bf.prototype.isQuadraticBezierCurve=!0;class wf extends sf{constructor(e=new Jo,t=new Jo,i=new Jo){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Jo){const i=t,n=this.v0,r=this.v1,s=this.v2;return i.set(mf(e,n.x,r.x,s.x),mf(e,n.y,r.y,s.y),mf(e,n.z,r.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}wf.prototype.isQuadraticBezierCurve3=!0;class _f extends sf{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Fo){const i=t,n=this.points,r=(n.length-1)*e,s=Math.floor(r),a=r-s,o=n[0===s?s:s-1],l=n[s],c=n[s>n.length-2?n.length-1:s+1],u=n[s>n.length-3?n.length-1:s+2];return i.set(ff(a,o.x,l.x,c.x,u.x),ff(a,o.y,l.y,c.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Fo).fromArray(i))}return this}}_f.prototype.isSplineCurve=!0;var Mf=Object.freeze({__proto__:null,ArcCurve:of,CatmullRomCurve3:pf,CubicBezierCurve:vf,CubicBezierCurve3:yf,EllipseCurve:af,LineCurve:xf,LineCurve3:class extends sf{constructor(e=new Jo,t=new Jo){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Jo){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:bf,QuadraticBezierCurve3:wf,SplineCurve:_f});const Sf=function(e,t,i=2){const n=t&&t.length,r=n?t[0]*i:e.length;let s=Ef(e,0,r,i,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,p;if(n&&(s=function(e,t,i,n){const r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*n,l=s<a-1?t[s+1]*n:e.length,c=Ef(e,o,l,n,!1),c===c.next&&(c.steiner=!0),r.push(zf(c));for(r.sort(kf),s=0;s<r.length;s++)If(r[s],i),i=Tf(i,i.next);return i}(e,t,s,i)),e.length>80*i){o=c=e[0],l=u=e[1];for(let t=i;t<r;t+=i)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-o,u-l),p=0!==p?1/p:0}return Af(s,a,i,o,l,p),a};function Ef(e,t,i,n,r){let s,a;if(r===function(e,t,i,n){let r=0;for(let s=t,a=i-n;s<i;s+=n)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,i,n)>0)for(s=t;s<i;s+=n)a=qf(s,e[s],e[s+1],a);else for(s=i-n;s>=t;s-=n)a=qf(s,e[s],e[s+1],a);return a&&Hf(a,a.next)&&(Xf(a),a=a.next),a}function Tf(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!Hf(n,n.next)&&0!==Ff(n.prev,n,n.next))n=n.next;else{if(Xf(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function Af(e,t,i,n,r,s,a){if(!e)return;!a&&s&&function(e,t,i,n){let r=e;do{null===r.z&&(r.z=Df(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,i,n,r,s,a,o,l,c=1;do{for(i=e,e=null,s=null,a=0;i;){for(a++,n=i,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;i=n}s.nextZ=null,c*=2}while(a>1)}(r)}(e,n,r,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?Lf(e,n,r,s):Cf(e))t.push(o.i/i),t.push(e.i/i),t.push(l.i/i),Xf(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Af(e=Pf(Tf(e),t,i),t,i,n,r,s,2):2===a&&Rf(e,t,i,n,r,s):Af(Tf(e),t,i,n,r,s,1);break}}function Cf(e){const t=e.prev,i=e,n=e.next;if(Ff(t,i,n)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(Nf(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&Ff(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Lf(e,t,i,n){const r=e.prev,s=e,a=e.next;if(Ff(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,c=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,h=Df(o,l,t,i,n),d=Df(c,u,t,i,n);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&Nf(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Ff(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Nf(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Ff(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Nf(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Ff(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Nf(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Ff(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Pf(e,t,i){let n=e;do{const r=n.prev,s=n.next.next;!Hf(r,s)&&Uf(r,n,n.next,s)&&Gf(r,s)&&Gf(s,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(s.i/i),Xf(n),Xf(n.next),n=e=s),n=n.next}while(n!==e);return Tf(n)}function Rf(e,t,i,n,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Bf(a,e)){let o=jf(a,e);return a=Tf(a,a.next),o=Tf(o,o.next),Af(a,t,i,n,r,s),void Af(o,t,i,n,r,s)}e=e.next}a=a.next}while(a!==e)}function kf(e,t){return e.x-t.x}function If(e,t){if(t=function(e,t){let i=t;const n=e.x,r=e.y;let s,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const e=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=n&&e>a){if(a=e,e===n){if(r===i.y)return i;if(r===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!s)return null;if(n===a)return s;const o=s,l=s.x,c=s.y;let u,h=1/0;i=s;do{n>=i.x&&i.x>=l&&n!==i.x&&Nf(r<c?n:a,r,l,c,r<c?a:n,r,i.x,i.y)&&(u=Math.abs(r-i.y)/(n-i.x),Gf(i,e)&&(u<h||u===h&&(i.x>s.x||i.x===s.x&&Of(s,i)))&&(s=i,h=u)),i=i.next}while(i!==o);return s}(e,t)){const i=jf(t,e);Tf(t,t.next),Tf(i,i.next)}}function Of(e,t){return Ff(e.prev,e,t.prev)<0&&Ff(t.next,e,e.next)<0}function Df(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function zf(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Nf(e,t,i,n,r,s,a,o){return(r-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(n-o)-(i-a)*(t-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0}function Bf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Uf(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Gf(e,t)&&Gf(t,e)&&function(e,t){let i=e,n=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(Ff(e.prev,e,t.prev)||Ff(e,t.prev,t))||Hf(e,t)&&Ff(e.prev,e,e.next)>0&&Ff(t.prev,t,t.next)>0)}function Ff(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Hf(e,t){return e.x===t.x&&e.y===t.y}function Uf(e,t,i,n){const r=Wf(Ff(e,t,i)),s=Wf(Ff(e,t,n)),a=Wf(Ff(i,n,e)),o=Wf(Ff(i,n,t));return r!==s&&a!==o||(!(0!==r||!Vf(e,i,t))||(!(0!==s||!Vf(e,n,t))||(!(0!==a||!Vf(i,e,n))||!(0!==o||!Vf(i,t,n)))))}function Vf(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Wf(e){return e>0?1:e<0?-1:0}function Gf(e,t){return Ff(e.prev,e,e.next)<0?Ff(e,t,e.next)>=0&&Ff(e,e.prev,t)>=0:Ff(e,t,e.prev)<0||Ff(e,e.next,t)<0}function jf(e,t){const i=new Yf(e.i,e.x,e.y),n=new Yf(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function qf(e,t,i,n){const r=new Yf(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Xf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yf(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class $f{static area(e){const t=e.length;let i=0;for(let n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i}static isClockWise(e){return $f.area(e)<0}static triangulateShape(e,t){const i=[],n=[],r=[];Jf(e),Zf(i,e);let s=e.length;t.forEach(Jf);for(let e=0;e<t.length;e++)n.push(s),s+=t[e].length,Zf(i,t[e]);const a=Sf(i,n);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}}function Jf(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Zf(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class Qf extends Oc{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],r=[];for(let t=0,i=e.length;t<i;t++){s(e[t])}function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Kf;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(o),w=!0,c=!1,v=f.computeFrenetFrames(o,!1),y=new Jo,x=new Jo,b=new Jo),c||(p=0,u=0,h=0,d=0);const _=e.extractPoints(a);let M=_.shape;const S=_.holes;if(!$f.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];$f.isClockWise(t)&&(S[e]=t.reverse())}}const E=$f.triangulateShape(M,S),T=M;for(let e=0,t=S.length;e<t;e++){const t=S[e];M=M.concat(t)}function A(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}const C=M.length,L=E.length;function P(e,t,i){let n,r,s;const a=e.x-t.x,o=e.y-t.y,l=i.x-e.x,c=i.y-e.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-o/h,f=t.y+a/h,m=((i.x-c/d-p)*c-(i.y+l/d-f)*l)/(a*c-o*l);n=p+a*m-e.x,r=f+o*m-e.y;const g=n*n+r*r;if(g<=2)return new Fo(n,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(n=-o,r=a,s=Math.sqrt(u)):(n=a,r=o,s=Math.sqrt(u/2))}return new Fo(n/s,r/s)}const R=[];for(let e=0,t=T.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),R[e]=P(T[e],T[i],T[n]);const k=[];let I,O=R.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];I=[];for(let e=0,i=t.length,n=i-1,r=e+1;e<i;e++,n++,r++)n===i&&(n=0),r===i&&(r=0),I[e]=P(t[e],t[n],t[r]);k.push(I),O=O.concat(I)}for(let e=0;e<p;e++){const t=e/p,i=u*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],R[e],n);N(t.x,t.y,-i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=k[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],I[e],n);N(r.x,r.y,-i)}}}const D=h+d;for(let e=0;e<C;e++){const t=c?A(M[e],O[e],D):M[e];w?(x.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(x).add(y),N(b.x,b.y,b.z)):N(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<C;t++){const i=c?A(M[t],O[t],D):M[t];w?(x.copy(v.normals[e]).multiplyScalar(i.x),y.copy(v.binormals[e]).multiplyScalar(i.y),b.copy(g[e]).add(x).add(y),N(b.x,b.y,b.z)):N(i.x,i.y,l/o*e)}for(let e=p-1;e>=0;e--){const t=e/p,i=u*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],R[e],n);N(t.x,t.y,l+i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];I=k[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],I[e],n);w?N(r.x,r.y+g[o-1].y,g[o-1].x+i):N(r.x,r.y,l+i)}}}function z(e,t){let i=e.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=e.length-1);for(let e=0,i=o+2*p;e<i;e++){const i=C*e,s=C*(e+1);F(t+n+i,t+r+i,t+r+s,t+n+s)}}}function N(e,t,i){s.push(e),s.push(t),s.push(i)}function B(e,t,r){H(e),H(t),H(r);const s=n.length/3,a=m.generateTopUV(i,n,s-3,s-2,s-1);U(a[0]),U(a[1]),U(a[2])}function F(e,t,r,s){H(e),H(t),H(s),H(t),H(r),H(s);const a=n.length/3,o=m.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);U(o[0]),U(o[1]),U(o[3]),U(o[1]),U(o[2]),U(o[3])}function H(e){n.push(s[3*e+0]),n.push(s[3*e+1]),n.push(s[3*e+2])}function U(e){r.push(e.x),r.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=C*e;for(let e=0;e<L;e++){const i=E[e];B(i[2]+t,i[1]+t,i[0]+t)}e=o+2*p,t=C*e;for(let e=0;e<L;e++){const i=E[e];B(i[0]+t,i[1]+t,i[2]+t)}}else{for(let e=0;e<L;e++){const t=E[e];B(t[2],t[1],t[0])}for(let e=0;e<L;e++){const t=E[e];B(t[0]+C*o,t[1]+C*o,t[2]+C*o)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;z(T,t),t+=T.length;for(let e=0,i=S.length;e<i;e++){const i=S[e];z(i,t),t+=i.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Ec(n,3)),this.setAttribute("uv",new Ec(r,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];i.shapes.push(n.uuid)}else i.shapes.push(e.uuid);void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];i.push(r)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new Mf[n.type]).fromJSON(n)),new Qf(i,e.options)}}const Kf={generateTopUV:function(e,t,i,n,r){const s=t[3*i],a=t[3*i+1],o=t[3*n],l=t[3*n+1],c=t[3*r],u=t[3*r+1];return[new Fo(s,a),new Fo(o,l),new Fo(c,u)]},generateSideWallUV:function(e,t,i,n,r,s){const a=t[3*i],o=t[3*i+1],l=t[3*i+2],c=t[3*n],u=t[3*n+1],h=t[3*n+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new Fo(a,1-l),new Fo(c,1-h),new Fo(d,1-f),new Fo(m,1-v)]:[new Fo(o,1-l),new Fo(u,1-h),new Fo(p,1-f),new Fo(g,1-v)]}};class em extends Oc{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,o,t),a+=o,o=0;function l(e){const a=n.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===$f.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===$f.isClockWise(t)&&(u[e]=t.reverse())}const h=$f.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];n.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],n=t[0]+a,r=t[1]+a,s=t[2]+a;i.push(n,r,s),o+=3}}this.setIndex(i),this.setAttribute("position",new Ec(n,3)),this.setAttribute("normal",new Ec(r,3)),this.setAttribute("uv",new Ec(s,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];i.push(r)}return new em(i,e.curveSegments)}}class tm extends hc{constructor(e){super(),this.type="ShadowMaterial",this.color=new yc(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}tm.prototype.isShadowMaterial=!0;class im extends hc{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}im.prototype.isMeshStandardMaterial=!0;class nm extends im{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fo(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Oo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new yc(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new yc(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new yc(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(e)}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheenTint.copy(e.sheenTint),this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}nm.prototype.isMeshPhysicalMaterial=!0;class rm extends hc{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new yc(16777215),this.specular=new yc(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}rm.prototype.isMeshPhongMaterial=!0;class sm extends hc{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yc(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}sm.prototype.isMeshToonMaterial=!0;class am extends hc{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}am.prototype.isMeshNormalMaterial=!0;class om extends hc{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new yc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}om.prototype.isMeshLambertMaterial=!0;class lm extends hc{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yc(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}lm.prototype.isMeshMatcapMaterial=!0;class cm extends Fp{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}cm.prototype.isLineDashedMaterial=!0;const um={arraySlice:function(e,t,i){return um.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,i=new Array(t);for(let e=0;e!==t;++e)i[e]=e;return i.sort((function(t,i){return e[t]-e[i]})),i},sortedArray:function(e,t,i){const n=e.length,r=new e.constructor(n);for(let s=0,a=0;a!==n;++s){const n=i[s]*t;for(let i=0;i!==t;++i)r[a++]=e[n+i]}return r},flattenJSON:function(e,t,i,n){let r=1,s=e[0];for(;void 0!==s&&void 0===s[n];)s=e[r++];if(void 0===s)return;let a=s[n];if(void 0!==a)if(Array.isArray(a))do{a=s[n],void 0!==a&&(t.push(s.time),i.push.apply(i,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[n],void 0!==a&&(t.push(s.time),a.toArray(i,i.length)),s=e[r++]}while(void 0!==s);else do{a=s[n],void 0!==a&&(t.push(s.time),i.push(a)),s=e[r++]}while(void 0!==s)},subclip:function(e,t,i,n,r=30){const s=e.clone();s.name=t;const a=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*r;if(!(s<i||s>=n)){l.push(t.times[e]);for(let i=0;i<o;++i)c.push(t.values[e*o+i])}}0!==l.length&&(t.times=um.convertArray(l,t.times.constructor),t.values=um.convertArray(c,t.values.constructor),a.push(t))}s.tracks=a;let o=1/0;for(let e=0;e<s.tracks.length;++e)o>s.tracks[e].times[0]&&(o=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,i=e,n=30){n<=0&&(n=30);const r=i.tracks.length,s=t/n;for(let t=0;t<r;++t){const n=i.tracks[t],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const a=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===r}));if(void 0===a)continue;let o=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=n.times.length-1;let d;if(s<=n.times[0]){const e=o,t=l-o;d=um.arraySlice(n.values,e,t)}else if(s>=n.times[h]){const e=h*l+o,t=e+l-o;d=um.arraySlice(n.values,e,t)}else{const e=n.createInterpolant(),t=o,i=l-o;e.evaluate(s),d=um.arraySlice(e.resultBuffer,t,i)}if("quaternion"===r){(new $o).fromArray(d).normalize().conjugate().toArray(d)}const p=a.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)$o.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=u-2*c;for(let i=0;i<e;++i)a.values[t+i]-=d[i]}}}return e.blendMode=2501,e}};class hm{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let s;i:{n:if(!(e<n)){for(let s=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,r)}if(i===s)break;if(r=n,n=t[++i],e<n)break t}s=t.length;break i}if(e>=r)break e;{const a=t[1];e<a&&(i=2,r=a);for(let s=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===s)break;if(n=r,r=t[--i-1],e>=r)break t}s=i,i=0}}for(;i<s;){const n=i+s>>>1;e<t[n]?s=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=i[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}hm.prototype.beforeStart_=hm.prototype.copySampleValue_,hm.prototype.afterEnd_=hm.prototype.copySampleValue_;class dm extends hm{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const n=this.parameterPositions;let r=e-2,s=e+1,a=n[r],o=n[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:r=n.length-2,a=t+n[r]-n[r+1];break;default:r=e,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*i-t;break;case 2402:s=1,o=i+n[1]-n[0];break;default:s=e-1,o=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-i),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==a;++e)r[e]=g*s[c+e]+v*s[l+e]+y*s[o+e]+x*s[u+e];return r}}class pm extends hm{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(i-t)/(n-t),u=1-c;for(let e=0;e!==a;++e)r[e]=s[l+e]*u+s[o+e]*c;return r}}class fm extends hm{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class mm{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=um.convertArray(t,this.TimeBufferType),this.values=um.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:um.convertArray(e.times,Array),values:um.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new fm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let r=0,s=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==r||s!==n){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=um.arraySlice(i,r,s),this.values=um.arraySlice(this.values,r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==r;t++){const n=i[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==s&&s>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,s),e=!1;break}s=n}if(void 0!==n&&um.isTypedArray(n))for(let t=0,i=n.length;t!==i;++t){const i=n[t];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,i),e=!1;break}}return e}optimize(){const e=um.arraySlice(this.times),t=um.arraySlice(this.values),i=this.getValueSize(),n=2302===this.getInterpolation(),r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(n)r=!0;else{const e=a*i,n=e-i,s=e+i;for(let a=0;a!==i;++a){const i=t[e+a];if(i!==t[n+a]||i!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const n=a*i,r=s*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*i,n=s*i,a=0;a!==i;++a)t[n+a]=t[e+a];++s}return s!==e.length?(this.times=um.arraySlice(e,0,s),this.values=um.arraySlice(t,0,s*i)):(this.times=e,this.values=t),this}clone(){const e=um.arraySlice(this.times,0),t=um.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}mm.prototype.TimeBufferType=Float32Array,mm.prototype.ValueBufferType=Float32Array,mm.prototype.DefaultInterpolation=2301;class gm extends mm{}gm.prototype.ValueTypeName="bool",gm.prototype.ValueBufferType=Array,gm.prototype.DefaultInterpolation=2300,gm.prototype.InterpolantFactoryMethodLinear=void 0,gm.prototype.InterpolantFactoryMethodSmooth=void 0;class vm extends mm{}vm.prototype.ValueTypeName="color";class ym extends mm{}ym.prototype.ValueTypeName="number";class xm extends hm{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(i-t)/(n-t);let l=e*a;for(let e=l+a;l!==e;l+=4)$o.slerpFlat(r,0,s,l-a,s,l,o);return r}}class bm extends mm{InterpolantFactoryMethodLinear(e){return new xm(this.times,this.values,this.getValueSize(),e)}}bm.prototype.ValueTypeName="quaternion",bm.prototype.DefaultInterpolation=2301,bm.prototype.InterpolantFactoryMethodSmooth=void 0;class wm extends mm{}wm.prototype.ValueTypeName="string",wm.prototype.ValueBufferType=Array,wm.prototype.DefaultInterpolation=2300,wm.prototype.InterpolantFactoryMethodLinear=void 0,wm.prototype.InterpolantFactoryMethodSmooth=void 0;class _m extends mm{}_m.prototype.ValueTypeName="vector";class Mm{constructor(e,t=-1,i,n=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Io(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let e=0,r=i.length;e!==r;++e)t.push(Sm(i[e]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=i.length;e!==n;++e)t.push(mm.toJSON(i[e]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const r=t.length,s=[];for(let e=0;e<r;e++){let a=[],o=[];a.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=um.getKeyframeOrder(a);a=um.sortedArray(a,1,l),o=um.sortedArray(o,1,l),n||0!==a[0]||(a.push(r),o.push(o[0])),s.push(new ym(".morphTargetInfluences["+t[e].name+"]",a,o).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.name.match(r);if(s&&s.length>1){const e=s[1];let t=n[e];t||(n[e]=t=[]),t.push(i)}}const s=[];for(const e in n)s.push(this.CreateFromMorphTargetSequence(e,n[e],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,r){if(0!==i.length){const s=[],a=[];um.flattenJSON(i,s,a,n),0!==s.length&&r.push(new e(t,s,a))}},n=[],r=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let i=0;i<r[t].morphTargets.length;i++)e[r[t].morphTargets[i]]=-1;for(const i in e){const e=[],s=[];for(let n=0;n!==r[t].morphTargets.length;++n){const n=r[t];e.push(n.time),s.push(n.morphTarget===i?1:0)}n.push(new ym(".morphTargetInfluence["+i+"]",e,s))}o=e.length*(s||1)}else{const s=".bones["+t[e].name+"]";i(_m,s+".position",r,"pos",n),i(bm,s+".quaternion",r,"rot",n),i(_m,s+".scale",r,"scl",n)}}if(0===n.length)return null;return new this(r,o,n,a)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Sm(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ym;case"vector":case"vector2":case"vector3":case"vector4":return _m;case"color":return vm;case"quaternion":return bm;case"bool":case"boolean":return gm;case"string":return wm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];um.flattenJSON(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Em={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Tm{constructor(e,t,i){const n=this;let r=!1,s=0,a=0,o=void 0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===r&&void 0!==n.onStart&&n.onStart(e,s,a),r=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,a),s===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Am=new Tm;class Cm{constructor(e){this.manager=void 0!==e?e:Am,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,r){i.load(e,n,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Lm={};class Pm extends Cm{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Em.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;if(void 0!==Lm[e])return void Lm[e].push({onLoad:t,onProgress:i,onError:n});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(a){const i=a[1],s=!!a[2];let o=a[3];o=decodeURIComponent(o),s&&(o=atob(o));try{let n;const s=(this.responseType||"").toLowerCase();switch(s){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);n="blob"===s?new Blob([e.buffer],{type:i}):e.buffer;break;case"document":const t=new DOMParser;n=t.parseFromString(o,i);break;case"json":n=JSON.parse(o);break;default:n=o}setTimeout((function(){t&&t(n),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Lm[e]=[],Lm[e].push({onLoad:t,onProgress:i,onError:n}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){const i=this.response,n=Lm[e];if(delete Lm[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Em.add(e,i);for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onLoad&&t.onLoad(i)}r.manager.itemEnd(e)}else{for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){const i=Lm[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onProgress&&n.onProgress(t)}}),!1),o.addEventListener("error",(function(t){const i=Lm[e];delete Lm[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){const i=Lm[e];delete Lm[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return r.manager.itemStart(e),o}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Rm extends Cm{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Em.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),Em.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class km extends Cm{constructor(e){super(e)}load(e,t,i,n){const r=new lu,s=new Rm(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(i){s.load(e[i],(function(e){r.images[i]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(let t=0;t<e.length;++t)o(t);return r}}class Im extends Cm{constructor(e){super(e)}load(e,t,i,n){const r=new Go,s=new Rm(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(i){r.image=i;const n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=n?1022:1023,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r}}class Om extends sf{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new xf(t,e))}getPoint(e){const t=e*this.getLength(),i=this.getCurveLengths();let n=0;for(;n<i.length;){if(i[n]>=t){const e=i[n]-t,r=this.curves[n],s=r.getLength(),a=0===s?0:1-e/s;return r.getPointAt(a)}n++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const s=r[n],a=s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const n=o[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new Mf[i.type]).fromJSON(i))}return this}}class Dm extends Om{constructor(e){super(),this.type="Path",this.currentPoint=new Fo,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new xf(this.currentPoint.clone(),new Fo(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const r=new bf(this.currentPoint.clone(),new Fo(e,t),new Fo(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,r,s){const a=new vf(this.currentPoint.clone(),new Fo(e,t),new Fo(i,n),new Fo(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new _f(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,i,n,r,s),this}absarc(e,t,i,n,r,s){return this.absellipse(e,t,i,i,n,r,s),this}ellipse(e,t,i,n,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,r,s,a,o),this}absellipse(e,t,i,n,r,s,a,o){const l=new af(e,t,i,n,r,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class zm extends Dm{constructor(e){super(e),this.uuid=Io(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new Dm).fromJSON(i))}return this}}class Nm extends Ql{constructor(e,t=1){super(),this.type="Light",this.color=new yc(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Nm.prototype.isLight=!0;class Bm extends Nm{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(Ql.DefaultUp),this.updateMatrix(),this.groundColor=new yc(t)}copy(e){return Nm.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Bm.prototype.isHemisphereLight=!0;const Fm=new Al,Hm=new Jo,Um=new Jo;class Vm{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fo(512,512),this.map=null,this.mapPass=null,this.matrix=new Al,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gu,this._frameExtents=new Fo(1,1),this._viewportCount=1,this._viewports=[new qo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Hm.setFromMatrixPosition(e.matrixWorld),t.position.copy(Hm),Um.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Um),t.updateMatrixWorld(),Fm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fm),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Wm extends Vm{constructor(){super(new au(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*ko*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Wm.prototype.isSpotLightShadow=!0;class Gm extends Nm{constructor(e,t,i=0,n=Math.PI/3,r=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(Ql.DefaultUp),this.updateMatrix(),this.target=new Ql,this.distance=i,this.angle=n,this.penumbra=r,this.decay=s,this.shadow=new Wm}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Gm.prototype.isSpotLight=!0;const jm=new Al,qm=new Jo,Xm=new Jo;class Ym extends Vm{constructor(){super(new au(90,1,.5,500)),this._frameExtents=new Fo(4,2),this._viewportCount=6,this._viewports=[new qo(2,1,1,1),new qo(0,1,1,1),new qo(3,1,1,1),new qo(1,1,1,1),new qo(3,0,1,1),new qo(1,0,1,1)],this._cubeDirections=[new Jo(1,0,0),new Jo(-1,0,0),new Jo(0,0,1),new Jo(0,0,-1),new Jo(0,1,0),new Jo(0,-1,0)],this._cubeUps=[new Jo(0,1,0),new Jo(0,1,0),new Jo(0,1,0),new Jo(0,1,0),new Jo(0,0,1),new Jo(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),qm.setFromMatrixPosition(e.matrixWorld),i.position.copy(qm),Xm.copy(i.position),Xm.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Xm),i.updateMatrixWorld(),n.makeTranslation(-qm.x,-qm.y,-qm.z),jm.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jm)}}Ym.prototype.isPointLightShadow=!0;class $m extends Nm{constructor(e,t,i=0,n=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Ym}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}$m.prototype.isPointLight=!0;class Jm extends Vm{constructor(){super(new Lu(-5,5,5,-5,.5,500))}}Jm.prototype.isDirectionalLightShadow=!0;class Zm extends Nm{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ql.DefaultUp),this.updateMatrix(),this.target=new Ql,this.shadow=new Jm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Zm.prototype.isDirectionalLight=!0;class Qm extends Nm{constructor(e,t){super(e,t),this.type="AmbientLight"}}Qm.prototype.isAmbientLight=!0;class Km extends Nm{constructor(e,t,i=10,n=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Km.prototype.isRectAreaLight=!0;class eg{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Jo)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*n),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],i*n*1.092548),t.addScaledVector(s[5],n*r*1.092548),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],i*r*1.092548),t.addScaledVector(s[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*n),t.addScaledVector(s[2],1.023328*r),t.addScaledVector(s[3],1.023328*i),t.addScaledVector(s[4],.858086*i*n),t.addScaledVector(s[5],.858086*n*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],.858086*i*r),t.addScaledVector(s[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}eg.prototype.isSphericalHarmonics3=!0;class tg extends Nm{constructor(e=new eg,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}tg.prototype.isLightProbe=!0;class ig{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}class ng extends Oc{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}ng.prototype.isInstancedBufferGeometry=!0;(class extends Cm{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=Em.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(i){Em.add(e,i),t&&t(i),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;class rg{constructor(){this.type="ShapePath",this.color=new yc,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Dm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,s){return this.currentPath.bezierCurveTo(e,t,i,n,r,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=new zm;r.curves=n.curves,t.push(r)}return t}function n(e,t){const i=t.length;let n=!1;for(let r=i-1,s=0;s<i;r=s++){let i=t[r],a=t[s],o=a.x-i.x,l=a.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[s],o=-o,a=t[r],l=-l),e.y<i.y||e.y>a.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-o*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(a.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=a.x)return!0}}return n}const r=$f.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return i(s);let a,o,l;const c=[];if(1===s.length)return o=s[0],l=new zm,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,i=s.length;t<i;t++)o=s[t],p=o.getPoints(),a=r(p),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new zm,p:p},d[g].s.curves=o.curves,u&&g++,m[g]=[]):m[g].push({h:o,p:p[0]});if(!d[0])return i(s);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let i=0,r=d.length;i<r;i++){const r=m[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<d.length;r++)n(a.p,d[r].p)&&(i!==r&&t.push({froms:i,tos:r,hole:s}),o?(o=!1,h[r].push(a)):e=!0);o&&h[i].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){l=d[e].s,c.push(l),f=m[e];for(let e=0,t=f.length;e<t;e++)l.holes.push(f[e].h)}return c}}class sg{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],n=function(e,t,i){const n=Array.from(e),r=t/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[];let o=0,l=0;for(let e=0;e<n.length;e++){const t=n[e];if("\n"===t)o=0,l-=s;else{const e=ag(t,r,o,l,i);o+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=n.length;e<t;e++)Array.prototype.push.apply(i,n[e].toShapes());return i}}function ag(e,t,i,n,r){const s=r.glyphs[e]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const a=new rg;let o,l,c,u,h,d,p,f;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let r=0,s=e.length;r<s;){switch(e[r++]){case"m":o=e[r++]*t+i,l=e[r++]*t+n,a.moveTo(o,l);break;case"l":o=e[r++]*t+i,l=e[r++]*t+n,a.lineTo(o,l);break;case"q":c=e[r++]*t+i,u=e[r++]*t+n,h=e[r++]*t+i,d=e[r++]*t+n,a.quadraticCurveTo(h,d,c,u);break;case"b":c=e[r++]*t+i,u=e[r++]*t+n,h=e[r++]*t+i,d=e[r++]*t+n,p=e[r++]*t+i,f=e[r++]*t+n,a.bezierCurveTo(h,d,p,f,c,u)}}}return{offsetX:s.ha*t,path:a}}sg.prototype.isFont=!0;let og;const lg=function(){return void 0===og&&(og=new(window.AudioContext||window.webkitAudioContext)),og};class cg extends Cm{constructor(e){super(e)}load(e,t,i,n){const r=this,s=new Pm(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){try{const e=i.slice(0);lg().decodeAudioData(e,(function(e){t(e)}))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)}}(class extends tg{constructor(e,t,i=1){super(void 0,i);const n=(new yc).set(e),r=(new yc).set(t),s=new Jo(n.r,n.g,n.b),a=new Jo(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends tg{constructor(e,t=1){super(void 0,t);const i=(new yc).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class ug{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hg(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hg();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hg(){return("undefined"==typeof performance?Date:performance).now()}class dg extends Ql{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class pg{constructor(e,t,i){let n,r,s;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==n;++e)i[r+e]=i[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}s>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(i[e]!==i[e+t]){a.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let e=i,r=n;e!==r;++e)t[e]=t[n+e%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let n=0;n!==r;++n)e[t+n]=e[i+n]}_slerp(e,t,i,n){$o.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){const s=this._workIndex*r;$o.multiplyQuaternionsFlat(e,s,e,t,e,i),$o.slerpFlat(e,t,e,t,e,s,n)}_lerp(e,t,i,n,r){const s=1-n;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*s+e[i+a]*n}}_lerpAdditive(e,t,i,n,r){for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]+e[i+s]*n}}}const fg=new RegExp("[\\[\\]\\.:\\/]","g"),mg="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",gg=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),vg=/(WCOD+)?/.source.replace("WCOD",mg),yg=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xg=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bg=new RegExp("^"+gg+vg+yg+xg+"$"),wg=["material","materials","bones"];class _g{constructor(e,t,i){this.path=t,this.parsedPath=i||_g.parseTrackName(t),this.node=_g.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new _g.Composite(e,t,i):new _g(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fg,"")}static parseTrackName(e){const t=bg.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==wg.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const s=i(r.children);if(s)return s}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=_g.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const s=e[n];if(void 0===s){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_g.Composite=class{constructor(e,t,i){const n=i||_g.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},_g.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},_g.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},_g.prototype.GetterByBindingType=[_g.prototype._getValue_direct,_g.prototype._getValue_array,_g.prototype._getValue_arrayElement,_g.prototype._getValue_toArray],_g.prototype.SetterByBindingTypeAndVersioning=[[_g.prototype._setValue_direct,_g.prototype._setValue_direct_setNeedsUpdate,_g.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_g.prototype._setValue_array,_g.prototype._setValue_array_setNeedsUpdate,_g.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_g.prototype._setValue_arrayElement,_g.prototype._setValue_arrayElement_setNeedsUpdate,_g.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_g.prototype._setValue_fromArray,_g.prototype._setValue_fromArray_setNeedsUpdate,_g.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];(class{constructor(){this.uuid=Io(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,s=r.length;let a=void 0,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)r[e].push(new _g(u,i[e],n[e]))}else if(d<l){a=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=s;e!==t;++e){const t=r[e],s=t[o];let a=t[d];t[d]=s,void 0===a&&(a=new _g(u,i[e],n[e])),t[o]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=r){const s=r++,c=e[s];t[c.uuid]=l,e[l]=c,t[o]=s,e[s]=a;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[s],r=t[l];t[l]=n,t[s]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const a=--r,o=e[a],c=--s,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[a],r=t[c];t[l]=n,t[a]=r,t.pop()}}else{const r=--s,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const r=this._bindings;if(void 0!==n)return r[n];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);n=r.length,i[e]=n,s.push(e),a.push(t),r.push(u);for(let i=c,n=o.length;i!==n;++i){const n=o[i];u[i]=new _g(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=i,s[i]=o,s.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}).prototype.isAnimationObjectGroup=!0;class Mg{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,s=r.length,a=new Array(s),o={endingStart:2400,endingEnd:2400};for(let e=0;e!==s;++e){const t=r[e].createInterpolant(null);a[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,r=n/i,s=i/n;e.warp(1,r,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+i,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*i;if(n<0||0===i)return;this._startTime=null,t=i*n}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(s),t[i].accumulateAdditive(a);break;case 2500:default:for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(s),t[i].accumulate(n,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const s=2202===i;if(0===e)return-1===r?n:s&&1==(1&r)?t-n:n;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(s&&1==(1&r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=i,this}}(class extends Lo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,s=e._propertyBindings,a=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=n[e],l=r.name;let u=c[l];if(void 0!==u)s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const n=t&&t._propertyBindings[e].binding.parsedPath;u=new pg(_g.create(i,l,n),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),s[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,r=this._actionsByClip;let s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let s=n[t];void 0===s&&(s={},n[t]=s),s[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,a=s[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r],0===Object.keys(a).length&&delete s[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new pm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const n=t||this._root,r=n.uuid;let s="string"==typeof e?Mm.findByName(n,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==s?s.blendMode:2500),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Mg(this,s,t,i);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const i=t||this._root,n=i.uuid,r="string"==typeof e?Mm.findByName(i,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let a=0;a!==i;++a){t[a]._update(n,e,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)a[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const r=n._cacheIndex,s=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,s._cacheIndex=r,t[r]=s,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const e in i){const n=i[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const e in n){const t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Sg{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Sg(void 0===this.value.clone?this.value:this.value.clone())}}(class extends ap{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;(class{constructor(e,t,i,n,r){this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}).prototype.isGLBufferAttribute=!0;const Eg=new Fo;class Tg{constructor(e=new Fo(1/0,1/0),t=new Fo(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Eg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Eg.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Tg.prototype.isBox2=!0;const Ag=new Jo,Cg=new Jo;(class extends Ql{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}).prototype.isImmediateRenderObject=!0;const Lg=new Jo,Pg=new Al,Rg=new Al;const kg=new Float32Array(1);new Int32Array(kg.buffer);sf.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(sf.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Dm.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends Yp{constructor(e=10,t=10,i=4473924,n=8947848){i=new yc(i),n=new yc(n);const r=t/2,s=e/t,a=e/2,o=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=s){o.push(-a,0,u,a,0,u),o.push(u,0,-a,u,0,a);const t=e===r?i:n;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Oc;c.setAttribute("position",new Ec(o,3)),c.setAttribute("color",new Ec(l,3));super(c,new Fp({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Yp{constructor(e){const t=function e(t){const i=[];t&&t.isBone&&i.push(t);for(let n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new Oc,n=[],r=[],s=new yc(0,0,1),a=new yc(0,1,0);for(let e=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new Ec(n,3)),i.setAttribute("color",new Ec(r,3));super(i,new Fp({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");Rg.copy(this.root.matrixWorld).invert();for(let e=0,i=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Pg.multiplyMatrices(Rg,r.matrixWorld),Lg.setFromMatrixPosition(Pg),n.setXYZ(i,Lg.x,Lg.y,Lg.z),Pg.multiplyMatrices(Rg,r.parent.matrixWorld),Lg.setFromMatrixPosition(Pg),n.setXYZ(i+1,Lg.x,Lg.y,Lg.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Cm.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ig.extractUrlBase(e)},Cm.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Tg.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Tg.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Tg.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Tg.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Ko.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ko.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ko.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Ko.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ko.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},yl.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gu.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},class{constructor(e=new Jo,t=new Jo){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Ag.subVectors(e,this.start),Cg.subVectors(this.end,this.start);const i=Cg.dot(Cg);let n=Cg.dot(Ag)/i;return t&&(n=Oo(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ho.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Ho.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ho.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ho.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ho.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ho.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Al.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Al.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Al.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jo).setFromMatrixColumn(this,3)},Al.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Al.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Al.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Al.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Al.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Al.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Al.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Al.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Al.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Al.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Al.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Al.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Al.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Al.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Al.prototype.makeFrustum=function(e,t,i,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,s)},Al.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},pu.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},$o.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},$o.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Tl.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Tl.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Tl.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},cc.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},cc.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},cc.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},cc.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},cc.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},cc.barycoordFromPoint=function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cc.getBarycoord(e,t,i,n,r)},cc.normal=function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cc.getNormal(e,t,i,n)},zm.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},zm.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qf(this,e)},zm.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new em(this,e)},Fo.prototype.fromAttribute=function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},Fo.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Fo.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Jo.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Jo.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Jo.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Jo.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Jo.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Jo.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Jo.prototype.fromAttribute=function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},Jo.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Jo.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},qo.prototype.fromAttribute=function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},qo.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ql.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Ql.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ql.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Ql.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ql.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Ql.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Qc.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Qc.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Pp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},au.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Nm.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(_c.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),_c.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},_c.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},_c.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Oc.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Oc.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new _c(arguments[1],arguments[2])))},Oc.prototype.addDrawCall=function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Oc.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Oc.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Oc.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Oc.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Oc.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ap.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},ap.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Qf.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Qf.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Qf.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},sp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Sg.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(hc.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new yc}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ru.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),ip.prototype.clearTarget=function(e,t,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,i,n)},ip.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},ip.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ip.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ip.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ip.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ip.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ip.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ip.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ip.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ip.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ip.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ip.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ip.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ip.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},ip.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ip.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ip.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ip.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ip.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ip.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ip.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ip.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ip.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ip.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ip.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(qd.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Xo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),dg.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new cg).load(e,(function(e){t.setBuffer(e)})),this},class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ou.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},ou.prototype.clear=function(e,t,i,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,i,n)},Vo.crossOrigin=void 0,Vo.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Im;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,i,void 0,n);return t&&(s.mapping=t),s},Vo.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new km;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,i,void 0,n);return t&&(s.mapping=t),s},Vo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"132"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="132");i("CTWV");class Ig extends class{constructor(e=document.body,t=null){this.container=e,this.itemsWrapper=t,this.container&&this.itemsWrapper&&(this.setup(),this.initEffectShell().then(()=>{this.isLoaded=!0,this.isMouseOver&&this.onMouseOver(this.tempItemIndex),this.tempItemIndex=null}),this.createEventsListeners())}setup(){window.addEventListener("orientationchange",this.onWindowResize.bind(this),!1),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.renderer=new ip({antialias:!0,alpha:!0}),this.renderer.setSize(this.viewport.width,this.viewport.height),this.renderer.setPixelRatio=window.devicePixelRatio,this.container.appendChild(this.renderer.domElement),this.scene=new sp,this.camera=new au(40,this.viewport.aspectRatio,.1,100),this.camera.position.set(.6,.4,3),this.mouse=new Fo,this.timeSpeed=2,this.time=0,this.clock=new ug,this.renderer.setAnimationLoop(this.render.bind(this)),window.scene=this.scene}render(){this.time+=this.clock.getDelta()*this.timeSpeed,this.renderer.render(this.scene,this.camera)}initEffectShell(){let e=[];this.items=this.itemsElements;const t=new Im;return this.items.forEach((i,n)=>{e.push(this.loadTexture(t,i.img?i.img.src:null,n))}),new Promise((t,i)=>{Promise.all(e).then(e=>{e.forEach((e,t)=>{this.items[t].texture=e.texture}),t()})})}createEventsListeners(){this.items.forEach((e,t)=>{e.element.addEventListener("mouseover",this._onMouseOver.bind(this,t),!1)}),this.container.addEventListener("mousemove",this._onMouseMove.bind(this),!1),this.itemsWrapper.addEventListener("mouseleave",this._onMouseLeave.bind(this),!1)}_onMouseLeave(e){this.isMouseOver=!1,this.onMouseLeave(e)}_onMouseMove(e){this.mouse.x=e.clientX/this.viewport.width*2-1;let t=0;this.mouseOffset&&(t=this.mouseOffset()),this.mouse.y=-(e.clientY+t)/this.viewport.height*2+1,this.onMouseMove(e)}_onMouseOver(e,t){this.tempItemIndex=e,this.onMouseOver(e,t)}onWindowResize(){setTimeout(()=>{this.camera.aspect=this.viewport.aspectRatio,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.viewport.width,this.viewport.height)},600)}onUpdate(){}onMouseEnter(e){}onMouseLeave(e){}onMouseMove(e){}onMouseOver(e,t){}get viewport(){let e=this.container.clientWidth,t=this.container.clientHeight;return{width:e,height:t,aspectRatio:e/t}}get viewSize(){let e=this.camera.position.z,t=this.camera.fov*Math.PI/180,i=2*Math.tan(t/2)*e;return{width:i*this.viewport.aspectRatio,height:i,vFov:t}}get itemsElements(){return[...this.itemsWrapper.querySelectorAll("li")].map((e,t)=>({element:e,img:e.querySelector("img")||null,index:t}))}loadTexture(e,t,i){return new Promise((n,r)=>{t?e.load(t,e=>{n({texture:e,index:i})},void 0,e=>{console.error("An error happened.",e),r(e)}):n({texture:null,index:i})})}}{constructor(e=document.body,t=null,i={}){super(e,t),this.container&&this.itemsWrapper&&(i.strength=i.strength||.25,this.options=i,this.init())}roundedRect(e,t,i,n,r){const s=new zm;return s.moveTo(e,t+r),s.lineTo(e,t+n-2*r),s.quadraticCurveTo(e,t+n,e+r,t+n),s.lineTo(e+i-r,t+n),s.quadraticCurveTo(e+i,t+n,e+i,t+n-2*r),s.lineTo(e+i,n-2*r),s.lineTo(e+i,t+2*r),s.quadraticCurveTo(e+i,t,e+i-r,t),s.lineTo(e+r,t),s.quadraticCurveTo(e,t,e,t+2*r),s.lineTo(e,t+2*r),s}init(){this.position=new Jo(0,0,0);(new zm).moveTo(0,.5).quadraticCurveTo(.5,.5,.5,0).quadraticCurveTo(.5,-.5,0,-.5).quadraticCurveTo(-.5,-.5,-.5,0).quadraticCurveTo(-.5,.5,0,.5);this.scale=new Jo(1,1,1),this.shape=this.roundedRect(.31,0,.38,1,.19),this.geometry=new em(this.shape),this.uniforms={uTexture:{value:null},uOffset:{value:new Fo(0,0)},uAlpha:{value:0}},this.material=new ru({uniforms:this.uniforms,vertexShader:"\n        uniform vec2 uOffset;\n\n        varying vec2 vUv;\n\n        vec3 deformationCurve(vec3 position, vec2 uv, vec2 offset) {\n          float M_PI = 3.1415926535897932384626433832795;\n          position.x = position.x + (sin(uv.y * M_PI) * offset.x);\n          position.y = position.y + (sin(uv.x * M_PI) * offset.y);\n          return position;\n        }\n\n        void main() {\n          vUv =  uv + (uOffset * 2.);\n          vec3 newPosition = position;\n          newPosition = deformationCurve(position,uv,uOffset);\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n          \n        }\n      ",fragmentShader:"\n        uniform sampler2D uTexture;\n        uniform float uAlpha;\n\n        varying vec2 vUv;\n\n        vec2 scaleUV(vec2 uv,float scale) {\n          float center = 0.5;\n          return ((uv - center) * scale) + center;\n        }\n\n        \n        void main() {\n          vec3 color = texture2D(uTexture,scaleUV(vUv,0.8)).rgb;\n          gl_FragColor = vec4(color,uAlpha);\n        }\n      ",transparent:!0}),this.plane=new Qc(this.geometry,this.material),this.scene.add(this.plane)}onMouseEnter(){this.currentItem&&this.isMouseOver||(this.isMouseOver=!0,Hn.to(this.uniforms.uAlpha,.5,{value:1,ease:dr.easeOut}))}onMouseLeave(e){Hn.to(this.uniforms.uAlpha,.5,{value:0,ease:dr.easeOut})}onMouseMove(e){let t=this.mouse.x.map(-1,1,-this.viewSize.width/2,this.viewSize.width/2),i=this.mouse.y.map(-1,1,-this.viewSize.height/2,this.viewSize.height/2);this.position=new Jo(t,i,0),Hn.to(this.plane.position,1,{x:t,y:i,ease:dr.easeOut,onUpdate:this.onPositionUpdate.bind(this)})}onPositionUpdate(){let e=this.plane.position.clone().sub(this.position).multiplyScalar(-this.options.strength);this.uniforms.uOffset.value=e}onMouseOver(e,t){this.isLoaded&&(this.onMouseEnter(),this.currentItem&&this.currentItem.index===e||this.onTargetChange(e))}onTargetChange(e){if(this.currentItem=this.items[e],!this.currentItem.texture)return;let t=this.currentItem.img.naturalWidth/this.currentItem.img.naturalHeight;this.scale=new Jo(t,1,1),this.uniforms.uTexture.value=this.currentItem.texture,this.plane.scale.copy(this.scale)}}function Og(){new ye("#slider-harvest .swiper-container",{slidesPerView:1.4,spaceBetween:43,slidesPerGroup:1,loop:!1,effect:"slide",autoHeight:!0,pagination:{el:"#slider-harvest .swiper-pagination",clickable:!0},navigation:{nextEl:"#slider-harvest .swiper-button-next",prevEl:"#slider-harvest .swiper-button-prev"},loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,observeSlideChildren:!0,observeParents:!0,touchStartPreventDefault:!1,breakpoints:{767:{slidesPerView:2.1,spaceBetween:43,slidesPerGroup:1},1025:{slidesPerView:3,slidesPerGroup:1,spaceBetween:40}}})}var Dg=new M({pageName:"home",main:function(){!function(){let e;setTimeout(()=>{Gs.timeline({scrollTrigger:{trigger:".home-initial",start:"15% center",end:"40% center",scrub:!0,markers:!1}}).fromTo(".home-initial .container-video .container-img",{scale:1},{scale:1.2});Gs.timeline({scrollTrigger:{trigger:".home-initial",start:"28% center",end:"50% center",scrub:!0}}).fromTo(".home-initial .container-btn",{autoAlpha:0,display:"none"},{autoAlpha:1,display:"flex",pointerEvents:"auto"});Gs.timeline({scrollTrigger:{trigger:".home-initial",start:"55% center",end:"60% center",scrub:!0}}).to(".home-initial .container-btn",{autoAlpha:0,duration:.3,pointerEvents:"none",display:"none"}).to(".home-initial .d-reel",{autoAlpha:0,ease:dr.easeInOut},"<");const e=Gs.timeline({scrollTrigger:{trigger:".home-initial",start:"80% center",end:"85% center",scrub:!0}});e.fromTo(".home-initial .overlay",{autoAlpha:0,display:"none"},{autoAlpha:1,display:"block"}),e.fromTo(".home-selected-work",{opacity:0},{opacity:1})},0),window.addEventListener("resize",(function(){e&&clearTimeout(e),e=setTimeout(()=>{e=null,screen.isDesktop&&lo.refresh()},1e3)})),document.addEventListener("pjax:send",(function(){try{lo.getById("main_scroll_trigger").kill()}catch(e){}}),{once:!0})}(),function(){if(_.isMobile)return;const e=document.querySelector(".home-selected-work"),t=document.querySelector(".list-selected-work");new Promise((e,t)=>{Co()(document.querySelectorAll("img"),e)}).then(()=>{setTimeout(()=>{new Ig(e,t)},600)});let i=document.querySelector(".home-selected-work"),n=i.querySelectorAll(".list-selected-work li"),r=1;n.forEach(e=>{e.dataset.number=r,r+=1,r>7&&(r=1),e.addEventListener("mouseenter",(function(){document.querySelectorAll('[data-work="'+this.dataset.work+'"]').forEach(e=>{e.addActive()}),i.addActive()})),e.addEventListener("mouseleave",(function(){document.querySelectorAll('[data-work="'+this.dataset.work+'"]').forEach(e=>{e.removeActive()}),i.removeActive()}))})}(),Og(),st(".list-accordion li",{clickToggle:!0});let e=0;document.querySelectorAll("#home-insights .swiper-container .swiper-slide").forEach(t=>{t.dataset.index=e,e+=1});let t=document.querySelectorAll("#home-insights .list-links li");t[0]&&t[0].addActive();var i=new ye("#home-insights .swiper-container",{slidesPerView:1,slidesPerGroup:1,effect:"slide",speed:0,pagination:{el:"#home-insights .swiper-pagination",clickable:!0},navigation:{nextEl:"#home-insights .swiper-button-next",prevEl:"#home-insights .swiper-button-prev"},loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,touchStartPreventDefault:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0});let n=document.querySelector("#home-insights .swiper-container");i.on("beforeTransitionStart",(function(){document.querySelector("#home-insights .list-links li.active")&&document.querySelector("#home-insights .list-links li.active").removeActive(),t[this.activeIndex]&&t[this.activeIndex].addActive(),this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?n.dataset.direction="forward":n.dataset.direction="backward"}))}});var zg=new M({pageName:"expertise",main:function(){st(".list-accordion li",{clickToggle:!0})}});var Ng=new M({pageName:"expertise-post",main:function(){st(".list-accordion li",{clickToggle:!0,allowMultipleActive:!0}),new ye("#related-slider-expertise .swiper-container",{slidesPerView:1.2,spaceBetween:43,slidesPerGroup:1,effect:"slide",navigation:{nextEl:"#related-slider-expertise .swiper-button-next",prevEl:"#related-slider-expertise .swiper-button-prev"},touchStartPreventDefault:!1,loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,breakpoints:{767:{slidesPerView:2.1,slidesPerGroup:1},1025:{slidesPerView:3.5,spaceBetween:50,slidesPerGroup:1}}});let e=0;document.querySelectorAll("#slider-expertise-related-works .swiper-container .swiper-slide").forEach(t=>{t.dataset.index=e,e+=1});var t=new ye("#slider-expertise-related-works .swiper-container",{slidesPerView:1,spaceBetween:0,slidesPerGroup:1,effect:"slide",navigation:{nextEl:"#slider-expertise-related-works .swiper-button-next",prevEl:"#slider-expertise-related-works .swiper-button-prev"},touchStartPreventDefault:!1,loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,slideToClickedSlide:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0});let i=document.querySelector("#slider-expertise-related-works .swiper-container");t.on("beforeTransitionStart",(function(){this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?i.dataset.direction="forward":i.dataset.direction="backward"}))}});function Bg(e,t=!1,i=.7,n=document.scrollingElement){let r;if("0"==e)r="0";else{let i=0;t&&(i=document.querySelector("#header").clientHeight),r=document.querySelector(e)?document.querySelector(e).offsetTop-i:""}r&&rr.to(n,{duration:i,scrollTo:{y:r}})}function Fg(){document.querySelectorAll("[data-scrollto]:not(.js-running)").forEach(e=>{let t=e.dataset.scrollto;t&&e.addEventListener("click",(function(){let i=!0;e.dataset.scrollNoHeader&&(i=!1),Bg(t,i)}))})}rr.registerPlugin(To),Fg(),document.addEventListener("pjax:complete",Fg);var Hg=new M({pageName:"works",main:function(){let e,t=document.querySelector("#swiper-our-works .swiper-container"),i=document.querySelector(".btn-switch"),n=document.querySelector(".container-swiper-our-works"),r=!0,s={slidesPerView:1,spaceBetween:0,slidesPerGroup:1,pagination:{el:".swiper-fraction-pagination",clickable:!0,type:"fraction"},navigation:{nextEl:"#swiper-our-works .swiper-button-next",prevEl:"#swiper-our-works .swiper-button-prev"},touchStartPreventDefault:!1,loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,slideToClickedSlide:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0};i.addEventListener("click",(function(){n.classList.contains("list-mode")?(r=!1,n.classList.remove("list-mode"),n.classList.add("swiper-mode"),o()):(r=!0,n.classList.add("list-mode"),n.classList.remove("swiper-mode"),e.destroy(),t.querySelectorAll(".swiper-slide").forEach(e=>{e.dataset.position=""}),document.querySelectorAll(".bg-img [data-work].active").forEach(e=>{e.removeActive()}))}));let a=0;function o(){e=new ye(t,s),e.on("activeIndexChange",(function(){let e=t.querySelector('[data-index="'+this.activeIndex+'"]').dataset.work;if(document.querySelectorAll('.bg-img [data-work="'+e+'"]').forEach(e=>{e.addActive()}),t.querySelector('[data-index="'+this.previousIndex+'"]')){let e=t.querySelector('[data-index="'+this.previousIndex+'"]').dataset.work;document.querySelectorAll('.bg-img [data-work="'+e+'"]').forEach(e=>{e.removeActive()})}})),setTimeout(()=>{let e=t.querySelector(".swiper-slide-active").dataset.work;document.querySelectorAll('.bg-img [data-work="'+e+'"]').forEach(e=>{e.addActive()})},1e3),e.on("beforeTransitionStart",(function(){this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?t.dataset.direction="forward":t.dataset.direction="backward"}))}t.querySelectorAll(".swiper-slide").forEach(e=>{e.dataset.index=a,a+=1,e.addEventListener("mouseenter",(function(){r&&document.querySelectorAll('.bg-img [data-work="'+this.dataset.work+'"]').forEach(e=>{e.addActive()})})),e.addEventListener("mouseleave",(function(){r&&document.querySelectorAll('.bg-img [data-work="'+this.dataset.work+'"]').forEach(e=>{e.removeActive()})}))});let l=document.querySelector(".list-selected-filter"),c=document.querySelectorAll("[data-set-expertise]"),u=document.querySelectorAll("[data-set-industries]");c.forEach(e=>{e.addEventListener("click",(function(){p(e,"expertise")}))}),u.forEach(e=>{e.addEventListener("click",(function(){p(e,"industries")}))});let h=document.querySelector("#no-results"),d=document.querySelector(".btn-clean-all");function p(e,t){let i=document.createElement("li"),n=document.createElement("button"),r=document.createElement("span");if(r.innerText=e.querySelector("span").innerText,"industries"==t){if(e.classList.contains("active"))return f(e.dataset.setIndustries,t);n.dataset.id=e.dataset.setIndustries,n.dataset.type="industries",n.addEventListener("click",(function(){f(e.dataset.setIndustries,"industries")}))}else if("expertise"==t){if(e.classList.contains("active"))return f(e.dataset.setExpertise,t);n.dataset.id=e.dataset.setExpertise,n.dataset.type="expertise",n.addEventListener("click",(function(){f(e.dataset.setExpertise,"expertise")}))}setTimeout(()=>{Bg(".works-gallery")},1e3),n.appendChild(r),i.appendChild(n),l.appendChild(i),g()}function f(e,t){l.querySelector('[data-id="'+e+'"]').parentElement.remove(),g(),Bg(".works-gallery")}d.addEventListener("click",(function(){l.querySelectorAll("[data-id]").forEach(e=>{e.parentElement.remove()}),g(),Bg(".works-gallery")}));let m=window.location.hash;if(m){m=m.replace("#","");let e=document.querySelector('[data-set-expertise="'+m+'"]'),t=document.querySelector('[data-set-industries="'+m+'"]');e&&p(e,"expertise"),t&&p(t,"industries"),window.location.hash=""}function g(){let i=l.querySelectorAll('[data-type="expertise"]'),r=l.querySelectorAll('[data-type="industries"]');document.querySelectorAll("#swiper-our-works .swiper-slide").forEach(e=>{e.classList.add("d-none"),e.classList.remove("swiper-slide"),e.dataset.index="",e.dataset.position=""}),document.querySelectorAll("[data-set-expertise].active").forEach(e=>{e.removeActive()}),document.querySelectorAll("[data-set-industries].active").forEach(e=>{e.removeActive()}),n.classList.contains("list-mode")||(e.destroy(),document.querySelectorAll("[data-work].active").forEach(e=>{e.removeActive()})),r.forEach(e=>{document.querySelectorAll('[data-set-industries="'+e.dataset.id+'"]').forEach(e=>{e.addActive()}),document.querySelectorAll(`[data-get-industries*=${e.dataset.id}]`).forEach(e=>{e.classList.remove("d-none"),e.classList.add("swiper-slide")})}),i.forEach(e=>{document.querySelectorAll(`[data-get-expertise*=${e.dataset.id}]`).forEach(e=>{e.classList.remove("d-none"),e.classList.add("swiper-slide")}),document.querySelectorAll('[data-set-expertise="'+e.dataset.id+'"]').forEach(e=>{e.addActive()})}),0==i.length&&0==r.length?(document.querySelectorAll("#swiper-our-works .d-none").forEach(e=>{e.classList.remove("d-none"),e.classList.add("swiper-slide")}),d.classList.add("d-none")):d.classList.remove("d-none"),document.querySelectorAll("#swiper-our-works .swiper-slide").length>0?h.classList.add("d-none"):h.classList.remove("d-none"),n.classList.contains("list-mode")||o();let s=0;t.querySelectorAll(".swiper-slide").forEach(e=>{e.dataset.index=s,s+=1})}}});function Ug(){function e(n){let r=n.querySelector("input[type=file]"),s=n.querySelector(".d-input-file"),a=n.querySelector("label"),o=n.querySelector(".output"),l=n.querySelector(".output-name"),c=n.querySelector(".btn-delete-file");a.addEventListener("click",(function(){r.focus()})),r.addEventListener("input",(function(n){let r=n.target.files[0];"application/pdf"!=r.type&&"video/mp4"!=r.type&&"image/png"!=r.type&&"image/jpeg"!=r.type&&"image/gif"!=r.type&&"video/mp4"!=r.type||(o.src=URL.createObjectURL(n.target.files[0])),l.innerHTML=r.name,s.addActive(),function(){let n=document.querySelector(".d-upload").cloneNode(!0);i(n),document.querySelector(".upload-list").appendChild(n),e(n),t()}()}))/*,c.addEventListener("click",(function(){i(n)}))*/}function t(){let e=Array.from(document.querySelectorAll(".upload-list .d-upload")).filter(e=>{if(0==e.querySelector("input[type=file]").value.length)return e});e.length>1&&e.forEach((function(e,t){t>0&&e.remove()}))}function i(e){e.querySelector(".output").src="",e.querySelector("input[type=file]").value="",e.querySelector(".d-input-file").removeActive(),e.querySelector(".output-name").innerHTML="",t()}function n(e){e.classList.add("js-running");const t=e.querySelectorAll("fieldset");function i(){t.forEach(e=>{let t=!1,i=e.querySelectorAll("[required]"),n=Array.from(i).filter((function(e){if("checkbox"==e.type&&!e.checked)return e;if("email"==e.type){if(!(t=e.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)))return e}var t;return 0==e.value.length?e:void 0})),r=e.querySelector(".next");r&&(0==n.length?(t=!0,r.classList.remove("pointer-events-none")):(t=!1,r.classList.add("pointer-events-none")))})}t.forEach(e=>{e.querySelectorAll("[required]").forEach(e=>{e.addEventListener("click",i)})}),i();let n=document.querySelector(".contact-subjects");document.querySelectorAll("[data-set-form]").forEach(e=>{e.addEventListener("click",(function(){let t=document.querySelector('[data-get-form="'+e.dataset.setForm+'"]');t&&(n.removeActive(),t.addActive(),t.querySelector("fieldset").addActive())}))}),t.forEach((function(e,i){let r=e.querySelector(".next");r&&r.addEventListener("click",()=>{t[i+1]&&(e.removeActive(),t[i+1].addActive())});let s=e.querySelector(".previous");s&&s.addEventListener("click",()=>{e.removeActive(),t[i-1]?t[i-1].addActive():n.addActive()})})),e.querySelectorAll(".d-input-content").forEach(e=>{let t=e.querySelector("[contenteditable]");t&&e.addEventListener("click",(function(){t.focus()}))}),e.querySelectorAll("[data-set-input]").forEach(t=>{t.addEventListener("input",(function(){e.querySelectorAll('[data-get-input="'+t.dataset.setInput+'"]').forEach(e=>{let i=e.tagName.toLowerCase();"textarea"==i||"input"==i?e.value=t.innerHTML:e.innerHTML=t.innerHTML}),i()}))}),e.addEventListener("submit",(function(t){e.querySelector(".submit-text").innerHTML=VARS.contactSending}))}document.querySelectorAll(".d-upload").forEach(t=>{e(t)}),document.querySelectorAll(".form-contact form:not(.js-running)").forEach(e=>{n(e)}),document.querySelectorAll(".section-modal-download form:not(.js-running)").forEach(e=>{n(e)})}var Vg=new M({pageName:"work-post",main:function(){Ug();let e=document.querySelectorAll(".d-expansive-paragraph");e&&e.forEach(e=>{let t=e.querySelector(".btn-read-more-expansive"),i=e.querySelector(".btn-read-less-expansive");t.addEventListener("click",(function(){e.classList.add("enter-active"),setTimeout(()=>{e.addActive(),e.classList.remove("enter-active")},300)})),i.addEventListener("click",(function(){e.removeActive()}))})}}),Wg=(function(){let e=0,t=0,i=0,n=window.innerHeight,r=o().scrollHeight;function s(){const s=scrollY;0!=t&&s<=0?(document.body.dataset.scrollDirection="initial",t=0):1!=t&&e>s&&s>0?(document.body.dataset.scrollDirection="up",t=1):2!=t&&e<s&&s>0&&(document.body.dataset.scrollDirection="down",t=2),e=s,0!=i&&s<=.5*n?(document.body.dataset.scrollPosition="top",i=0):1!=i&&s>=.5*n&&!(s+n>=r-1*n)?(document.body.dataset.scrollPosition="center",i=1):2!=i&&s+n>=r-1*n&&(document.body.dataset.scrollPosition="bottom",i=2)}document.body.dataset.scrollDirection="initial",document.body.dataset.scrollPosition="top",window.addEventListener("scroll",()=>{s(),document.getElementById("scroll-progress")&&document.getElementById("scroll-progress").style.setProperty("--scroll-progress",(scrollY+n)/r)},{passive:!0}),window.addEventListener("resize",()=>{n=window.innerHeight,r=o().scrollHeight,document.getElementById("scroll-progress")&&document.getElementById("scroll-progress").style.setProperty("--scroll-progress",(scrollY+n)/r)});let a;function o(){let e;return e=(window.innerWidth,document.body),e}new MutationObserver(()=>{r=o().scrollHeight,document.getElementById("scroll-progress")&&document.getElementById("scroll-progress").style.setProperty("--scroll-progress",(scrollY+n)/r)}).observe(document.body,{childList:!0,subtree:!0}),setInterval(()=>{(a||(a=document.querySelector(".vs-scroll-view"),a))&&(r=o().scrollHeight,document.getElementById("scroll-progress")&&document.getElementById("scroll-progress").style.setProperty("--scroll-progress",(scrollY+n)/r))},100)}(),i("SvoC")),Gg=i.n(Wg);class jg extends HTMLElement{constructor(){super(),this.visible=!1,this.leaveTime=600}connectedCallback(){const e=this.querySelectorAll("[data-modal-area]");e.length>0?this.hideOnClickOutside=r(e,this.close.bind(this),{autoStart:!1}):this.hideOnClickOutside=null}disconnectedCallback(){this.hideOnClickOutside&&this.hideOnClickOutside.stop()}static get observedAttributes(){return["name","active","leave"]}attributeChangedCallback(e,t,i){switch(e){case"active":queueMicrotask(()=>{null===i?this.close():this.open(i)});break;case"name":this.name=i;break;case"leave":this.leaveTime=Number.parseInt(i)}}handleEvent(e){"keydown"===e.type&&"Escape"===e.key&&this.close()}open(e){const t=Array.from(this.querySelectorAll("modal-item")),i=e?t.find(t=>t.name==e):t[0];this.bodyState("active",i.name),t.forEach(e=>e.close(0)),this.addActive(),i.open(),this.dispatchEvent(new CustomEvent("modal:open",{detail:{item:i}})),this.hideOnClickOutside&&this.hideOnClickOutside.start(),document.addEventListener("keydown",this)}next(){const e=Array.from(this.querySelectorAll("modal-item")),t=e.indexOf(e.find(e=>e.visible));t<e.length-1&&(e[t].close(),e[t+1].open())}prev(){const e=Array.from(this.querySelectorAll("modal-item")),t=e.indexOf(e.find(e=>e.visible));t>0&&(e[t].close(),e[t-1].open())}close(){const e=this.leaveTime||0;Array.from(this.querySelectorAll("modal-item")).forEach(t=>{t.close(e)}),this.removeActive({leaveDelay:e}),e>0&&this.bodyState("leave"),setTimeout(()=>{this.bodyState(null,null),this.dispatchEvent(new CustomEvent("modal:close"))},e),this.hideOnClickOutside&&this.hideOnClickOutside.stop(),document.removeEventListener("keydown",this)}bodyState(e,t){const i=document.body.dataset;e?i.modalState=e:delete i.modalState,t?i.modalItem=t:delete i.modalItem,e||t?i.modal=this.name:delete i.modal}}class qg extends HTMLElement{constructor(){super(),this.visible=!1}connectedCallback(){this.modal=this.closest("modal-group")}disconnectedCallback(){}open(){this.visible||(this.visible=!0,this.addActive())}close(e){this.visible&&(this.visible=!1,this.removeActive({leave:e>0,leaveDelay:e}))}static get observedAttributes(){return["name","hash"]}attributeChangedCallback(e,t,i){this[e]=i}}class Xg extends HTMLElement{constructor(){super()}connectedCallback(){this.modal=this.closest("modal-group"),this.addEventListener("click",this.action)}disconnectedCallback(){this.removeEventListener("click",this.action)}attributeChangedCallback(e,t,i){this[e]=i}}function Yg(e,t="div"){e.closest(t).classList.add("error"),e.focus(),e.dataset.error&&e.setCustomValidity(e.dataset.error)}window.customElements.define("modal-group",jg),window.customElements.define("modal-item",qg),window.customElements.define("btn-modal-close",class extends Xg{action(){this.modal.close()}}),window.customElements.define("btn-modal-open",class extends Xg{action(){const e=this.template;if(e)"iframe"===e&&function(e){const t=document.createElement("template");t.innerHTML=`\n    <modal-group name="iframe" active>\n      <modal-container>\n        <modal-item>\n          <div class="modal-container-iframe">\n            <div class="modal-iframe" data-modal-area>\n              <iframe src="${e.href}" allow="autoplay"></iframe>\n            </div>\n          </div>\n        </modal-item>\n        \n      <btn-modal-close class="btn-modal-close-2" data-cursor-style="view">\n      <div class="close"></div>\n  </btn-modal-close>\n      </modal-container>\n      </modal-group>`;const i=t.content;i.firstElementChild.addEventListener("modal:close",(function(){this.remove()}),{once:!0}),document.body.appendChild(i)}(this.dataset),"image"===e&&function(e){const t=document.createElement("template");let i,n=e.href;n=n.substr(n.lastIndexOf(".")+1),i=["mp4","webm"].includes(n)?`<video src="${e.href}" autoplay playsinline muted loop data-modal-area ></video>`:`<img src="${e.href}" data-modal-area />`,t.innerHTML=`\n    <modal-group name="image" active data-cursor-style="default">\n      <modal-container>\n        <modal-item>\n          <div class="modal-container-image">\n            <div class="modal-image">\n\n          \n            ${i}\n\n            \n              \n            </div>\n          </div>\n        </modal-item>\n      </modal-container>\n      </modal-group>`;const r=t.content;r.firstElementChild.addEventListener("modal:close",(function(){this.remove()}),{once:!0}),document.body.appendChild(r)}(this.dataset),"video"===e&&function(e){const t=document.createElement("template");t.innerHTML=`\n    <modal-group name="video" class="bg-black-1" active>\n      <modal-container>\n        <modal-item>\n          <div class="modal-container-video">\n            <div class="modal-video" data-modal-area>\n            <video autoplay loop controls src="${e.href}" />\n              \n            </div>\n          </div>\n        </modal-item>\n        \n      <btn-modal-close class="btn-modal-close-2" data-cursor-style="view">\n      <div class="close"></div>\n  </btn-modal-close>\n      </modal-container>\n      </modal-group>\n    `;const i=t.content;i.firstElementChild.addEventListener("modal:close",(function(){this.remove()}),{once:!0}),document.body.appendChild(i)}(this.dataset);else{const e=`modal-group[name=${this.group}]`,t=document.querySelector(e);if(!t)return void console.warn("nÃ£o existe modal: "+e);t.open(this.item)}}static get observedAttributes(){return["group","item","template"]}connectedCallback(){this.addEventListener("click",this.action)}}),window.customElements.define("btn-modal-next",class extends Xg{action(){this.modal.next()}}),window.customElements.define("btn-modal-prev",class extends Xg{action(){this.modal.prev()}});i("iDum");var $g=new M({pageName:"about",main:function(){Og(),document.querySelectorAll(".row-link:not(.js-running)").forEach(e=>{e.classList.add("js-running"),e.querySelectorAll(".link-discover").forEach(t=>{screen.isMobile?t.addEventListener("touchstart",(function(){e.dataset.active=t.id})):t.addEventListener("mouseenter",(function(){e.dataset.active=t.id}))})});let e,t={slidesPerView:1,spaceBetween:0,slidesPerGroup:1,pagination:{el:".swiper-fraction-pagination",clickable:!0,type:"fraction"},navigation:{nextEl:"#swiper-about-space .swiper-button-next",prevEl:"#swiper-about-space .swiper-button-prev"},loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,observer:!0,touchStartPreventDefault:!1,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0},i=document.querySelector("#swiper-about-space .swiper-container"),n=document.querySelector(".btn-switch-mode"),r=document.querySelector(".container-swiper-about-space");a();let s=0;function a(){e=new ye(i,t),e.on("beforeTransitionStart",(function(){this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?i.dataset.direction="forward":i.dataset.direction="backward"}))}i.querySelectorAll(".swiper-slide").forEach(e=>{e.dataset.index=s,s+=1}),n.addEventListener("click",(function(){r.classList.contains("list-mode")?(r.classList.remove("list-mode"),r.classList.add("swiper-mode"),a()):(r.classList.add("list-mode"),r.classList.remove("swiper-mode"),e.destroy())}))}});let Jg=scrollY,Zg=0,Qg=null,Kg=(document.querySelector(".text-logo"),[]);function ev(e){Kg.forEach(e=>{e.extraSpeed=Zg*e.acceleration+e.extraSpeed*e.slowdown,e.position=e.position+e.currentDirection*e.scrollDownRotateDirection*(e.steadyState+e.extraSpeed),e.el.style.transform=`rotate(${e.position}deg)`,e.el.style.transitionDuration="0ms",e.el.style.transformOrigin="50% 50%"}),Qg=requestAnimationFrame(ev),Zg=0}window.addEventListener("scroll",()=>{Zg=Math.abs(Zg+(scrollY-Jg))/100;let e=scrollY>Jg?1:-1;Kg.forEach(t=>t.currentDirection=e),Jg=scrollY},{passive:!0}),document.addEventListener("pjax:success",()=>{});let tv=function(){return document.querySelectorAll("[data-get-section]")},iv=function(){return document.querySelectorAll("[data-set-section]")},nv=av(tv()),rv=av(iv());function sv(){rv=av(iv()),nv.forEach(e=>{for(let t=0;t<rv.length;t++){const i=rv[t];if(e.middle>i.top&&e.middle<i.bottom)return void(e.el.dataset.getSection!=i.el.dataset.setSection&&(e.el.dataset.getSection=i.el.dataset.setSection))}})}function av(e){let t=[];return e.forEach(e=>{let i=e.getBoundingClientRect();t.push({el:e,top:i.top,bottom:i.bottom,middle:i.bottom-(i.bottom-i.top)/2})}),t}document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(nv=av(tv()),rv=av(iv()))}),document.addEventListener("pjax:complete",()=>{setTimeout(()=>{nv=av(tv()),rv=av(iv())},600)}),window.addEventListener("resize",(function(){nv=av(tv()),rv=av(iv())}));var ov=new M({pageName:"contact",main:function(){if(Ug(),!_.isPhone)new ye("#slider-form-interest .swiper-container",{slidesPerView:1,spaceBetween:0,slidesPerGroup:1,effect:"slide",direction:"vertical",loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,mousewheel:!0,slideToClickedSlide:!0,breakpoints:{767:{slidesPerView:1,slidesPerGroup:1},1025:{slidesPerView:1,slidesPerGroup:1}}})}});function lv(e,t){t.length>5?(e.removeActive(),setTimeout(()=>{e.classList.remove("not-expandable")},100)):(e.addActive(),e.classList.add("not-expandable"));let i=e.querySelector(".btn-read-more-expansive"),n=e.querySelector(".btn-read-less-expansive");i&&i.addEventListener("click",(function(){e.classList.add("enter-active"),setTimeout(()=>{e.addActive(),e.classList.remove("enter-active")},300)})),n&&n.addEventListener("click",(function(){e.removeActive()}))}function cv(){let e=document.querySelector(".circular-tab");if(e){let s=document.querySelector("#slider-expertise:not(.js-running)");if(document.querySelectorAll("[data-set-tab]").forEach(t=>{t.addEventListener("mouseenter",(function(){e.dataset.tabHover=t.dataset.setTab})),t.addEventListener("mouseleave",(function(){e.dataset.tabHover=""})),t.addEventListener("click",(function(){document.querySelectorAll("[data-tab].active").forEach(e=>{e.removeActive()}),document.querySelectorAll('[data-tab="'+t.dataset.setTab+'"]').forEach(e=>{e.addActive()}),3==e.dataset.tabActive&&1==t.dataset.setTab?(e.dataset.tabActive=4,setTimeout(()=>{e.classList.add("reseting"),e.dataset.tabActive=1,setTimeout(()=>{e.classList.remove("reseting")},50)},900)):e.dataset.tabActive=t.dataset.setTab,n(),i&&(r(),i.update(),i.slideTo(0))}))}),s){s.classList.add("js-running");var t=!1,i=new ye(s.querySelector(".swiper-container"),{slidesPerView:1.2,spaceBetween:43,slidesPerGroup:1,effect:"slide",navigation:{nextEl:s.querySelector(".swiper-button-next"),prevEl:s.querySelector(".swiper-button-prev")},touchStartPreventDefault:!1,loopFillGroupWithBlank:!1,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!1,freeMode:!0,breakpoints:{767:{slidesPerView:2.1,slidesPerGroup:1},1025:{slidesPerView:3.5,spaceBetween:50,slidesPerGroup:1}}});document.querySelectorAll(".list-expertise button").forEach(e=>{e.addEventListener("click",(function(){Bg(".list-expertise",!0),i.slideTo(this.dataset.index),setTimeout(()=>{document.addEventListener("click",(function(){t&&r()}),{once:!0})},100),setTimeout(()=>{!function(e){let i=document.querySelector(".expertise-about");if(document.querySelector("[data-slide-to="+e+"]").parentElement.classList.contains("highlighted"))return void r();r();i.classList.add("highlight"),i.querySelectorAll("[data-slide-to="+e+"]").forEach(e=>{e.parentElement.classList.add("highlighted")}),i.querySelectorAll("[data-slide="+e+"]").forEach(e=>{e.classList.add("highlighted")}),t=!0}(e.dataset.slideTo)},200)}))}),i.on("touchMove",(function(){t&&r()})),setTimeout(()=>{i.update()},600)}document.querySelectorAll('[data-tab="1"]').forEach(e=>{e.addActive()}),e.dataset.tabActive=1,setTimeout(()=>{n()},300)}function n(){let e;if(i)e=document.querySelectorAll(".list-expertise .active button");else{e=document.querySelectorAll(".list-home-services .active");let t=document.querySelector(".d-list");t.classList.add("not-expandable"),lv(t,e)}let t=0;e.forEach(e=>{e.dataset.index=t,e.style.setProperty("--delay",.1*t+"s"),t+=1})}function r(){let e=document.querySelector(".expertise-about");e.classList.remove("highlight"),e.querySelectorAll(".highlighted").forEach(e=>{e.classList.remove("highlighted")}),t=!1}}var uv=i("Gx3p"),hv=i.n(uv);var dv=i("iJZH"),pv=i.n(dv);i("9/o9");let fv=function(e){const{disabledState:t="",clickDiv:i=!0,baseElement:n=document.getElementById("wrapper-cursor"),cursorElement:r=n,defaultCursor:s="default"}=e||{};let a=0,o=0,l=!1,c=[],u=s,h="",d=!0,p=performance.now(),f=[];function m(){c=document.elementsFromPoint(o,a);let e=!1,i=!1,r=!1;c.slice().reverse().forEach(t=>{if("IFRAME"===t.nodeName&&(d=!1),"cursorTitle"in t.dataset&&(h=t.dataset.cursorTitle,r=!0),"cursorStyle"in t.dataset&&(u=t.dataset.cursorStyle,e=!0),0==e&&f.length>0){let e=f.find(e=>e.e===t.nodeName.toLowerCase());null!=e&&(u=e.r,i=!0)}}),!1===r&&(h=""),!1===e&&!1===i&&(u=s),l=!1,n.dataset.cursorTitle=d?h:"",n.dataset.cursor=d?u:t}return document.addEventListener("mousemove",(function(e){o=e.clientX,a=e.clientY,d=!0,!1===l&&(l=!0,setTimeout(m,100));performance.now()-p>10&&window.requestAnimationFrame((function(e){r.style.transform=`translate3d(${o}px, ${a}px, 0px)`,p=e}))}),{passive:!0}),document.addEventListener("click",(function(){if(n.dataset.clicked=!0,setTimeout(()=>{n.dataset.clicked=!1},350),m(),i){let e=document.createElement("div");e.dataset.cursor=""!=u?u+"-click":"click",e.style.top=a+"px",e.style.left=o+"px",e.style.position="fixed",document.body.appendChild(e),setTimeout(document.body.removeChild,1e3,e)}}),{passive:!0}),document.addEventListener("mouseout",(function(e){null===e.toElement&&(d=!1)}),{passive:!0}),document.addEventListener("scroll",(function(e){!1===l&&(l=!0,setTimeout(m,100))}),{passive:!0}),{AddDefault:function(e,t){f.push({e:e,r:t})}}}({clickDiv:!1});fv.AddDefault("a","hovered"),fv.AddDefault("button","hovered"),fv.AddDefault("input","hovered"),function(){let e=document.querySelector(".d-btn-cookies");e.querySelectorAll("[data-close-cookies]").forEach(t=>{t.addEventListener("click",(function(){t.parentElement.classList.add("unslide-up"),setTimeout(()=>{e.remove()},1e3)}))})}(),Gg()({animationTime:1e3,stepSize:120,accelerationMax:2,pulseAlgorithm:!0,pulseScale:4});var mv=!0;function gv(){mv?mv=!1:(document.body.classList.remove("page-leave-active"),document.body.classList.add("page-enter-active"),document.body.dataset.scrollPosition="top",setTimeout(()=>{document.body.classList.remove("page-enter-active"),document.body.dataset.pgNext=""},800)),refreshFsLightbox(),cv(),document.querySelectorAll(".before-after-container:not(js-running)").forEach(e=>{e.classList.add("js-running"),e.querySelector(".after");const t=e.querySelector(".slider");t.addEventListener("input",(function(){e.style.setProperty("--width",t.value+"%")}))}),document.querySelectorAll(".module-intro:not(.js-running)").forEach(e=>{e.classList.add("js-running");let t=e.querySelector(".d-list-topics"),i=t.querySelector(".list-topics"),n=i.querySelectorAll(".items"),r=!1;n.forEach(e=>{e.offsetHeight>i.offsetHeight&&(r=!0)}),r||t.classList.add("full-list"),e.querySelector(".btn-load-more-topics")&&e.querySelector(".btn-load-more-topics").addEventListener("click",(function(){t.classList.add("full-list")}))}),document.querySelectorAll(".module-audio:not(.js-running)").forEach(e=>{e.classList.add("js-running");const t=pv.a.create({container:e.querySelector(".audio"),backend:"MediaElement",waveColor:"#2B2B2B",progressColor:"#EF3340",cursorColor:"#EF3340",barWidth:1,barRadius:0,cursorWidth:0,height:200,barGap:6,hideScrollbar:!0});function i(e){var t=0,i=0;let n;return e/60>0&&(t=parseInt(e/60,10),e%=60),t/60>0&&(i=parseInt(t/60,10),t%=60),n=("0"+i).slice(-2)+":"+("0"+t).slice(-2)+":"+("0"+e).slice(-2),n}t.load(e.querySelector(".audio").dataset.src),e.querySelector(".btn-audio-play-pause").addEventListener("click",(function(){t.isPlaying()?(t.pause(),this.removeActive()):(this.addActive(),t.play())})),t.on("ready",(function(){var n=t.getDuration(),r=t.getCurrentTime(),s=parseInt(n-r);e.querySelector(".duration").innerText=i(s)})),t.on("audioprocess",(function(){if(t.isPlaying()){var n=t.getDuration(),r=t.getCurrentTime(),s=parseInt(n-r);e.querySelector(".duration").innerText=i(s)}}))}),document.querySelectorAll(".module-slider:not(.js-running)").forEach(e=>{e.classList.add("js-running");let t=0;e.querySelectorAll(".swiper-container .swiper-slide").forEach(e=>{e.dataset.index=t,t+=1});var i=new ye(e.querySelector(".swiper-container"),{slidesPerView:1,spaceBetween:0,slidesPerGroup:1,effect:"slide",navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},slideToClickedSlide:!0,touchStartPreventDefault:!1,loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0});let n=e.querySelector(".swiper-container");i.on("beforeTransitionStart",(function(){this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?n.dataset.direction="forward":n.dataset.direction="backward"}))}),document.querySelectorAll(".module-related-works:not(.js-running)").forEach(e=>{e.classList.add("js-running");let t=0;e.querySelectorAll(".slider-related-works .swiper-container .swiper-slide").forEach(e=>{e.dataset.index=t,t+=1});var i=new ye(e.querySelector(".swiper-container"),{slidesPerView:1,spaceBetween:0,slidesPerGroup:1,effect:"slide",navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},slideToClickedSlide:!0,loopFillGroupWithBlank:!1,centerInsufficientSlides:!0,touchStartPreventDefault:!1,grabCursor:!1,observer:!0,preloadImages:!1,lazy:!0,watchOverflow:!0,virtualTranslate:!0});let n=e.querySelector(".swiper-container");i.on("beforeTransitionStart",(function(){this.slides.forEach(e=>{e.dataset.index>this.activeIndex?e.dataset.position="next":e.dataset.index<this.activeIndex?e.dataset.position="prev":e.dataset.position="active"}),this.activeIndex>this.previousIndex?n.dataset.direction="forward":n.dataset.direction="backward"}))}),document.querySelectorAll(".expandable:not(.js-running)").forEach(e=>{e.classList.add("js-running"),lv(e,e.querySelectorAll("li"))}),Bg(),setTimeout(()=>{document.querySelectorAll(".split-words:not(.splitting)").forEach(e=>{const t=hv()({target:e,by:"lines"});new DocumentFragment,e.querySelectorAll("br").forEach(e=>{const t=document.createElement("div");t.classList.add("spacer"),e.classList.contains("yes-mobile")&&t.classList.add("yes-mobile"),e.classList.contains("no-mobile")&&t.classList.add("no-mobile"),t.classList.add("spacer"),e.parentNode.replaceChild(t,e)}),t[0].lines.forEach((e,i)=>{e.forEach(e=>{e.classList.add("wrapper-mask"),e.innerHTML="<span >"+e.innerHTML+"<span>&nbsp;</span></span>",i==t[0].lines.length-1&&e.classList.add("last-line")})}),e.querySelectorAll(".whitespace").forEach(e=>{e.remove()})})},0),function(){let e=i("7OUW"),t=[];function n(){_.isMobile||(document.querySelectorAll("[data-parallax-top]").forEach(i=>{let n=i.getAttribute("data-translate-x")?i.getAttribute("data-translate-x"):0,r=i.getAttribute("data-translate-y")?i.getAttribute("data-translate-y"):0,s=i.getAttribute("data-scale")?i.getAttribute("data-scale"):1,a=i.getAttribute("data-clip-x")?i.getAttribute("data-clip-x"):0,o=i.getAttribute("data-initial-clip-x")?i.getAttribute("data-initial-clip-x"):0;const l=e.create({elem:i,from:"0",to:window.innerHeight,track:!0,direct:!0,timing:"circInOut",props:{"--translateY":{from:"0",to:""+r},"--translateX":{from:"0",to:""+n},"--clip-x":{from:""+o,to:""+a},"--scale":{from:"1",to:""+s}}});l.start(),t.push(l)}),document.querySelectorAll("[data-parallax]").forEach(i=>{let n=i.getAttribute("data-translate-x")?i.getAttribute("data-translate-x"):0,r=i.getAttribute("data-translate-y")?i.getAttribute("data-translate-y"):0,s=i.getAttribute("data-scale")?i.getAttribute("data-scale"):1,a=i.getAttribute("data-opacity")?i.getAttribute("data-opacity"):0,o=i.getAttribute("data-clip-x")?i.getAttribute("data-clip-x"):0,l=i.getAttribute("data-initial-clip-x")?i.getAttribute("data-initial-clip-x"):0;const c=e.create({elem:i,from:"top-bottom",to:"bottom-top",track:!0,direct:!0,timing:"circInOut",props:{"--translateY":{from:"0",to:""+r},"--opacity":{from:"0",to:""+a},"--translateX":{from:"0",to:""+n},"--clip-x":{from:""+l,to:""+o},"--scale":{from:"1",to:""+s}}});c.start(),t.push(c)}),document.querySelectorAll("[data-parallax-center]").forEach(i=>{let n=i.getAttribute("data-translate-x")?i.getAttribute("data-translate-x"):0,r=i.getAttribute("data-translate-y")?i.getAttribute("data-translate-y"):0,s=i.getAttribute("data-scale")?i.getAttribute("data-scale"):1,a=i.getAttribute("data-opacity")?i.getAttribute("data-opacity"):0,o=i.getAttribute("data-clip-x")?i.getAttribute("data-clip-x"):0,l=i.getAttribute("data-initial-clip-x")?i.getAttribute("data-initial-clip-x"):0;const c=e.create({elem:i,from:"top-bottom",to:"middle-middle",track:!0,direct:!0,timing:"circInOut",props:{"--translateY":{from:"0",to:""+r},"--opacity":{from:"0",to:""+a},"--translateX":{from:"0",to:""+n},"--clip-x":{from:""+l,to:""+o},"--scale":{from:"1",to:""+s}}});c.start(),t.push(c)}))}document.addEventListener("pjax:success",()=>{t.forEach(e=>e.destroy()),t=[],n()}),window.addEventListener("resize",()=>{window.innerWidth<=767?(t.forEach(e=>e.destroy()),t=[],document.querySelectorAll("[data-parallax]").forEach(e=>e.style=""),document.querySelectorAll("[data-parallax-top]").forEach(e=>e.style="")):(0==t.length&&n(),t.forEach(e=>e.update()))}),n()}(),d(),function(e,{scrollDownRotateDirection:t="clockwise",acceleration:i=1,slowdown:n=.9,steadyState:r=1,startState:s="stopped"}={}){"string"==typeof e&&(e=document.querySelector(e));let a={el:e,scrollDownRotateDirection:"clockwise"===t?1:-1,acceleration:i,slowdown:n,steadyState:r,extraSpeed:0,position:0};"clockwise"==s&&(a.currentDirection=1),"counterclockwise"==s&&(a.currentDirection=-1),"stopped"==s&&(a.currentDirection=0),Kg.push(a),null==Qg&&requestAnimationFrame(ev)}(".rotate-content",{acceleration:1,slowdown:.95,steadyState:.3,startState:"clockwise"}),document.querySelectorAll("[data-get-section]").forEach(e=>{e.dataset.getSection=""}),setTimeout(()=>{sv(),document.addEventListener("scroll",sv,{passive:!0})},100),document.querySelectorAll("input,textarea").forEach(e=>{e.addEventListener("focus",(function(){this.closest("div").classList.add("preenchido")})),e.addEventListener("input",(function(){this.closest("div").classList.remove("error"),this.dataset.error&&this.setCustomValidity("")})),e.addEventListener("focusout",(function(){0===this.value.length&&this.closest("div").classList.remove("preenchido")})),e.addEventListener("invalid",(function(){Yg(this)}))}),document.querySelectorAll("select").forEach(e=>{e.addEventListener("input",(function(){this.selectedIndex>=0&&this.closest("div.container-input").classList.add("preenchido")})),e.addEventListener("invalid",(function(){this.selectedIndex>=0&&Yg(this,"div.container-input")}))}),-1==navigator.userAgent.indexOf("Firefox")&&document.querySelectorAll("input:-webkit-autofill,textarea:-webkit-autofill").forEach(e=>{e.closest("div").classList.add("preenchido")})}gv(),document.addEventListener("pjax:complete",gv),document.addEventListener("pjax:send",(function(){document.body.classList.add("page-leave-active"),setTimeout(()=>{document.body.dataset.scrollPosition="top"},300)})),function(){document.addEventListener("pjax:complete",t),t();let e=document.querySelectorAll("[data-menu-close]");function t(e){const t=document.querySelectorAll("[data-pg-active]"),i=document.body.dataset.pg,n=window.location.hash;t.forEach(e=>{const t=e.dataset.pgActive.split(" ");t.includes(i)||t===n?e.addActive():e.removeActive()})}e.forEach(t=>{t.addEventListener("click",(function(){e.forEach(e=>{e.classList.remove("active")}),t.addActive()}))})}();const vv=new class{constructor(){this.pages=[],this.currentPage={},this.lastPage={},this.firstPage=!0,document.addEventListener("pjax:send",this),document.addEventListener("pjax:complete",this),document.addEventListener("pjax:error",this)}handleEvent(e){switch(e.type){case"pjax:send":this.currentPage&&this.currentPage.destroy();break;case"pjax:complete":this.firstPage=!1,this.updateCurrent()&&this.runCurrent();break;case"pjax:error":const t=e.triggerElement.href;location.assign(t)}}updateCurrent(){const e=this.pages.find(e=>e.pageName.includes(v.currentPageId));return e?this.firstPage?(this.currentPage=e,!0):(this.lastPage=this.currentPage,this.currentPage=e,!0):(console.warn(`js da pÃ¡gina ${v.currentPageId} nÃ£o encontrado`),this.currentPage=null,!1)}runCurrent(){const e=this.currentPage;try{e.init()}catch(t){console.error(`Erro no init da pÃ¡gina ${e.pageName}: ${t}`)}try{e.main()}catch(t){console.error(`Erro no main da pÃ¡gina ${e.pageName}: ${t}`)}}add(e){this.pages.push(e)}};vv.add(Dg),vv.add(zg),vv.add(Ng),vv.add(Hg),vv.add(Vg),vv.add($g),vv.add(ov),vv.updateCurrent()&&vv.runCurrent()},"K+QX":function(e,t,i){var n=i("1I99"),r=i("gFQN"),s="data-pjax-state",a=function(e,t){if(!o(t)){var i=r(this.options),n=function(e,t){if(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return"modifier";if(e.protocol!==window.location.protocol||e.host!==window.location.host)return"external";if(e.hash&&e.href.replace(e.hash,"")===window.location.href.replace(location.hash,""))return"anchor";if(e.href===window.location.href.split("#")[0]+"#")return"anchor-empty"}(e,t);if(n)e.setAttribute(s,n);else{if(t.preventDefault(),this.options.currentUrlFullReload&&e.href===window.location.href.split("#")[0])return e.setAttribute(s,"reload"),void this.reload();e.setAttribute(s,"load"),i.triggerElement=e,this.loadUrl(e.href,i)}}};var o=function(e){return e.defaultPrevented||!1===e.returnValue};e.exports=function(e){var t=this;e.setAttribute(s,""),n(e,"click",(function(i){a.call(t,e,i)})),n(e,"keyup",function(i){13===i.keyCode&&a.call(t,e,i)}.bind(this))}},KYfQ:function(e,t){e.exports=function(e){if(null==e)return null;for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},"Ld/I":function(e,t,i){var n=i("hHoP");e.exports=function(e,t,i,r){r=r||document,e.forEach((function(e){n(r.querySelectorAll(e),t,i)}))}},NAdT:function(e,t){e.exports=function(){}},QDl9:function(e,t){!function(){const e=function(e=!0,t){const{delay:i=-1,leave:n=!0,leaveDelay:r=600}=t||{};if(e)this.futureActiveState=!0,i<0?(this.classList.remove("leave"),this.classList.add("active")):setTimeout(()=>{this.futureActiveState&&(this.classList.remove("leave"),this.classList.add("active"))},i);else{this.futureActiveState=!1;let e=function(){this.classList.contains("active")&&(this.classList.remove("active"),n&&(this.classList.add("leave"),setTimeout(()=>{this.classList.remove("leave")},r)))}.bind(this);i<0?e():setTimeout(()=>{!1===this.futureActiveState&&e()},i)}};HTMLElement.prototype.addActive=function(t){e.bind(this)(!0,t)},HTMLElement.prototype.removeActive=function(t){e.bind(this)(!1,t)}}()},SvoC:function(e,t,i){var n;!function(){var r,s,a,o,l={frameRate:150,animationTime:400,stepSize:100,pulseAlgorithm:!0,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,keyboardSupport:!0,arrowScroll:50,fixedBackground:!0,excluded:""},c=l,u=!1,h={x:0,y:0},d=!1,p=document.documentElement,f=[],m=/^Mac/.test(navigator.platform),g=37,v=38,y=39,x=40,b=32,w=33,_=34,M=35,S=36,E={37:1,38:1,39:1,40:1};function T(){if(!d&&document.body){d=!0;var e=document.body,t=document.documentElement,i=window.innerHeight,n=e.scrollHeight;if(p=document.compatMode.indexOf("CSS")>=0?t:e,r=e,c.keyboardSupport&&X("keydown",k),top!=self)u=!0;else if(ue&&n>i&&(e.offsetHeight<=i||t.offsetHeight<=i)){var o,l=document.createElement("div");l.style.cssText="position:absolute; z-index:-10000; top:0; left:0; right:0; height:"+p.scrollHeight+"px",document.body.appendChild(l),a=function(){o||(o=setTimeout((function(){l.style.height="0",l.style.height=p.scrollHeight+"px",o=null}),500))},setTimeout(a,10),X("resize",a);if((s=new ee(a)).observe(e,{attributes:!0,childList:!0,characterData:!1}),p.offsetHeight<=i){var h=document.createElement("div");h.style.clear="both",e.appendChild(h)}}c.fixedBackground||(e.style.backgroundAttachment="scroll",t.style.backgroundAttachment="scroll")}}var A=[],C=!1,L=Date.now();function P(e,t,i){var n,r;if(n=(n=t)>0?1:-1,r=(r=i)>0?1:-1,(h.x!==n||h.y!==r)&&(h.x=n,h.y=r,A=[],L=0),1!=c.accelerationMax){var s=Date.now()-L;if(s<c.accelerationDelta){var a=(1+50/s)/2;a>1&&(a=Math.min(a,c.accelerationMax),t*=a,i*=a)}L=Date.now()}if(A.push({x:t,y:i,lastX:t<0?.99:-.99,lastY:i<0?.99:-.99,start:Date.now()}),!C){var o=te(),l=e===o||e===document.body;null==e.$scrollBehavior&&function(e){var t=z(e);if(null==F[t]){var i=getComputedStyle(e,"")["scroll-behavior"];F[t]="smooth"==i}return F[t]}(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");var u=function(n){for(var r=Date.now(),s=0,a=0,o=0;o<A.length;o++){var h=A[o],d=r-h.start,p=d>=c.animationTime,f=p?1:d/c.animationTime;c.pulseAlgorithm&&(f=ne(f));var m=h.x*f-h.lastX>>0,g=h.y*f-h.lastY>>0;s+=m,a+=g,h.lastX+=m,h.lastY+=g,p&&(A.splice(o,1),o--)}l?window.scrollBy(s,a):(s&&(e.scrollLeft+=s),a&&(e.scrollTop+=a)),t||i||(A=[]),A.length?K(u,e,1e3/c.frameRate+1):(C=!1,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))};K(u,e,0),C=!0}}function R(e){d||T();var t=e.target;if(e.defaultPrevented||e.ctrlKey)return!0;if($(r,"embed")||$(t,"embed")&&/\.pdf/i.test(t.src)||$(r,"object")||t.shadowRoot)return!0;var i=-e.wheelDeltaX||e.deltaX||0,n=-e.wheelDeltaY||e.deltaY||0;m&&(e.wheelDeltaX&&J(e.wheelDeltaX,120)&&(i=e.wheelDeltaX/Math.abs(e.wheelDeltaX)*-120),e.wheelDeltaY&&J(e.wheelDeltaY,120)&&(n=e.wheelDeltaY/Math.abs(e.wheelDeltaY)*-120)),i||n||(n=-e.wheelDelta||0),1===e.deltaMode&&(i*=40,n*=40);var s=W(t);return s?!!function(e){if(!e)return;f.length||(f=[e,e,e]);e=Math.abs(e),f.push(e),f.shift(),clearTimeout(o),o=setTimeout((function(){try{localStorage.SS_deltaBuffer=f.join(",")}catch(e){}}),1e3);var t=e>120&&Z(e),i=!Z(120)&&!Z(100)&&!t;return e<50||i}(n)||(Math.abs(i)>1.2&&(i*=c.stepSize/120),Math.abs(n)>1.2&&(n*=c.stepSize/120),P(s,i,n),e.preventDefault(),void H()):!u||!ae||(Object.defineProperty(e,"target",{value:window.frameElement}),parent.wheel(e))}function k(e){var t=e.target,i=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==b;document.body.contains(r)||(r=document.activeElement);var n=/^(button|submit|radio|checkbox|file|color|image)$/i;if(e.defaultPrevented||/^(textarea|select|embed|object)$/i.test(t.nodeName)||$(t,"input")&&!n.test(t.type)||$(r,"video")||function(e){var t=e.target,i=!1;if(-1!=document.URL.indexOf("www.youtube.com/watch"))do{if(i=t.classList&&t.classList.contains("html5-video-controls"))break}while(t=t.parentNode);return i}(e)||t.isContentEditable||i)return!0;if(($(t,"button")||$(t,"input")&&n.test(t.type))&&e.keyCode===b)return!0;if($(t,"input")&&"radio"==t.type&&E[e.keyCode])return!0;var s=0,a=0,o=W(r);if(!o)return!u||!ae||parent.keydown(e);var l=o.clientHeight;switch(o==document.body&&(l=window.innerHeight),e.keyCode){case v:a=-c.arrowScroll;break;case x:a=c.arrowScroll;break;case b:a=-(e.shiftKey?1:-1)*l*.9;break;case w:a=.9*-l;break;case _:a=.9*l;break;case S:o==document.body&&document.scrollingElement&&(o=document.scrollingElement),a=-o.scrollTop;break;case M:var h=o.scrollHeight-o.scrollTop-l;a=h>0?h+10:0;break;case g:s=-c.arrowScroll;break;case y:s=c.arrowScroll;break;default:return!0}P(o,s,a),e.preventDefault(),H()}function I(e){r=e.target}var O,D,z=(O=0,function(e){return e.uniqueID||(e.uniqueID=O++)}),N={},B={},F={};function H(){clearTimeout(D),D=setInterval((function(){N=B=F={}}),1e3)}function U(e,t,i){for(var n=i?N:B,r=e.length;r--;)n[z(e[r])]=t;return t}function V(e,t){return(t?N:B)[z(e)]}function W(e){var t=[],i=document.body,n=p.scrollHeight;do{var r=V(e,!1);if(r)return U(t,r);if(t.push(e),n===e.scrollHeight){var s=j(p)&&j(i)||q(p);if(u&&G(p)||!u&&s)return U(t,te())}else if(G(e)&&q(e))return U(t,e)}while(e=e.parentElement)}function G(e){return e.clientHeight+10<e.scrollHeight}function j(e){return"hidden"!==getComputedStyle(e,"").getPropertyValue("overflow-y")}function q(e){var t=getComputedStyle(e,"").getPropertyValue("overflow-y");return"scroll"===t||"auto"===t}function X(e,t,i){window.addEventListener(e,t,i||!1)}function Y(e,t,i){window.removeEventListener(e,t,i||!1)}function $(e,t){return e&&(e.nodeName||"").toLowerCase()===t.toLowerCase()}if(window.localStorage&&localStorage.SS_deltaBuffer)try{f=localStorage.SS_deltaBuffer.split(",")}catch(e){}function J(e,t){return Math.floor(e/t)==e/t}function Z(e){return J(f[0],e)&&J(f[1],e)&&J(f[2],e)}var Q,K=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e,t,i){window.setTimeout(e,i||1e3/60)},ee=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,te=(Q=document.scrollingElement,function(){if(!Q){var e=document.createElement("div");e.style.cssText="height:10000px;width:1px;",document.body.appendChild(e);var t=document.body.scrollTop;document.documentElement.scrollTop,window.scrollBy(0,3),Q=document.body.scrollTop!=t?document.body:document.documentElement,window.scrollBy(0,-3),document.body.removeChild(e)}return Q});function ie(e){var t,i;return(e*=c.pulseScale)<1?t=e-(1-Math.exp(-e)):(e-=1,t=(i=Math.exp(-1))+(1-Math.exp(-e))*(1-i)),t*c.pulseNormalize}function ne(e){return e>=1?1:e<=0?0:(1==c.pulseNormalize&&(c.pulseNormalize/=ie(1)),ie(e))}var re=window.navigator.userAgent,se=/Edge/.test(re),ae=/chrome/i.test(re)&&!se,oe=/safari/i.test(re)&&!se,le=/mobile/i.test(re),ce=/Windows NT 6.1/i.test(re)&&/rv:11/i.test(re),ue=oe&&(/Version\/8/i.test(re)||/Version\/9/i.test(re)),he=(ae||oe||ce)&&!le,de=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){de=!0}}))}catch(e){}var pe=!!de&&{passive:!1},fe="onwheel"in document.createElement("div")?"wheel":"mousewheel";function me(e){for(var t in e)l.hasOwnProperty(t)&&(c[t]=e[t])}fe&&he&&(X(fe,R,pe),X("mousedown",I),X("load",T)),me.destroy=function(){s&&s.disconnect(),Y(fe,R),Y("mousedown",I),Y("keydown",k),Y("resize",a),Y("load",T)},window.SmoothScrollOptions&&me(window.SmoothScrollOptions),void 0===(n=function(){return me}.call(t,i,t,e))||(e.exports=n)}()},VC9s:function(e,t,i){var n=i("4nP2"),r=i("hHoP"),s=i("vQsZ"),a=i("C+yW"),o=i("oDzY"),l=i("1I99"),c=i("qa0c"),u=i("gFQN"),h=i("p+OP"),d=i("KYfQ"),p=i("NAdT"),f=function(e){this.state={numPendingSwitches:0,href:null,options:null},this.options=s(e),this.log("Pjax options",this.options),this.options.scrollRestoration&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),this.maxUid=this.lastUid=o(),this.parseDOM(document),l(window,"popstate",function(e){if(e.state){var t=u(this.options);t.url=e.state.url,t.title=e.state.title,t.history=!1,t.scrollPos=e.state.scrollPos,e.state.uid<this.lastUid?t.backward=!0:t.forward=!0,this.lastUid=e.state.uid,this.loadUrl(e.state.url,t)}}.bind(this))};if(f.switches=a,f.prototype={log:i("GRSy"),getElements:function(e){return e.querySelectorAll(this.options.elements)},parseDOM:function(e){var t=i("W9HJ");r(this.getElements(e),t,this)},refresh:function(e){this.parseDOM(e||document)},reload:function(){window.location.reload()},attachLink:i("K+QX"),attachForm:i("mZ+C"),forEachSelectors:function(e,t,n){return i("Ld/I").bind(this)(this.options.selectors,e,t,n)},switchSelectors:function(e,t,n,r){return i("5s6v").bind(this)(this.options.switches,this.options.switchesOptions,e,t,n,r)},latestChance:function(e){window.location=e},onSwitch:function(){c(window,"resize scroll"),this.state.numPendingSwitches--,0===this.state.numPendingSwitches&&this.afterAllSwitches()},loadContent:function(e,t){if("string"==typeof e){var i=document.implementation.createHTMLDocument("pjax"),n=e.match(/<html[^>]+>/gi);if(n&&n.length&&(n=n[0].match(/\s?[a-z:]+(?:=['"][^'">]+['"])*/gi)).length&&(n.shift(),n.forEach((function(e){var t=e.trim().split("=");1===t.length?i.documentElement.setAttribute(t[0],!0):i.documentElement.setAttribute(t[0],t[1].slice(1,-1))}))),i.documentElement.innerHTML=e,this.log("load content",i.documentElement.attributes,i.documentElement.innerHTML.length),document.activeElement&&h(document,this.options.selectors,document.activeElement))try{document.activeElement.blur()}catch(e){}this.switchSelectors(this.options.selectors,i,document,t)}else c(document,"pjax:complete pjax:error",t)},abortRequest:i("spJX"),doRequest:i("8Rbj"),handleResponse:i("khZ/"),loadUrl:function(e,t){t="object"==typeof t?d({},this.options,t):u(this.options),this.log("load href",e,t),this.abortRequest(this.request),c(document,"pjax:send",t),this.request=this.doRequest(e,t,this.handleResponse.bind(this))},afterAllSwitches:function(){var e=Array.prototype.slice.call(document.querySelectorAll("[autofocus]")).pop();e&&document.activeElement!==e&&e.focus(),this.options.selectors.forEach((function(e){r(document.querySelectorAll(e),(function(e){n(e)}))}));var t=this.state;if(t.options.history&&(window.history.state||(this.lastUid=this.maxUid=o(),window.history.replaceState({url:window.location.href,title:document.title,uid:this.maxUid,scrollPos:[0,0]},document.title)),this.lastUid=this.maxUid=o(),window.history.pushState({url:t.href,title:t.options.title,uid:this.maxUid,scrollPos:[0,0]},t.options.title,t.href)),this.forEachSelectors((function(e){this.parseDOM(e)}),this),c(document,"pjax:complete pjax:success",t.options),"function"==typeof t.options.analytics&&t.options.analytics(),t.options.history){var i=document.createElement("a");if(i.href=this.state.href,i.hash){var s=i.hash.slice(1);s=decodeURIComponent(s);var a=0,l=document.getElementById(s)||document.getElementsByName(s)[0];if(l&&l.offsetParent)do{a+=l.offsetTop,l=l.offsetParent}while(l);window.scrollTo(0,a)}else!1!==t.options.scrollTo&&(t.options.scrollTo.length>1?window.scrollTo(t.options.scrollTo[0],t.options.scrollTo[1]):window.scrollTo(0,t.options.scrollTo))}else t.options.scrollRestoration&&t.options.scrollPos&&window.scrollTo(t.options.scrollPos[0],t.options.scrollPos[1]);this.state={numPendingSwitches:0,href:null,options:null}}},f.isSupported=i("2DJw"),f.isSupported())e.exports=f;else{var m=p;for(var g in f.prototype)f.prototype.hasOwnProperty(g)&&"function"==typeof f.prototype[g]&&(m[g]=p);e.exports=m}},W9HJ:function(e,t){e.exports=function(e){switch(e.tagName.toLowerCase()){case"a":e.hasAttribute("data-pjax-state")||this.attachLink(e);break;case"form":e.hasAttribute("data-pjax-state")||this.attachForm(e);break;default:throw"Pjax can only be applied on <a> or <form> submit"}}},Wihx:function(e,t){e.exports=function(e){var t=e.text||e.textContent||e.innerHTML||"",i=e.src||"",n=e.parentNode||document.querySelector("head")||document.documentElement,r=document.createElement("script");if(t.match("document.write"))return console&&console.log&&console.log("Script contains document.write. Canâ€™t be executed correctly. Code skipped ",e),!1;if(r.type="text/javascript",r.id=e.id,""!==i&&(r.src=i,r.async=!1),""!==t)try{r.appendChild(document.createTextNode(t))}catch(e){r.text=t}return n.appendChild(r),(n instanceof HTMLHeadElement||n instanceof HTMLBodyElement)&&n.contains(r)&&n.removeChild(r),!0}},gFQN:function(e,t){e.exports=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}},hHoP:function(e,t){e.exports=function(e,t,i){return e instanceof HTMLCollection||e instanceof NodeList||e instanceof Array?Array.prototype.forEach.call(e,t,i):t.call(i,e)}},iDum:function(e,t){class i extends HTMLElement{constructor(){super(),this.params={speed:100,direction:"x",containerWidth:0,childrenWidth:0,containerHeight:0,childrenHeight:0,started:!1,waitingForImages:!1,reverse:!1,pauseOnHover:!1,_isVisible:!1,animation:null,observed:!1}}static get observedAttributes(){return["speed","direction","reverse","pause-on-hover"]}attributeChangedCallback(e,t,i){switch(e){case"speed":this.params.speed=parseInt(i),this.params.started&&this.createAnimation();break;case"direction":this.params.direction=i;break;case"reverse":this.params.reverse=!0;break;case"pause-on-hover":this.params.pauseOnHover=!0}}get isVisible(){return this.params._isVisible}set isVisible(e){const t=this.params,i=t._isVisible;if(e&&!i)if(t.started||t.waitingForImages)t.started&&t.animation.play();else{if(0===this.children.length)return;t.waitingForImages=function(e,t){let i=Array.from(e.querySelectorAll("img")).filter(e=>!e.complete&&!e.classList.contains("thumb")),n=i.length;return i.forEach(e=>e.addEventListener("load",()=>{n--,0===n&&t()},{once:!0})),0===i.length&&(queueMicrotask(t),!0)}(this,()=>{"x"==t.direction?this.initX():this.initY(),this.isVisible&&t.animation.play()})}if(!e&&i)try{t.animation.pause()}catch(e){}t._isVisible=e}recalcAnimation(){this.getAnimations().forEach((function(e){e.cancel()}));const e=Array.from(this.children).filter(e=>{if(!e.classList.contains("clone"))return e});if("x"==this.params.direction){const t=Array.from(e).map(e=>({el:e,width:e.offsetWidth})).reduce((e,t)=>e+t.width,0);this.params.childrenWidth=t}else{const t=Array.from(e).map(e=>({el:e,height:e.offsetHeight})).reduce((e,t)=>e+t.height,0);this.params.childrenHeight=t}this.createAnimation()}connectedCallback(){this.params.started&&this.params.animation.play();let e=this;window.addEventListener("resize",(function(){e&&e.recalcAnimation(e)})),this.params.observed||(i.obs.observe(this),this.params.observed=!0)}disconnectedCallback(){try{obj.params.started&&obj.params.animation.pause()}catch(e){}}initX(){const e=this.offsetWidth;if(this.getAnimations().forEach((function(e){e.cancel()})),0===e)return;if(this.params.started){if(e==this.params.containerWidth)return;Array.from(this.children).filter(e=>e.classList.contains("clone")).forEach(e=>e.remove())}const t=Array.from(this.children).map(e=>({el:e,width:e.offsetWidth})),i=t.reduce((e,t)=>e+t.width,0),n=i<e?e-i:0;this.params.started=!0,this.params.containerWidth=e,this.params.childrenWidth=i;let r=0,s=t.length,a=0,o=new DocumentFragment;for(;r<e+n+window.innerWidth;){a==s&&(a=0);const e=t[a];r+=e.width;const i=e.el.cloneNode(!0);i.classList.add("clone"),o.append(i),a++}this.appendChild(o),this.createAnimation();let l=this;l.params.pauseOnHover&&(l.addEventListener("mouseenter",(function(){l.params.animation.pause()})),l.addEventListener("mouseleave",(function(){l.params.animation.play()})))}initY(){const e=this.offsetHeight;if(0===e)return;if(this.params.started){if(e==this.params.containerHeight)return;Array.from(this.children).filter(e=>e.classList.contains("clone")).forEach(e=>e.remove())}const t=Array.from(this.children).map(e=>({el:e,height:e.offsetHeight})),i=t.reduce((e,t)=>e+t.height,0),n=i<e?e-i:0;this.params.started=!0,this.params.containerHeight=e,this.params.childrenHeight=i;let r=0,s=t.length,a=0,o=new DocumentFragment;for(;r<e+n;){a==s&&(a=0);const e=t[a];r+=e.height;const i=e.el.cloneNode(!0);i.classList.add("clone"),o.append(i),a++}this.appendChild(o),this.createAnimation();let l=this;l.params.pauseOnHover&&(l.addEventListener("mouseenter",(function(){l.params.animation.pause(),console.log("mouseenter",l)})),l.addEventListener("mouseleave",(function(){l.params.animation.play(),console.log("mouseleave",l)})))}createAnimation(){const e=this.params.speed,t=this.params.direction,i=this.params.reverse;let n;n="x"==t?this.params.childrenWidth:this.params.childrenHeight;const r=n/e*1e3;this.animate([{transform:`translate${"x"==t?"X":"Y"}(0px)`},{transform:`translate${"x"==t?"X":"Y"}(-${"x"==t?this.params.childrenWidth:this.params.childrenHeight}px)`}],{duration:r,direction:i?"reverse":"normal",iterations:1/0});const s=this.getAnimations();if(this.params.animation=s[0],this.isHover&&this.params.animation.pause(),!this.isVisible)try{this.params.animation.pause()}catch(e){}}}i.obs=new IntersectionObserver(e=>{e.forEach(e=>e.target.isVisible=e.isIntersecting)}),customElements.define("p-marquee",i)},iJZH:function(e,t,i){var n;self,n=function(){return e={"./src/drawer.canvasentry.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("./src/util/style.js")),r=s(i("./src/util/get-id.js"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,r.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,i,s;return t=e,(i=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,i,r){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=i,this.wave.height=r;var s={width:e+"px"};(0,n.default)(this.wave,s),this.hasProgressCanvas&&(this.progress.width=i,this.progress.height=r,(0,n.default)(this.progress,s))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"applyCanvasTransforms",value:function(e){e&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(e,t,i,n,r){this.fillRectToContext(this.waveCtx,e,t,i,n,r),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,i,n,r)}},{key:"fillRectToContext",value:function(e,t,i,n,r,s){e&&(s?this.drawRoundedRect(e,t,i,n,r,s):e.fillRect(t,i,n,r))}},{key:"drawRoundedRect",value:function(e,t,i,n,r,s){0!==r&&(r<0&&(i-=r*=-1),e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-s,i),e.quadraticCurveTo(t+n,i,t+n,i+s),e.lineTo(t+n,i+r-s),e.quadraticCurveTo(t+n,i+r,t+n-s,i+r),e.lineTo(t+s,i+r),e.quadraticCurveTo(t,i+r,t,i+r-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+s,i),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,i,n,r,s){this.drawLineToContext(this.waveCtx,e,t,i,n,r,s),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,i,n,r,s)}},{key:"drawLineToContext",value:function(e,t,i,n,r,s,a){if(e){var o,l,c,u=t.length/2,h=Math.round(u*this.start),d=h,p=Math.round(u*this.end)+1,f=this.wave.width/(p-d-1),m=n+r,g=i/n;for(e.beginPath(),e.moveTo((d-h)*f,m),e.lineTo((d-h)*f,m-Math.round((t[2*d]||0)/g)),o=d;o<p;o++)l=t[2*o]||0,c=Math.round(l/g),e.lineTo((o-h)*f+this.halfPixel,m-c);for(var v=p-1;v>=d;v--)l=t[2*v+1]||0,c=Math.round(l/g),e.lineTo((v-h)*f+this.halfPixel,m-c);e.lineTo((d-h)*f,m-Math.round((t[2*d+1]||0)/g)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,i){var n=this;return"blob"===i?new Promise((function(i){n.wave.toBlob(i,e,t)})):"dataURL"===i?this.wave.toDataURL(e,t):void 0}}])&&a(t.prototype,i),s&&a(t,s),e}();t.default=o,e.exports=t.default},"./src/drawer.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,i,n,s=l(c);function c(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=s.call(this)).container=r.withOrientation(e,t.vertical),i.params=t,i.width=0,i.height=t.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return t=c,(i=[{key:"style",value:function(e,t){return r.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=r.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var i,n=r.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,s=this.wrapper.getBoundingClientRect(),a=this.width,o=this.getWidth(),l=this.getProgressPixels(s,n);return i=!this.params.fillParent&&a<o?l*(this.params.pixelRatio/a)||0:(l+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,r.clamp(i,0,1)}},{key:"getProgressPixels",value:function(e,t){return this.params.rtl?e.right-t:t-e.left}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var i=r.withOrientation(t,e.params.vertical),n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var s=e.wrapper.getBoundingClientRect();if(i.clientY>=s.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("dblclick",(function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){return e.fireEvent("scroll",t)}))}},{key:"drawPeaks",value:function(e,t,i,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,i,n):this.drawWave(e,0,i,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),r=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=e-n,a=s-i;if(0!=r){if(!t&&-n<=a&&a<n){var o=this.params.autoCenterRate;o/=n,o*=r,s=i+(a=Math.max(-o,Math.min(o,a)))}(s=Math.max(0,Math.min(r,s)))!=i&&(this.wrapper.scrollLeft=s)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var i=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(i,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e)return!1;if(this.width=e,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var t=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:t})}return this.updateSize(),!0}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,i=Math.round(e*this.width)*t;if(i<this.lastPos||i-this.lastPos>=t){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(i)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,i,n){}},{key:"drawWave",value:function(e,t,i,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&a(t.prototype,i),n&&a(t,n),c}(r.Observer);t.default=h,e.exports=t.default},"./src/drawer.multicanvas.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(i("./src/drawer.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=s?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js")),a=l(i("./src/drawer.canvasentry.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p(e);if(t){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,e);var t,i,n,r=h(o);function o(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,i.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),i.hasProgressCanvas=t.waveColor!=t.progressColor,i.halfPixel=.5/t.pixelRatio,i.canvases=[],i.progressWave=null,i.EntryClass=a.default,i.canvasContextAttributes=t.drawingContextAttributes,i.overlap=2*Math.ceil(t.pixelRatio/2),i.barRadius=t.barRadius||0,i.vertical=t.vertical,i}return t=o,(i=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=s.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),i=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<i;)this.addCanvas();for(;this.canvases.length>i;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,r=this.canvases.length-1;this.canvases.forEach((function(t,i){i==r&&(n=e.width-e.maxCanvasWidth*r),e.updateDimensions(t,n,e.height),t.clearWave()}))}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,i=s.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(i,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),e.initWave(i),this.hasProgressCanvas){var n=s.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(n,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),e.initProgress(n)}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave.domElement),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress.domElement),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,i){var n=Math.round(t/this.params.pixelRatio),r=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,r,t,i),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;s.frame((function(){e.canvases.forEach((function(e){return e.clearWave()}))}))()}},{key:"drawBars",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,(function(e){var t=e.absmax,s=e.hasMinVals,a=(e.height,e.offsetY),o=e.halfH,l=e.peaks,c=e.channelIndex;if(void 0!==i)for(var u=s?2:1,h=l.length/u,d=r.params.barWidth*r.params.pixelRatio,p=d+(null===r.params.barGap?Math.max(r.params.pixelRatio,~~(d/2)):Math.max(r.params.pixelRatio,r.params.barGap*r.params.pixelRatio)),f=h/r.width,m=n,g=i;g<m;g+=p){var v=l[Math.floor(g*f*u)]||0,y=Math.round(v/t*o);0==y&&r.params.barMinHeight&&(y=r.params.barMinHeight),r.fillRect(g+r.halfPixel,o-y+a,d+r.halfPixel,2*y,r.barRadius,c)}}))}},{key:"drawWave",value:function(e,t,i,n){var r=this;return this.prepareDraw(e,t,i,n,(function(e){var t=e.absmax,s=e.hasMinVals,a=(e.height,e.offsetY),o=e.halfH,l=e.peaks,c=e.channelIndex;if(!s){for(var u=[],h=l.length,d=0;d<h;d++)u[2*d]=l[d],u[2*d+1]=-l[d];l=u}void 0!==i&&r.drawLine(l,t,o,a,i,n,c),r.fillRect(0,o+a-r.halfPixel,r.width,r.halfPixel,r.barRadius,c)}))}},{key:"drawLine",value:function(e,t,i,n,r,s,a){var o=this,l=this.params.splitChannelsOptions.channelColors[a]||{},c=l.waveColor,u=l.progressColor;this.canvases.forEach((function(a,l){o.setFillStyles(a,c,u),o.applyCanvasTransforms(a,o.params.vertical),a.drawLines(e,t,i,n,r,s)}))}},{key:"fillRect",value:function(e,t,i,n,r,s){for(var a=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+i)/this.maxCanvasWidth)+1,this.canvases.length),l=a;l<o;l++){var c=this.canvases[l],u=l*this.maxCanvasWidth,h={x1:Math.max(e,l*this.maxCanvasWidth),y1:t,x2:Math.min(e+i,l*this.maxCanvasWidth+c.wave.width),y2:t+n};if(h.x1<h.x2){var d=this.params.splitChannelsOptions.channelColors[s]||{},p=d.waveColor,f=d.progressColor;this.setFillStyles(c,p,f),this.applyCanvasTransforms(c,this.params.vertical),c.fillRects(h.x1-u,h.y1,h.x2-h.x1,h.y2-h.y1,r)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,i,n,r,a,o){var l=this;return s.frame((function(){if(e[0]instanceof Array){var c=e;if(l.params.splitChannels){var u,h=c.filter((function(e,t){return!l.hideChannel(t)}));return l.params.splitChannelsOptions.overlay||l.setHeight(Math.max(h.length,1)*l.params.height*l.params.pixelRatio),l.params.splitChannelsOptions&&l.params.splitChannelsOptions.relativeNormalization&&(u=s.max(c.map((function(e){return s.absMax(e)})))),c.forEach((function(e,t){return l.prepareDraw(e,t,i,n,r,h.indexOf(e),u)}))}e=c[0]}if(!l.hideChannel(t)){var d=1/l.params.barHeight;l.params.normalize&&(d=void 0===o?s.absMax(e):o);var p=[].some.call(e,(function(e){return e<0})),f=l.params.height*l.params.pixelRatio,m=f/2,g=f*a||0;return l.params.splitChannelsOptions&&l.params.splitChannelsOptions.overlay&&(g=0),r({absmax:d,hasMinVals:p,height:f,offsetY:g,halfH:m,peaks:e,channelIndex:t})}}))()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,i)}},{key:"applyCanvasTransforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.applyCanvasTransforms(t)}},{key:"getImage",value:function(e,t,i){if("blob"===i)return Promise.all(this.canvases.map((function(n){return n.getImage(e,t,i)})));if("dataURL"===i){var n=this.canvases.map((function(n){return n.getImage(e,t,i)}));return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}])&&c(t.prototype,i),n&&c(t,n),o}(r.default);t.default=f,e.exports=t.default},"./src/mediaelement-webaudio.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var r=c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,i,n,l=o(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=u,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,i){s(c(u.prototype),"_load",this).call(this,e,t,i),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),s(c(u.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){s(c(u.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&r(t.prototype,i),n&&r(t,n),u}(function(e){return e&&e.__esModule?e:{default:e}}(i("./src/mediaelement.js")).default);t.default=u,e.exports=t.default},"./src/mediaelement.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/webaudio.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=a(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,i,n,r=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=a,(i=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])}))}},{key:"createTimer",value:function(){var e=this;this.on("play",(function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),s.frame(t)())})),this.on("pause",(function(){e.fireEvent("audioprocess",e.getCurrentTime())}))}},{key:"load",value:function(e,t,i,n){var r=document.createElement(this.mediaType);r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,r.preload=null==n?"auto":n,r.src=e,r.style.width="100%";var s=t.querySelector(this.mediaType);s&&t.removeChild(s),t.appendChild(r),this._load(r,i,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,i){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==i||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var i=this.media.play();return t&&this.setPlayEnd(t),i}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,i){return this.buffer?l(d(a.prototype),"getPeaks",this).call(this,e,t,i):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&o(t.prototype,i),n&&o(t,n),a}(r.default);t.default=p,e.exports=t.default},"./src/peakcache.js":(e,t)=>{"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,r;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,i){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],r=0;r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<t;)r++;for(r%2==0&&n.push(t);r<this.peakCacheRanges.length&&this.peakCacheRanges[r]<=i;)n.push(this.peakCacheRanges[r]),r++;r%2==0&&n.push(i),n=n.filter((function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort((function(e,t){return e-t})).filter((function(e,t,i){return 0==t?e!=i[t+1]:t==i.length-1?e!=i[t-1]:e!=i[t-1]&&e!=i[t+1]}));var s=[];for(r=0;r<n.length;r+=2)s.push([n[r],n[r+1]]);return s}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),i=(0,r.default)(e);return-i>t?-i:t};var n=s(i("./src/util/max.js")),r=s(i("./src/util/min.js"));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){return Math.min(Math.max(t,e),i)},e.exports=t.default},"./src/util/fetch.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new n.default,i=new Headers,r=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach((function(e){i.append(e.key,e.value)}));var a=e.responseType||"json",o={method:e.method||"GET",headers:i,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(r,o).then((function(e){t.response=e;var i=!0;e.body||(i=!1);var n=e.headers.get("content-length");return null===n&&(i=!1),i?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new s(t,n,e)),o)):e})).then((function(e){var t;if(e.ok)switch(a){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+a}throw t||(t="HTTP error status: "+e.status),new Error(t)})).then((function(e){t.fireEvent("success",e)})).catch((function(e){t.fireEvent("error",e)})),t.fetchRequest=r,t};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/util/observer.js"));function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(i,10),this.loaded=0}var t,i,n;return t=e,(i=[{key:"start",value:function(e){var t=this;!function i(){t.instance._reader.read().then((function(n){var r=n.done,s=n.value;if(r)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=s.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(s),i()})).catch((function(t){e.error(t)}))}()}}])&&r(t.prototype,i),n&&r(t,n),e}();e.exports=t.default},"./src/util/frame.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,n.default)((function(){return e.apply(void 0,i)}))}};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("./src/util/request-animation-frame.js"));e.exports=t.default},"./src/util/get-id.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e="wavesurfer_"),e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"ignoreSilenceMode",{enumerable:!0,get:function(){return g.default}});var n=v(i("./src/util/get-id.js")),r=v(i("./src/util/max.js")),s=v(i("./src/util/min.js")),a=v(i("./src/util/absMax.js")),o=v(i("./src/util/observer.js")),l=v(i("./src/util/style.js")),c=v(i("./src/util/request-animation-frame.js")),u=v(i("./src/util/frame.js")),h=v(i("./node_modules/debounce/index.js")),d=v(i("./src/util/prevent-click.js")),p=v(i("./src/util/fetch.js")),f=v(i("./src/util/clamp.js")),m=v(i("./src/util/orientation.js")),g=v(i("./src/util/silence-mode.js"));function v(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach((function(i){e[i]>t&&(t=e[i])})),t},e.exports=t.default},"./src/util/min.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach((function(i){e[i]<t&&(t=e[i])})),t},e.exports=t.default},"./src/util/observer.js":(e,t)=>{"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var i=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return i.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var i,n=this.handlers[e];if(n)if(t)for(i=n.length-1;i>=0;i--)n[i]==t&&n.splice(i,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var i=this;return this.on(e,(function n(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];t.apply(i,s),setTimeout((function(){i.un(e,n)}),0)}))}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var r=this.handlers[e];r&&r.forEach((function(e){e.apply(void 0,i)}))}}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=n,e.exports=t.default},"./src/util/orientation.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i){return t[r]?t:new Proxy(t,{get:function(t,s,a){if(s===r)return!0;if("domElement"===s)return t;if("style"===s)return e(t.style,i);if("canvas"===s)return e(t.canvas,i);if("getBoundingClientRect"===s)return function(){return e(t.getBoundingClientRect.apply(t,arguments),i)};if("getContext"===s)return function(){return e(t.getContext.apply(t,arguments),i)};var o=t[n(s,i)];return"function"==typeof o?o.bind(t):o},set:function(e,t,r){return e[n(t,i)]=r,!0}})};var i={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function n(e,t){return Object.prototype.hasOwnProperty.call(i,e)&&t?i[e]:e}var r=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js":(e,t)=>{"use strict";function i(e){e.stopPropagation(),document.body.removeEventListener("click",i,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",i,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=i,e.exports=t.default},"./src/util/silence-mode.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.createElement("div");e.innerHTML='<audio x-webkit-airplay="deny"></audio>';var t=e.children.item(0);t.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",t.preload="auto",t.type="audio/mpeg",t.disableRemotePlayback=!0,t.play(),t.remove(),e.remove()},e.exports=t.default},"./src/util/style.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach((function(i){e.style[i]!==t[i]&&(e.style[i]=t[i])})),e},e.exports=t.default},"./src/wavesurfer.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=h(t);if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=s?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js")),s=u(i("./src/drawer.multicanvas.js")),a=u(i("./src/webaudio.js")),o=u(i("./src/mediaelement.js")),l=u(i("./src/peakcache.js")),c=u(i("./src/mediaelement-webaudio.js"));function u(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(h=function(e){return e?i:t})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t=p(i);function i(e){var n;if(v(this,i),(n=t.call(this)).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:s.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}},n.backends={MediaElement:o.default,WebAudio:a.default,MediaElementWebAudio:c.default},n.util=r,n.params=Object.assign({},n.defaultParams,e),n.params.splitChannelsOptions=Object.assign({},n.defaultParams.splitChannelsOptions,e.splitChannelsOptions),n.container="string"==typeof e.container?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(null==n.params.mediaContainer?n.mediaContainer=n.container:"string"==typeof n.params.mediaContainer?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===n.params.rtl&&(!0===n.params.vertical?r.style(n.container,{transform:"rotateX(180deg)"}):r.style(n.container,{transform:"rotateY(180deg)"})),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentRequest=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,"function"!=typeof n.params.renderer)throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,"AudioElement"==n.params.backend&&(n.params.backend="MediaElement"),"WebAudio"!=n.params.backend&&"MediaElementWebAudio"!==n.params.backend||a.default.prototype.supportsWebAudio.call(null)||(n.params.backend="MediaElement"),n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var l=0;return n._onResize=r.debounce((function(){l==n.drawer.wrapper.clientWidth||n.params.scrollParent||(l=n.drawer.wrapper.clientWidth,n.drawer.fireEvent("redraw"))}),"number"==typeof n.params.responsive?n.params.responsive:100),f(n,m(n))}return x(i,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach((function(e){return t.addPlugin(e)})),e.forEach((function(e){e.deferInit||t.initPlugin(e.name)})),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach((function(i){t[i]=e.staticProps[i]}));var i=e.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach((function(e){i.prototype[e]=r.Observer.prototype[e]})),this[e.name]=new i(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach((function(t){return e.destroyPlugin(t)}))}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())})),this.drawer.on("click",(function(t,i){setTimeout((function(){return e.seekTo(i)}),0)})),this.drawer.on("scroll",(function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)}))}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")})),this.backend.on("play",(function(){return e.fireEvent("play")})),this.backend.on("pause",(function(){return e.fireEvent("pause")})),this.backend.on("audioprocess",(function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){e.drawer.progress(e.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new l.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var i=this;return this.params.ignoreSilenceMode&&r.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return i.play(e,t)})),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,i=this.getCurrentTime()||0;i=Math.max(0,Math.min(t,i+(e||0))),this.seekAndCenter(i/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return t.seekTo(e)}));var i="WebAudio"===this.params.backend,n=this.backend.isPaused();i&&!n&&this.backend.pause();var r=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),i&&!n&&this.backend.play(),this.params.scrollParent=r,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),i=this.drawer.getWidth(),n=t,r=0,s=Math.max(r+i,n);if(this.params.fillParent&&(!this.params.scrollParent||t<i)&&(r=0,s=n=i),this.params.partialRender){var a,o=this.peakCache.addRangeToPeakCache(n,r,s);for(a=0;a<o.length;a++)e=this.backend.getPeaks(n,o[a][0],o[a][1]),this.drawer.drawPeaks(e,n,o[a][0],o[a][1])}else e=this.backend.getPeaks(n,r,s),this.drawer.drawPeaks(e,n,r,s);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,(function(e){t.isDestroyed||t.loadDecodedBuffer(e)}))}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,i=new FileReader;i.addEventListener("progress",(function(e){return t.onProgress(e)})),i.addEventListener("load",(function(e){return t.loadArrayBuffer(e.target.result)})),i.addEventListener("error",(function(){return t.fireEvent("error","Error reading file")})),i.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,i,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),i){var r={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(i),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},s=Object.keys(r).filter((function(e){return r[e]}));s.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+s.join("\n\t- ")),i=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,i,n)}}},{key:"loadBuffer",value:function(e,t,i){var n=this,r=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,(function(e){return n.loadArrayBuffer(e)}))};if(!t)return r();this.backend.setPeaks(t,i),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",r))}},{key:"loadMediaElement",value:function(e,t,i,n){var r=this,s=e;if("string"==typeof e)this.backend.load(s,this.mediaContainer,t,i);else{var a=e;this.backend.loadElt(a,t),s=a.src}this.tmpEvents.push(this.backend.once("canplay",(function(){r.backend.destroyed||(r.drawBuffer(),r.isReady=!0,r.fireEvent("ready"))})),this.backend.once("error",(function(e){return r.fireEvent("error",e)}))),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(s,(function(e){r.decodeArrayBuffer(e,(function(e){r.backend.buffer=e,r.backend.setPeaks(null),r.drawBuffer(),r.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(e,t){var i=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(n){i.isDestroyed||i.arraybuffer!=e||(t(n),i.arraybuffer=null)}),(function(){return i.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function(e,t){var i=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),s=r.fetchFile(n);return this.currentRequest=s,this.tmpEvents.push(s.on("progress",(function(e){i.onProgress(e)})),s.on("success",(function(e){t(e),i.currentRequest=null})),s.on("error",(function(e){i.fireEvent("error",e),i.currentRequest=null}))),s}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,i,n,r){e=e||1024,n=n||0,t=t||1e4,i=i||!1;var s=this.backend.getPeaks(e,n,r),a=[].map.call(s,(function(e){return Math.round(e*t)/t}));return new Promise((function(e,t){if(!i){var n=new Blob([JSON.stringify(a)],{type:"application/json;charset=utf-8"}),r=URL.createObjectURL(n);window.open(r),URL.revokeObjectURL(r)}e(a)}))}},{key:"exportImage",value:function(e,t,i){return e||(e="image/png"),t||(t=1),i||(i="dataURL"),this.drawer.getImage(e,t,i)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(e){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(e){return new i(e).init()}}]),i}(r.Observer);t.default=b,b.VERSION="5.2.0",b.util=r,e.exports=t.default},"./src/webaudio.js":(e,t,i)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,i&&i.set(e,r),r}(i("./src/util/index.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var r=h(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return u(this,i)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,i,n,r=c(s);function s(e){var t,i,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=r.call(this)).audioContext=null,n.offlineAudioContext=null,n.stateBehaviors=(a(t={},"playing",{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(t,"paused",{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),a(t,"finished",{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t),n.params=e,n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{}),n.lastPlay=n.ac.currentTime,n.startPosition=0,n.scheduledPause=null,n.states=(a(i={},"playing",Object.create(n.stateBehaviors.playing)),a(i,"paused",Object.create(n.stateBehaviors.paused)),a(i,"finished",Object.create(n.stateBehaviors.finished)),i),n.buffer=null,n.filters=[],n.gainNode=null,n.mergedPeaks=null,n.offlineAc=null,n.peaks=null,n.playbackRate=1,n.analyser=null,n.scriptNode=null,n.source=null,n.splitPeaks=[],n.state=null,n.explicitDuration=e.duration,n.destroyed=!1,n}return t=s,(i=[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState("paused"),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(s.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(s.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState("finished"),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states.playing&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var i=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(i),t.srcObject=i.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(e,(function(e){return t(e)}),i):this.offlineAc.decodeAudioData(e).then((function(e){return t(e)})).catch((function(e){return i(e)}))}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,i=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<i;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,i){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,i=i||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var r,s=this.buffer.length/e,a=~~(s/10)||1,o=this.buffer.numberOfChannels;for(r=0;r<o;r++){var l=this.splitPeaks[r],c=this.buffer.getChannelData(r),u=void 0;for(u=t;u<=i;u++){var h=~~(u*s),d=~~(h+s),p=c[h],f=p,m=void 0;for(m=h;m<d;m+=a){var g=c[m];g>f&&(f=g),g<p&&(p=g)}l[2*u]=f,l[2*u+1]=p,(0==r||f>this.mergedPeaks[2*u])&&(this.mergedPeaks[2*u]=f),(0==r||p<this.mergedPeaks[2*u+1])&&(this.mergedPeaks[2*u+1]=p)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState("paused"),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var i=this.seekTo(e,t);e=i.start,t=i.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState("playing"),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(e){}this.setState("paused"),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}])&&o(t.prototype,i),n&&o(t,n),s}(r.Observer);t.default=d,d.scriptBufferSize=256,e.exports=t.default},"./node_modules/debounce/index.js":e=>{function t(e,t,i){var n,r,s,a,o;function l(){var c=Date.now()-a;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,i||(o=e.apply(s,r),s=r=null))}null==t&&(t=100);var c=function(){s=this,r=arguments,a=Date.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(o=e.apply(s,r),s=r=null),o};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(o=e.apply(s,r),s=r=null,clearTimeout(n),n=null)},c}t.debounce=t,e.exports=t}},t={},function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}("./src/wavesurfer.js");var e,t},e.exports=n()},"khZ/":function(e,t,i){var n=i("gFQN"),r=i("oDzY"),s=i("qa0c");e.exports=function(e,t,i,a){if((a=n(a||this.options)).request=t,!1!==e){var o=window.history.state||{};window.history.replaceState({url:o.url||window.location.href,title:o.title||document.title,uid:o.uid||r(),scrollPos:[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]},document.title,window.location.href);var l=i;t.responseURL?i!==t.responseURL&&(i=t.responseURL):t.getResponseHeader("X-PJAX-URL")?i=t.getResponseHeader("X-PJAX-URL"):t.getResponseHeader("X-XHR-Redirected-To")&&(i=t.getResponseHeader("X-XHR-Redirected-To"));var c=document.createElement("a");c.href=l;var u=c.hash;c.href=i,u&&!c.hash&&(c.hash=u,i=c.href),this.state.href=i,this.state.options=a;try{this.loadContent(e,a)}catch(e){if(s(document,"pjax:error",a),this.options.debug)throw e;return console&&console.error&&console.error("Pjax switch fail: ",e),this.latestChance(i)}}else s(document,"pjax:complete pjax:error",a)}},"mZ+C":function(e,t,i){var n=i("1I99"),r=i("gFQN"),s=function(e,t){if(!a(t)){var i=r(this.options);i.requestOptions={requestUrl:e.getAttribute("action")||window.location.href,requestMethod:e.getAttribute("method")||"GET"};var n=document.createElement("a");n.setAttribute("href",i.requestOptions.requestUrl);var s=function(e,t){if(e.protocol!==window.location.protocol||e.host!==window.location.host)return"external";if(e.hash&&e.href.replace(e.hash,"")===window.location.href.replace(location.hash,""))return"anchor";if(e.href===window.location.href.split("#")[0]+"#")return"anchor-empty";if(t.currentUrlFullReload&&e.href===window.location.href.split("#")[0])return"reload"}(n,i);s?e.setAttribute("data-pjax-state",s):(t.preventDefault(),"multipart/form-data"===e.enctype?i.requestOptions.formData=new FormData(e):i.requestOptions.requestParams=function(e){for(var t=[],i=e.elements,n=0;n<i.length;n++){var r=i[n],s=r.tagName.toLowerCase();if(r.name&&void 0!==r.attributes&&"button"!==s){var a=r.attributes.type;if(!a||"checkbox"!==a.value&&"radio"!==a.value||r.checked){var o=[];if("select"===s)for(var l,c=0;c<r.options.length;c++)(l=r.options[c]).selected&&!l.disabled&&o.push(l.hasAttribute("value")?l.value:l.text);else o.push(r.value);for(var u=0;u<o.length;u++)t.push({name:encodeURIComponent(r.name),value:encodeURIComponent(o[u])})}}}return t}(e),e.setAttribute("data-pjax-state","submit"),i.triggerElement=e,this.loadUrl(n.href,i))}};var a=function(e){return e.defaultPrevented||!1===e.returnValue};e.exports=function(e){var t=this;e.setAttribute("data-pjax-state",""),n(e,"submit",(function(i){s.call(t,e,i)}))}},nRv4:function(e,t){if(VARS.analytics){i=window,n=document,r="script",s="ga",i.GoogleAnalyticsObject=s,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=n.createElement(r),o=n.getElementsByTagName(r)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),ga("create",VARS.analytics,"auto"),ga("send","pageview"),document.addEventListener("pjax:end",(function(){ga("set","location",window.location.href),ga("send","pageview")}))}var i,n,r,s,a,o;if(VARS.gtag){document.addEventListener("pjax:end",(function(){gtag("event","pageview",{page_path:location.pathname+location.search+location.hash})}))}},oDzY:function(e,t){var i;e.exports=(i=0,function(){var e="pjax"+(new Date).getTime()+"_"+i;return i++,e})},"p+OP":function(e,t){e.exports=function(e,t,i){for(var n=0;n<t.length;n++)for(var r=e.querySelectorAll(t[n]),s=0;s<r.length;s++)if(r[s].contains(i))return!0;return!1}},qa0c:function(e,t,i){var n=i("hHoP");e.exports=function(e,t,i){(t="string"==typeof t?t.split(" "):t).forEach((function(t){var r;(r=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),r.eventName=t,i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),n(e,(function(e){var t=!1;e.parentNode||e===document||e===window||(t=!0,document.body.appendChild(e)),e.dispatchEvent(r),t&&e.parentNode.removeChild(e)}))}))}},spJX:function(e,t,i){var n=i("NAdT");e.exports=function(e){e&&e.readyState<4&&(e.onreadystatechange=n,e.abort())}},vQsZ:function(e,t,i){var n=i("C+yW");function r(){window._gaq&&_gaq.push(["_trackPageview"]),window.ga&&ga("send","pageview",{page:location.pathname,title:document.title})}e.exports=function(e){return(e=e||{}).elements=e.elements||"a[href], form[action]",e.selectors=e.selectors||["title",".js-Pjax"],e.switches=e.switches||{},e.switchesOptions=e.switchesOptions||{},e.history=void 0===e.history||e.history,e.analytics="function"==typeof e.analytics||!1===e.analytics?e.analytics:r,e.scrollTo=void 0===e.scrollTo?0:e.scrollTo,e.scrollRestoration=void 0===e.scrollRestoration||e.scrollRestoration,e.cacheBust=void 0===e.cacheBust||e.cacheBust,e.debug=e.debug||!1,e.timeout=e.timeout||0,e.currentUrlFullReload=void 0!==e.currentUrlFullReload&&e.currentUrlFullReload,e.switches.head||(e.switches.head=n.switchElementsAlt),e.switches.body||(e.switches.body=n.switchElementsAlt),e}},vX6Q:function(e,t,i){var n,r;!function(s,a){"use strict";n=[i("CUlp")],void 0===(r=function(e){return function(e,t){var i=e.jQuery,n=e.console;function r(e,t){for(var i in t)e[i]=t[i];return e}var s=Array.prototype.slice;function a(e,t,o){if(!(this instanceof a))return new a(e,t,o);var l=e;"string"==typeof e&&(l=document.querySelectorAll(e)),l?(this.elements=function(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?s.call(e):[e]}(l),this.options=r({},this.options),"function"==typeof t?o=t:r(this.options,t),o&&this.on("always",o),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):n.error("Bad element for imagesLoaded "+(l||e))}a.prototype=Object.create(t.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&o[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background){var s=e.querySelectorAll(this.options.background);for(n=0;n<s.length;n++){var a=s[n];this.addElementBackgroundImages(a)}}}};var o={1:!0,9:!0,11:!0};function l(e){this.img=e}function c(e,t){this.url=e,this.element=t,this.img=new Image}return a.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,e),n=i.exec(t.backgroundImage)}},a.prototype.addImage=function(e){var t=new l(e);this.images.push(t)},a.prototype.addBackground=function(e,t){var i=new c(e,t);this.images.push(i)},a.prototype.check=function(){var e=this;function t(t,i,n){setTimeout((function(){e.progress(t,i,n)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(e){e.once("progress",t),e.check()})):this.complete()},a.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&n&&n.log("progress: "+i,e,t)},a.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},l.prototype=Object.create(t.prototype),l.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},l.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},l.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},l.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},l.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},l.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype=Object.create(l.prototype),c.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},a.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((i=t).fn.imagesLoaded=function(e,t){return new a(this,e,t).jqDeferred.promise(i(this))})},a.makeJQueryPlugin(),a}(s,e)}.apply(t,n))||(e.exports=r)}("undefined"!=typeof window?window:this)},y1Nr:function(e,t){}});
